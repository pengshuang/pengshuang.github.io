!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.QQYPlayer=e()}}(function(){return function e(t,a,n){function r(o,s){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return r(a?a:e)},c,c.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return 5="" r}({1:[function(e,t,a){"use="" strict";var="" n="{answered:{op:"answered",params:function(e){return{}}},timeupdate:{op:"timeupdate",params:function(e){return{currentTime:parseFloat(e.currentTime().toFixed(2)),duration:e.duration()}}},ended:{op:"ended",params:function(e){return{}}},play:{op:"playing",params:function(e){return{}}},pause:{op:"paused",params:function(e){return{}}},firstplay:{op:"firstplay",params:function(e){return{}}},ready:{op:"ready",params:function(e){return{}}},loadedmetadata:{op:"durationcalculable",params:function(e){return{duration:e.duration()}}},examopen:{op:"examopen",params:function(){return{}}},examclose:{op:"examclose",params:function(){return{}}},"bullet.sendWindow.disableClick":{op:"bullet.sendWindow.disableClick",params:function(){return{}}}};t.exports=n},{}],2:[function(e,t,a){"use" n,i="function(e){var" t="JSON.parse(e.data);r[t.op](t,e)};window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)},{"./player-iframe":3}],3:[function(e,t,a){"use" strict";function="" n(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}var="" i="function(){function" e(e,t){for(var="" n&&(n.writable="!0),Object.defineProperty(e,n.key,n)}}return" function(t,a,n){return="" a&&e(t.prototype,a),n&&e(t,n),t}}(),o="e("./event-map.js"),s=n(o),l=e("./util/fun.js"),u=n(l),c=videojs.getComponent("ModalDialog"),d=50,p=function(e){var" nt="" .test(t),n="/Firefox/.test(t),r=/es_except/.test(t),i=u["default"].getIEVersion(),o=t.indexOf("Edge")">-1;return!(i||a&&n||r||o)},f=function(e){var t=!1;e.playbackRates&&"hls"==e.playbackRates.source&&e.playbackRates.enable&&p()&&(t=!0);var a=e.playbackRates&&t?["html5","flash"]:["flash","html5"];"undefined"==typeof e.inactivityTimeout&&(e.inactivityTimeout=2e3);var n={techOrder:a,inactivityTimeout:e.inactivityTimeout,autoplay:e.autoplay,poster:e.poster,playbackRates:e.playbackRates&&e.playbackRates.rates?e.playbackRates.rates:[1,1.25,1.5],plugins:{},html5:{nativeTextTracks:!1},playbackRateOption:e.playbackRates,controlBar:{volumeMenuButton:!e.controlBar||!e.controlBar.disableVolumeButton},resourceId:e.resourceId,user:e.user};return n},h=function(e){var t={hls_debug:!1,hls_debug2:!1,hls_capleveltostage:!1,hls_caplevelonfpsdrop:!1,hls_smoothautoswitchonfpsdrop:!1,hls_startfromlevel:1,hls_seekmode:"ACCURATE",defaultLevel:localStorage.resolution,watermark_file:e.watermark?e.watermark.file:"",watermark_pos:e.watermark?e.watermark.pos:"",watermark_xrepeat:e.watermark?e.watermark.xrepeat:"",watermark_opacity:e.watermark?e.watermark.opacity:"",fingerprint_text:e.fingerprint?e.fingerprint.html:"",fingerprint_size:13,fingerprint_color:"0xf5f5f5",fingerprint_duration:e.fingerprint?e.fingerprint.duration:""};return t},m=function(){function e(t){r(this,e)}return i(e,[{key:"setup",value:function(e,t){this.sdkSource=t.source,this.sdkOrigin=t.origin,this._initPlayer(e.params.options)}},{key:"_initPlayer",value:function(e){var t=this;videojs.options.flash.swf="video-js.swf",videojs.options.flash.flashVars=h(e);var a=f(e),n=videojs("example_video_1",a,function(){n.on("datapicker.start",function(){console.log(111)}),t.setSubtitle(n,e),this.customUi(),e.controlBar&&e.controlBar.disablePlaybackButton||this.playback(),e.controlBar&&e.controlBar.disableResolutionSwitcher&&(this.options_.disableResolutionSwitcher=!0),e.videoHeaderLength&&(this.options_.videoHeaderLength=e.videoHeaderLength),e.statsInfo&&(this.options_.statsInfo=e.statsInfo),"html5"===a.techOrder[0]&&(t.handleFingerprint(n,e.fingerprint),t.handleWatermark(n,e.watermark)),t.handleRemeberLastPos(n,e.remeberLastPos),t.handleExam(n,e.exam),t.handlePluck(n,e.pluck),t.handleHotkeys(n,e),t.handleControlBar(n,e.disableControlBar),t.handleProgressBar(n,e.disableProgressBar),t.handlePlaybackRates(n,e.playbackRates,e.playlist),t.listenPlayerEvents(n),e.bulletscreen&&n.bulletscreen(e.bulletscreen)});this.player=n}},{key:"_sendPost",value:function(e){var t=JSON.stringify(e);this.sdkSource.postMessage(t,this.sdkOrigin)}},{key:"setSubtitle",value:function(e,t){if(t.textTrack){var a=(e.textTracks().tracks_,e.textTrackSettings),n={text:"字幕",data:[]},r={text:"字幕列表",children:[]},i={text:"字体大小",children:[{text:"大",event:"subtitle.bg",callback:function(){a.setValues({fontPercent:1.25}),a.updateDisplay()}},{text:"中",event:"subtitle.md",callback:function(){a.setValues({fontPercent:1}),a.updateDisplay()}},{text:"小",event:"subtitle.sm",callback:function(){a.setValues({fontPercent:.75}),a.updateDisplay()}}]};t.textTrack.map(function(a,n){n>3||(e.addRemoteTextTrack({kind:"captions",label:a.label,src:a.src,videoHeaderLength:t.videoHeaderLength||0,"default":a["default"]}),r.children.push({text:a.label,event:"subtitleIndex."+n,callback:function(){e.textTracks().tracks_.map(function(e){e.mode="disabled"}),e.textTracks().tracks_[n].mode="showing"}}))}),n.data.push(r,i),n.data.length&&e.settingCenter(n)}}},{key:"handleFingerprint",value:function(e,t){t&&e.fingerprint({html:t.html,duration:t.duration})}},{key:"handleRemeberLastPos",value:function(e,t){t&&e.prompt()}},{key:"handleWatermark",value:function(e,t){t&&e.watermark(t)}},{key:"handleExam",value:function(e,t){t&&e.examPopup(t)}},{key:"handlePluck",value:function(e,t){t&&e.pluck(t)}},{key:"handleHotkeys",value:function(e,t){t.disableProgressBar||e.hotkeys()}},{key:"handleControlBar",value:function(e,t){t&&e.on("loadeddata",function(){e.controls(!1)})}},{key:"handleProgressBar",value:function(e,t){if(t){var a=e.controlBar.progressControl.seekBar;a.off("mousedown")}}},{key:"handlePlaybackRates",value:function(e,t,a){t&&t.enable?("hls"==t.source&&(e.src({src:t.src,type:"application/x-mpegURL"}),e.resolutionSwitcher()),"mp4"==t.source&&e.resolutionSwitcher({srcs:t.src})):(e.resolutionSwitcher(),e.src(a||t.src))}},{key:"listenPlayerEvents",value:function(e){var t=this,a=function(a){e.on(a,function(n,r){var i=s["default"][a].params(e);r&&(i.data=r),t._sendPost({op:s["default"][a].op,params:i})})};for(var n in s["default"])a(n)}},{key:"pause",value:function(){this.player.pause()}},{key:"play",value:function(){this.player.play()}},{key:"setCurrentTime",value:function(e){this.player.currentTime(e.params.time)}},{key:"setExams",value:function(e){e.params.exams.loadImmediately=!0,this.player.examPopup(e.params.exams)}},{key:"requestFullscreen",value:function(){this.player.requestFullscreen()}},{key:"destory",value:function(){this.player.dispose()}},{key:"openModal",value:function(e){var e=e.params,t=document.createElement("div");t.innerHTML=e.content;var a=u["default"].toArray(t.childNodes);this.modal=new c(this.player,{content:a}),this.modal.addClass("player-paused-modal"),e.width=e.width?e.width:500,e.height=e.height?e.height:300,this.modal.width(e.width),this.modal.el_.style.marginLeft=-(e.width/2)+"px",this.modal.height(e.height),this.modal.el_.style.marginTop=-(e.height/2+d/2)+"px",this.player.addChild(this.modal),this.modal.open(),this.player.controls(!0)}},{key:"closeModal",value:function(){this.modal&&this.modal.close()}},{key:"enableBulletScreen",value:function(e){var t=this.player.getChildById("sendWindow");this.player.options().user=e.params,t.enable()}},{key:"disableBulletScreen",value:function(){var e=this.player.getChildById("sendWindow");e.disable()}}]),e}();t.exports=m},{"./event-map.js":1,"./util/fun.js":4}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){for(var t=[],a=e.length>>>0;a--;)t[a]=e[a];return t},r=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0||navigator.userAgent.match(/Trident.*rv\:11\./)){var a=parseInt(e.substring(t+5,e.indexOf(".",t)));return a}return!1};a["default"]={toArray:n,getIEVersion:r}},{}]},{},[2])(2)});</n.length;o++)r(n[o]);return>