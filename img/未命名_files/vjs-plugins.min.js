!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" r="function(){function" e(e,t){var="" n="[],i=!0,r=!1,o=void" 0;try{for(var="" a,s="e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw" o}}return="" n}return="" function(t,n){if(array.isarray(t))return="" t;if(symbol.iterator="" in="" object(t))return="" e(t,n);throw="" new="" typeerror("invalid="" attempt="" to="" destructure="" non-iterable="" instance")}}(),o="e("global/window"),a=i(o),s=function(e,t){for(var">=r.adStartTime&&t<=r.adendtime)return 0="==arguments[2]?0:arguments[2];if(e.segments)for(var" r}return="" null},u="function(e,t){var" n="arguments.length<=2||void" i="n,o=void" 0,u="0;u<e.segments.length;u++){var" l="e.segments[u];if(o||(o=s(t,i+l.duration/2)),o){if("cueIn"in" l){o.endtime="i,o.adEndTime=i,i+=l.duration,o=null;continue}if(i<o.endTime){i+=l.duration;continue}o.endTime+=l.duration}else" if("cueout"in="" l&&(o="new" a["default"].vttcue(i,i+l.duration,l.cueout),o.adstarttime="i,o.adEndTime=i+parseFloat(l.cueOut),t.addCue(o)),"cueOutCont"in" l){var="" d="void" 0,c="void" 0,f="l.cueOutCont.split("/").map(parseFloat),p=r(f,2);d=p[0],c=p[1],o=new" a["default"].vttcue(i,i+l.duration,""),o.adstarttime="i-d,o.adEndTime=o.adStartTime+c,t.addCue(o)}i+=l.duration}};n["default"]={updateAdCues:u,findAdCue:s},t.exports=n["default"]},{"global/window":24}],2:[function(e,t,n){"use" strict";object.defineproperty(n,"__esmodule",{value:!0});var="" e.start(t)+"-"+e.end(t)},r="function(e,t){var" ":"")},o="function(e){return" e="">=32&&e<126?string.fromcharcode(e):"."},a={hexdump:function(e){for(var t="Array.prototype.slice.call(e),n=16,i="",a=void" 0,s="void" 0,u="0;u<t.length/n;u++)a=t.slice(u*n,u*n+n).map(r).join(""),s=t.slice(u*n,u*n+n).map(o).join(""),i+=a+"" "+s+"\n";return="" i},tagdump:function(e){return="" a.hexdump(e.bytes)},textranges:function(e){var="" ,n="void" 0;for(n="0;n<e.length;n++)t+=i(e,n)+"" ";return="" t}};n["default"]="a,t.exports=n["default"]},{}],3:[function(e,t,n){"use" strict";object.defineproperty(n,"__esmodule",{value:!0}),n["default"]="{GOAL_BUFFER_LENGTH:30},t.exports=n["default"]},{}],4:[function(e,t,n){"use" strict";object.defineproperty(n,"__esmodule",{value:!0});var="" i="a" .charcodeat(0),r="function(e,t){var" n="[],i=t.split("-");return" i.map(function(t){n.push(e.getuint8(parseint(t)))}),n};n["default"]="function(e){var" 0;if(20="==e.byteLength){t=new" dataview(e,0);var="" f="t.getUint8(8),p=t.getUint8(9),h=t.getUint8(10),m=t.getUint8(11),y=t.getUint8(15),v=t.getUint8(16),g=t.getUint8(17),_=t.getUint8(18),b=f-i+26*(parseInt(String.fromCharCode(p),10)+1)-i,w=h-i+26*(parseInt(String.fromCharCode(m),10)+1)-i,x=y-i+26*(parseInt(String.fromCharCode(v),10)+1)-i,O=g-i+26*(parseInt(String.fromCharCode(_),10)+2)-i;t=new" dataview(new="" uint8array([t.getuint8(0),t.getuint8(1),t.getuint8(2),t.getuint8(3),t.getuint8(4),t.getuint8(5),t.getuint8(6),t.getuint8(7),b,w,t.getuint8(12),t.getuint8(13),t.getuint8(14),x,o,t.getuint8(19)]).buffer)}else="" if(1="==c){var" uint8array(r(t,"0-1-2-3-4-5-6-7-18-16-15-13-12-11-10-8"));t="new" dataview(t.buffer)}else{if(0!="=c)return;var" uint8array(r(t,"0-1-2-3-4-5-6-7-8-10-11-12-14-15-16-18"));t="new" dataview(t.buffer)}}else="" if(17="==e.byteLength){t=new" dataview(e,1);var="" uint8array(r(t,"8-9-2-3-4-5-6-7-0-1-10-11-12-13-14-15"));t="new" dataview(t.buffer)}else="" dataview(e);return="" t},t.exports="n["default"]},{}],5:[function(e,t,n){(function(i){"use" strict";function="" r(e){return="" e&&e.__esmodule?e:{"default":e}}function="" o(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="e("./ranges"),u=r(s),l="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,d="r(l),c=["seeking","seeked","pause","playing","error"],f=function(){function" e(t){var="" -="">")),this.logger_("initialize");var i=function(){return n.waiting_()},r=function(){return n.timeupdate_()},a=function(){return n.cancelTimer_()};this.tech_.on("waiting",i),this.tech_.on("timeupdate",r),this.tech_.on(c,a),this.dispose=function(){n.logger_("dispose"),n.tech_.off("waiting",i),n.tech_.off("timeupdate",r),n.tech_.off(c,a),n.cancelTimer_()}}return a(e,[{key:"waiting_",value:function(){this.tech_.seeking()||this.setTimer_()}},{key:"timeupdate_",value:function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime();5===this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=u["default"].findNextRange(t,n);this.consecutiveUpdates=0,this.timer_=null,0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+u["default"].TIME_FUDGE_FACTOR))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=u["default"].findGaps(e),i=0;i<n.length;i++){var r="n.start(i),o=n.end(i);if(t-r<4&&t-r">2)return{start:r,end:o}}return null}},{key:"setTimer_",value:function(){var e=this.tech_.buffered(),t=this.tech_.currentTime(),n=u["default"].findNextRange(e,t);if(null===this.timer_){if(0===n.length){var i=this.gapFromVideoUnderflow_(e,t);return void(i&&(this.logger_("setTimer_:","Encountered a gap in video","from: ",i.start,"to: ",i.end,"seeking to current time: ",t),this.tech_.setCurrentTime(t)))}var r=n.start(0)-t;this.logger_("setTimer_:","stopped at:",t,"setting timer for:",r,"seeking to:",n.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*r,t)}}},{key:"logger_",value:function(){}}]),e}();n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":10}],6:[function(e,t,n){"use strict";function i(e){return!!o[e]&&o[e]}function r(e,t){o[e]||(o[e]=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.getStoredKey=i,n.setStoredKey=r;var o={}},{}],7:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==u)return;return" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},u="e("./playlist-loader"),l=i(u),d=e("./segment-loader"),c=i(d),f=e("./ranges"),p=i(f),h="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" t?t.videojs:null,m="i(h),y=e("./ad-cue-tags"),v=i(y),g=3e5,_=void" 0,b="function(e,t){if(typeof" e!="typeof" t)return!0;if(object.keys(e).length!="=Object.keys(t).length)return!0;for(var" n="" in="" e)if(e[n]!="=t[n])return!0;return!1},w=function(e){var" t="{codecCount:0,videoCodec:null,videoObjectTypeIndicator:null,audioProfile:null},n=void" 0;return="" t.codeccount="e.split(",").length,t.codecCount=t.codecCount||2,n=/(^|\s|,)+(avc1)([^" ,]*)="" i.exec(e),n&&(t.videocodec="n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},x=function(e,t){var" ,i="{videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},r=[],o=void" 0,a="null;if(!t)return[];t.segments&&t.segments.length&&t.segments[0].map&&(n="mp4"),o=t.attributes||{},o.CODECS&&!function(){var" e="w(o.CODECS);Object.keys(e).forEach(function(t){i[t]=e[t]||i[t]})}(),e.mediaGroups.AUDIO&&(r=e.mediaGroups.AUDIO[o.AUDIO]);for(var" r){if(a&&!!r[s].uri!="!!a.uri)return["video/"+n+';" codecs="'+i.videoCodec+i.videoObjectTypeIndicator+" ,="" mp4a.40."+i.audioprofile+'"',"audio="" "+n+';="" '];a="r[s]}return" a&&a.uri?["video="" ',"audio="" ']:["video="" mp4a.40."+i.audioprofile+'"']};n.mimetypesforplaylist_="x;var" o="function(e){function" t(e){var="" new="" error("a="" non-empty="" playlist="" url="" is="" required");_="f,this.withCredentials=o,this.tech_=u,this.hls_=u.hls,this.mode_=a,this.useCueTags_=p,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="",this.tech_.textTracks().addTrack_(this.cueTagsTrack_)),this.audioTracks_=[],this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.audioGroups_={},this.mediaSource=new" m["default"].mediasource({mode:a}),this.audioinfo_="null,this.mediaSource.on("audioinfo",this.handleAudioinfoUpdate_.bind(this)),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));var" h="{hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return" n.seekable()},seeking:function(){return="" n.tech_.seeking()},setcurrenttime:function(e){return="" n.tech_.setcurrenttime(e)},hasplayed:function(){return="" l["default"](i,this.hls_,this.withcredentials),this.setupmasterplaylistloaderlisteners_(),this.audioplaylistloader_="null,this.mainSegmentLoader_=new" c["default"](h),this.audiosegmentloader_="new" c["default"](h),this.setupsegmentloaderlisteners_(),this.masterplaylistloader_.start()}return="" o(t,e),a(t,[{key:"setupmasterplaylistloaderlisteners_",value:function(){var="" m["default"].log.warn("failed="" to="" create="" sourcebuffers",i),e.mediasource.endofstream("decode")}e.setupfirstplay(),e.fillaudiotracks_(),e.setupaudio(),e.trigger("audioupdate"),e.trigger("selectedinitialmedia")}),this.masterplaylistloader_.on("loadedplaylist",function(){var="" t?(e.usecuetags_&&e.updateadcues_(t,e.masterplaylistloader_.expired_),e.mainsegmentloader_.playlist(t,e.requestoptions_),e.mainsegmentloader_.expired(e.masterplaylistloader_.expired_),e.updateduration(),n="e.seekable(),void(t.endList||0===n.length||e.mediaSource.addSeekableRange_(n.start(0),n.end(0)))):(e.initialMedia_=e.selectPlaylist(),void" e.masterplaylistloader_.media(e.initialmedia_))}),this.masterplaylistloader_.on("error",function(){e.blacklistcurrentplaylist(e.masterplaylistloader_.error)}),this.masterplaylistloader_.on("mediachanging",function(){e.mainsegmentloader_.abort(),e.mainsegmentloader_.pause(),e.tech_.trigger({type:"mediachanging",bubbles:!0})}),this.masterplaylistloader_.on("mediachange",function(){var="" 0,r="void" 0;e.masterplaylistloader_.islowestenabledrendition_()?e.requestoptions_.timeout="0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.expired(e.masterPlaylistLoader_.expired_),e.mainSegmentLoader_.clearBuffer(),e.mainSegmentLoader_.load(),i=e.activeAudioGroup(),r=i.filter(function(e){return" e.enabled})[0],r||(e.setupaudio(),e.trigger("audioupdate")),e.tech_.trigger({type:"mediachange",bubbles:!0})})}},{key:"setupsegmentloaderlisteners_",value:function(){var="" encountered="" with="" the="" current="" alternate="" audio="" track.="" switching="" back="" default."),e.audiosegmentloader_.abort(),e.audioplaylistloader_="null,e.setupAudio()})}},{key:"handleAudioinfoUpdate_",value:function(e){if(!m["default"].browser.IS_FIREFOX||!this.audioInfo_||!b(this.audioInfo_,e.info))return" void(this.audioinfo_="e.info);var" ,n="this.activeAudioGroup().map(function(e){return" e.enabled}).indexof(!0),i="this.activeAudioGroup()[n],r=this.activeAudioGroup().filter(function(e){return" e.properties_&&e.properties_["default"]})[0];this.audioplaylistloader_?(t="The audio track '" +i.label+"'="" that="" we="" tried="" "+("switch="" "+t+"="" unfortunately="" this="" means="" will="" have="" ")+("return="" you="" main="" track="" '"+r.label+"'.="" sorry!"),r.enabled="!0,this.activeAudioGroup().splice(n,1),this.trigger("audioupdate")):(t="The" rendition="" switch="" "+t+"unfortunately="" blacklist="" and="" another.="" sorry!",this.blacklistcurrentplaylist()),m["default"].log.warn(t),this.setupaudio()}},{key:"mediarequests_",value:function(){return="" this.audiosegmentloader_.mediarequests+this.mainsegmentloader_.mediarequests}},{key:"mediatransferduration_",value:function(){return="" this.audiosegmentloader_.mediatransferduration+this.mainsegmentloader_.mediatransferduration}},{key:"mediabytestransferred_",value:function(){return="" this.audiosegmentloader_.mediabytestransferred+this.mainsegmentloader_.mediabytestransferred}},{key:"fillaudiotracks_",value:function(){var="" t.audio){this.audiogroups_[n]||(this.audiogroups_[n]="[]);for(var" t.audio[n]){var="" m["default"].audiotrack({id:i,kind:r["default"]?"main":"alternative",enabled:!1,language:r.language,label:i});o.properties_="r,this.audioGroups_[n].push(o)}}(this.activeAudioGroup().filter(function(e){return" e.properties_["default"]})[0]||this.activeaudiogroup()[0]).enabled="!0}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()}},{key:"activeAudioGroup",value:function(){var" e.attributes&&e.attributes.audio&&(t="this.audioGroups_[e.attributes.AUDIO]),t||this.audioGroups_.main}},{key:"setupAudio",value:function(){var" e.enabled})[0];n||(n="t.filter(function(e){return" e.properties_["default"]})[0]||t[0],n.enabled="!0),this.audioPlaylistLoader_&&(this.audioPlaylistLoader_.dispose(),this.audioPlaylistLoader_=null),this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.clearBuffer(),n.properties_.resolvedUri&&(this.audioPlaylistLoader_=new" l["default"](n.properties_.resolveduri,this.hls_,this.withcredentials),this.audioplaylistloader_.start(),this.audioplaylistloader_.on("loadedmetadata",function(){var="" e.audioplaylistloader_&&(t="e.audioPlaylistLoader_.media()),t?void" e.audiosegmentloader_.playlist(t,e.requestoptions_):void="" e.audioplaylistloader_.media(e.audioplaylistloader_.playlists.master.playlists[0])}),this.audioplaylistloader_.on("error",function(){m["default"].log.warn("problem="" loading="" default."),e.audiosegmentloader_.abort(),e.setupaudio()}))}},{key:"fastqualitychange_",value:function(){var="" this.tech_.ended()&&this.tech_.setcurrenttime(0),this.load(),this.tech_.duration()="==1/0&&this.tech_.currentTime()<this.tech_.seekable().start(0)?this.tech_.setCurrentTime(this.tech_.seekable().start(0)):void" 0}},{key:"setupfirstplay",value:function(){var="" 0,t="this.masterPlaylistLoader_.media();return!(!t||t.endList||this.tech_.paused()||this.hasPlayed_)&&(this.masterPlaylistLoader_.trigger("firstplay"),this.hasPlayed_=!0,e=this.seekable(),e.length&&this.tech_.setCurrentTime(e.end(0)),this.load(),!0)}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return" source="" buffers",e),this.mediasource.endofstream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"blacklistcurrentplaylist",value:function(){var="" 0,n="void" 0;return(t="e.playlist||this.masterPlaylistLoader_.media())?(t.excludeUntil=Date.now()+g,(n=this.selectPlaylist())?(m["default"].log.warn("Problem" hls="" playlist.="" another="" playlist."),this.masterplaylistloader_.media(n)):(m["default"].log.warn("problem="" no="" suitable="" alternatives="" found."),this.error="e,this.mediaSource.endOfStream("network"))):(this.error=e,this.mediaSource.endOfStream("network"))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var" this.masterplaylistloader_&&this.masterplaylistloader_.media()&&this.masterplaylistloader_.media().segments?t&&t.length?e:(this.mainsegmentloader_.abort(),this.audioplaylistloader_&&this.audiosegmentloader_.abort(),void(this.tech_.paused()||(this.mainsegmentloader_.load(),this.audioplaylistloader_&&this.audiosegmentloader_.load()))):0}},{key:"duration",value:function(){return="" this.masterplaylistloader_?this.mediasource?this.mediasource.duration:_.playlist.duration(this.masterplaylistloader_.media()):0}},{key:"seekable",value:function(){var="" this.masterplaylistloader_&&(e="this.masterPlaylistLoader_.media())?(t=_.Playlist.seekable(e,this.masterPlaylistLoader_.expired_),0===t.length?t:this.audioPlaylistLoader_&&(n=_.Playlist.seekable(this.audioPlaylistLoader_.media(),this.audioPlaylistLoader_.expired_),0===n.length)?n:n?m["default"].createTimeRanges([[n.start(0)">t.start(0)?n.start(0):t.start(0),n.end(0)<t.end(0)?n.end(0):t.end(0)]]):t):m["default"].createtimeranges()}},{key:"updateduration",value:function(){var e="this,t=this.mediaSource.duration,n=_.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function" o(){e.mediasource.duration="n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",o)};i.length">0&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.audioSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e=this.masterPlaylistLoader_.media(),t=void 0;if(e&&"open"===this.mediaSource.readyState){if(t=x(this.masterPlaylistLoader_.master,e),t.length<1)return 0="==arguments[1]?0:arguments[1];v["default"].updateAdCues(e,this.cueTagsTrack_,t)}}]),t}(m["default"].EventTarget);n.MasterPlaylistController=O}).call(this,"undefined"!=typeof" this.error="No compatible SourceBuffer configuration for the variant stream:" +e.resolveduri,this.mediasource.endofstream("decode");this.mainsegmentloader_.mimetype(t[0]),t[1]&&this.audiosegmentloader_.mimetype(t[1]),this.excludeincompatiblevariants_(e)}}},{key:"excludeincompatiblevariants_",value:function(e){var="" t="this.masterPlaylistLoader_.master,n=2,i=null,r=null,o=void" 0;e.attributes&&e.attributes.codecs&&(o="w(e.attributes.CODECS),i=o.videoCodec,r=o.audioProfile,n=o.codecCount),t.playlists.forEach(function(e){var" o="e.attributes.CODECS;t=w(o),MediaSource.isTypeSupported('video/mp4;" codecs="'+o+'" ')||(e.excludeuntil="1/0)}t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==i&&(e.excludeUntil=1/0),("5"===t.audioProfile&&"5"!==r||"5"===r&&"5"!==t.audioProfile)&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" ad-cue-tags":1,".="" playlist-loader":8,".="" ranges":10,".="" segment-loader":13}],8:[function(e,t,n){(function(i){"use="" strict";function="" r(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,u="e("./stream"),l=r(u),d=e("m3u8-parser"),c=r(d),f=e("global/window"),p=r(f),h=function(e,t,n){var" i="t.slice(),r=void" 0,o="void" 0;for(n="n||0,r=Math.min(e.length,t.length+n),o=n;o<r;o++)i[o-n]=(0,s.mergeOptions)(e[o],i[o-n]);return" i},m="function(e,t){for(var" n="!1,i=(0,s.mergeOptions)(e,{}),r=e.playlists.length,o=void" 0,u="void" 0,l="void" 0;r--;)if(o="i.playlists[r],o.uri===t.uri){if(o.segments&&t.segments&&o.segments.length===t.segments.length&&o.mediaSequence===t.mediaSequence)continue;for(i.playlists[r]=(0,s.mergeOptions)(o,t),i.playlists[t.uri]=i.playlists[r],o.segments&&(i.playlists[r].segments=h(o.segments,t.segments,t.mediaSequence-o.mediaSequence)),l=0,i.playlists[r].segments&&(l=i.playlists[r].segments.length);l--;)u=i.playlists[r].segments[l],u.resolvedUri||(u.resolvedUri=(0,a["default"])(o.resolvedUri,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=(0,a["default"])(o.resolvedUri,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=(0,a["default"])(o.resolvedUri,u.map.uri));n=!0}return" n?i:null},y="function" v(e,t,n){var="" 0,s="void" 0,d="void" 0;if(v.prototype.constructor.call(this),this.hls_="t,this.trackExpiredTime_=!1,!e)throw" new="" error("a="" non-empty="" playlist="" url="" is="" required");l="function(e,t,n){r.setBandwidth(u||e),u=null,n&&(r.state=n),r.error={playlist:r.master.playlists[t],status:e.status,message:"HLS" request="" error="" at="" url:="" "+t,responsetext:e.responsetext,code:e.status="">=500?4:2},r.trigger("error")},d=function(e,t){var n=void 0,i=void 0,o=void 0;r.setBandwidth(u||e),u=null,r.state="HAVE_METADATA",n=new c["default"].Parser,n.push(e.responseText),n.end(),n.manifest.uri=t,o=m(r.master,n.manifest),i=1e3*(n.manifest.targetDuration||10),r.targetDuration=n.manifest.targetDuration,o?(r.master=o,r.updateMediaPlaylist_(n.manifest)):i/=2,r.media().endList||(p["default"].clearTimeout(s),s=p["default"].setTimeout(function(){r.trigger("mediaupdatetimeout")},i)),r.trigger("loadedplaylist")},r.state="HAVE_NOTHING",this.expired_=0,o=this.dispose,r.dispose=function(){r.stopRequest(),p["default"].clearTimeout(s),o.call(this)},r.stopRequest=function(){if(u){var e=u;u=null,e.onreadystatechange=null,e.abort()}},r.enabledPlaylists_=function(){return r.master.playlists.filter(function(e,t,n){return!e.excludeUntil||e.excludeUntil<=date.now()}).length},r.islowestenabledrendition_=function(){var e="r.media();if(!e||!e.attributes)return!1;var" t="r.media().attributes.BANDWIDTH||0;return!(r.master.playlists.filter(function(e,n,i){var" r="undefined" =="typeof" e.excludeuntil||e.excludeuntil<="Date.now();if(!r)return!1;var" o="e.attributes.BANDWIDTH;return" o<="t}).length">1)},r.media=function(e){var t=r.state,i=void 0;if(!e)return r.media_;if("HAVE_NOTHING"===r.state)throw new Error("Cannot switch media playlist from "+r.state);if("string"==typeof e){if(!r.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=r.master.playlists[e]}if(i=!r.media_||e.uri!==r.media_.uri,r.master.playlists[e.uri].endList)return u&&(u.onreadystatechange=null,u.abort(),u=null),r.state="HAVE_METADATA",r.media_=e,void(i&&(r.trigger("mediachanging"),r.trigger("mediachange",e)));if(i){if(r.state="SWITCHING_MEDIA",u){if((0,a["default"])(r.master.uri,e.uri)===u.url)return;u.onreadystatechange=null,u.abort(),u=null}this.media_&&this.trigger("mediachanging"),u=this.hls_.xhr({uri:(0,a["default"])(r.master.uri,e.uri),withCredentials:n},function(n,i){if(u){if(n)return l(u,e.uri,t);d(i,e.uri),"HAVE_MASTER"===t?r.trigger("loadedmetadata"):r.trigger("mediachange")}})}},r.setBandwidth=function(e){r.bandwidth=e.bandwidth},r.on("firstplay",function(){this.trackExpiredTime_=!0}),r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",u=this.hls_.xhr({uri:(0,a["default"])(r.master.uri,r.media().uri),withCredentials:n},function(e,t){if(u)return e?l(u,r.media().uri):void d(u,r.media().uri)}))}),r.pause=function(){r.stopRequest(),p["default"].clearTimeout(s)},r.load=function(){r.started?r.media().endList?r.trigger("loadedplaylist"):r.trigger("mediaupdatetimeout"):r.start()},r.start=function(){r.started=!0,u=i.hls_.xhr({uri:e,withCredentials:n},function(t,n){var i=void 0,o=void 0,s=void 0;if(u){if(u=null,t)return r.error={status:n.status,message:"HLS playlist request error at URL: "+e,responseText:n.responseText,code:2},r.trigger("error");if(i=new c["default"].Parser,i.push(n.responseText),i.end(),r.state="HAVE_MASTER",i.manifest.uri=e,!i.manifest.playlists)return r.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:p["default"].location.href,playlists:[{uri:e}]},r.master.playlists[e]=r.master.playlists[0],r.master.playlists[0].resolvedUri=e,d(n,e),r.trigger("loadedmetadata");for(r.master=i.manifest,s=r.master.playlists.length;s--;)o=r.master.playlists[s],r.master.playlists[o.uri]=o,o.resolvedUri=(0,a["default"])(r.master.uri,o.uri);for(var l in r.master.mediaGroups.AUDIO)for(var f in r.master.mediaGroups.AUDIO[l]){var h=r.master.mediaGroups.AUDIO[l][f];h.uri&&(h.resolvedUri=(0,a["default"])(r.master.uri,h.uri))}if(r.trigger("loadedplaylist"),!u)if(parseInt(localStorage.resolution)){var m=i.manifest.playlists.length-1-localStorage.resolution,y=i.manifest.playlists.length;m<0||m>=y?r.media(i.manifest.playlists[i.manifest.playlists.length-1]):r.media(i.manifest.playlists[m])}else r.media(i.manifest.playlists[i.manifest.playlists.length-1])}})}};y.prototype=new l["default"],y.prototype.updateMediaPlaylist_=function(e){var t=void 0,n=void 0,i=void 0;if(t=this.media_,this.media_=this.master.playlists[e.uri],t&&this.trackExpiredTime_&&e.uri===t.uri){if(e.segments.length){if("undefined"!=typeof e.segments[0].start)return void(this.expired_=e.segments[0].start);if("undefined"!=typeof e.segments[0].end)return void(this.expired_=e.segments[0].end-e.segments[0].duration)}for(n=e.mediaSequence-t.mediaSequence-1;n>=0;n--)if(i=t.segments[n]){if("undefined"!=typeof i.end)return void(this.expired_=i.end);if("undefined"!=typeof i.start)return void(this.expired_=i.start+i.duration);this.expired_+=i.duration}else this.expired_+=t.targetDuration||10}},n["default"]=y,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./resolve-url":12,"./stream":15,"global/window":24,"m3u8-parser":61}],9:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=e("global/window"),a=i(o),s={UNSAFE_LIVE_SEGMENTS:3},u=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=e.segments[i],"undefined"!=typeof r.end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!=typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},l=function(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(i=e.segments[r],"undefined"!=typeof i.start)return{result:i.start-n,precise:!0};if(n+="i.duration,"undefined"!=typeof" i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},d="function(e,t,n){var" i="void" 0,r="void" 0;return"undefined"="=typeof" t&&(t="e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=u(e,t),i.precise?i.result:(r=l(e,t),r.precise?r.result:i.result+n))},c=function(e,t,n){if(!e)return" 0;if("number"!="typeof" n&&(n="0),"undefined"==typeof" t){if(e.totalduration)return="" e.totalduration;if(!e.endlist)return="" a["default"].infinity}return="" d(e,t,n)};n.duration="c;var" f="function(e,t){var" n="void" 0,i="void" 0,o="void" 0;return"number"!="typeof" p="function(e,t,n){var" 0,l="void" 0,d="void" 0,c="void" 0;if(!e)return="" 0;if(t<0)return="" 0;if(0="==t&&!n)return" 0;for(n="n||0,i=0;i<a;i++)if(r=e.segments[i],r.end){if(r.end">t){c=r.end,l=i;break}d=r.end,u=i+1}if(u===a)return a;if("undefined"!=typeof u){for(t-=d,i=u;i<(l||a);i++)if(r=e.segments[i],t-=r.duration,t<0)return i;return="" i="">=l?u+Math.floor((o-d)/(c-d)*(l-u)):s}if("undefined"!=typeof l){for(t=c-t,i=l;i>=0;i--)if(r=e.segments[i],t-=r.duration,
t<0)return 0="==t?0:-1}if(t-=n,t<0)return-1;for(i=0;i<a;i++)if(r=e.segments[i],t-=r.duration,t<0)return" i;return="" s};n.getmediaindexfortime_="p,s.duration=c,s.seekable=f,s.getMediaIndexForTime_=p,n["default"]=s}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{"global="" window":24}],10:[function(e,t,n){(function(e){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" r="function(){function" e(e,t){var="" n="[],i=!0,r=!1,o=void" 0;try{for(var="" a,s="e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw" o}}return="" n}return="" function(t,n){if(array.isarray(t))return="" t;if(symbol.iterator="" in="" object(t))return="" e(t,n);throw="" new="" typeerror("invalid="" attempt="" to="" destructure="" non-iterable="" instance")}}(),o="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,a="i(o),s=1/30,u=function(e,t){var" math.min(math.max(i,e),o)},l="function(e,t){var" 0;if(e&&e.length)for(i="0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return" a["default"].createtimeranges(n)},d="function(e,t){return" l(e,function(e,n){return="" e-s<="t&&n+s">=t})},c=function(e,t){return l(e,function(e){return e-s>=t})},f=function(e){if(e.length<2)return a["default"].createtimeranges();for(var="" t="[],n=1;n<e.length;n++){var" i="e.end(n-1),r=e.start(n);t.push([i,r])}return" a["default"].createtimeranges(t)},p="function(e,t){var" n="void" 0,i="void" 0,r="void" 0,o="[],a=[],s=function(e){return" e[0]<="r&&e[1]">=r};if(e)for(n=0;n<e.length;n++)i=e.start(n),r=e.end(n),a.push([i,r]);if(t)for(n=0;n<t.length;n++)i=t.start(n),r=t.end(n),a.some(s)||o.push(r);return 0="==u)return;return" 1!="=o.length?null:o[0]},h=function(e,t){var" n="null,i=null,r=0,o=[],s=[];if(!(e&&e.length&&t&&t.length))return" a["default"].createtimerange();for(var="" u="e.length;u--;)o.push({time:e.start(u),type:"start"}),o.push({time:e.end(u),type:"end"});for(u=t.length;u--;)o.push({time:t.start(u),type:"start"}),o.push({time:t.end(u),type:"end"});for(o.sort(function(e,t){return" e.time-t.time}),u="0;u<o.length;u++)"start"===o[u].type?(r++,2===r&&(n=o[u].time)):"end"===o[u].type&&(r--,1===r&&(i=o[u].time)),null!==n&&null!==i&&(s.push([n,i]),n=null,i=null);return" a["default"].createtimeranges(s)},m="function(e,t,n,i){for(var" r="t.end(0)-t.start(0),o=e.end(0)-e.start(0),a=r-o,s=h(e,i),u=h(t,i),l=0,d=0,c=s.length;c--;)l+=s.end(c)-s.start(c),s.start(c)===n&&(l+=a);for(c=u.length;c--;)d+=u.end(c)-u.start(c);return" math.max(l,d)="" r*100},y="function(e,t,n,i){var" 0;var="" l="m(s,o,n,i);return" isnan(l)||l="==1/0||l===-(1/0)?0:l};n["default"]={findRange:d,findNextRange:c,findGaps:f,findSoleUncommonTimeRangesEnd:p,getSegmentBufferedPercent:y,TIME_FUDGE_FACTOR:s},t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],11:[function(e,t,n){"use="" strict";function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" i="undefined" =="typeof" e.excludeuntil||e.excludeuntil<="Date.now();return"undefined"==typeof" n?i:(n!="=i&&(n?delete" e.excludeuntil:e.excludeuntil="1/0,t()),n)},o=function" s(e,t,n){i(this,s);var="" o="e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(t.attributes){var" t="e.playlists;e.representations=function(){return" t.master.playlists.map(function(t,n){return="" o(e,t,n)})}};n["default"]="a,t.exports=n["default"]},{}],12:[function(e,t,n){"use" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" 0,u="void" 0;return="" n?s="n.href:a=i.appendChild(o["default"].createElement("base")),a.href=e,r.href=t,u=r.href,n?n.href=s:i.removeChild(a),u};n["default"]=a,t.exports=n["default"]},{"global/document":23}],13:[function(e,t,n){(function(i){"use" r(e){return="" e&&e.__esmodule?e:{"default":e}}function="" o(e,t){if(!(e="" function")}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function(e,t,n){for(var" 0!="=s){if("value"in" s)return="" s.value;var="" u.call(a)}var="" 0}},l="e("./ranges"),d=r(l),c=e("./playlist"),f="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,p="r(f),h=e("./source-updater"),m=r(h),y=e("aes-decrypter"),v=e("mux.js/lib/mp4/probe"),g=r(v),_=e("./config"),b=r(_),w=e("global/window"),x=r(w),O=e("./key"),T=e("./decrypt-key"),k=r(T),S=500,j=(x["default"].parseInt,function(e,t,n){if(!e)return!1;var" e.endlist&&"open"="==t.readyState&&(o||a)},E=function(e){var" 0,n="void" e&&(t.range="E(e.byterange)),t},A=function(e){var" t(e){o(this,t),u(object.getprototypeof(t.prototype),"constructor",this).call(this);var="" 0;if(!e)throw="" typeerror("initialization="" options="" are="" required");if("function"!="typeof" e.currenttime)throw="" typeerror("no="" currenttime="" getter="" specified");if(!e.mediasource)throw="" mediasource="" specified");n="p["default"].mergeOptions(p["default"].options.hls,e),this.state="INIT",this.bandwidth=n.bandwidth,this.roundTrip=NaN,this.resetStats_(),this.hasPlayed_=n.hasPlayed,this.currentTime_=n.currentTime,this.seekable_=n.seekable,this.seeking_=n.seeking,this.setCurrentTime_=n.setCurrentTime,this.mediaSource_=n.mediaSource,this.hls_=n.hls,this.checkBufferTimeout_=null,this.error_=void" 0,this.expired_="0,this.timeCorrection_=0,this.currentTimeline_=-1,this.zeroOffset_=NaN,this.xhr_=null,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={}}return" a(t,e),s(t,[{key:"resetstats_",value:function(){this.mediabytestransferred="0,this.mediaRequests=0,this.mediaTransferDuration=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state&&(this.abort_(),this.paused()||(this.state="READY",this.fillBuffer_()))}},{key:"error",value:function(e){return"undefined"!=typeof" e&&(this.error_="e),this.pendingSegment_=null,this.error_}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.mimeType_?this.init_():void(!this.sourceUpdater_||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY",this.fillBuffer_()))}},{key:"playlist",value:function(e){var" this.playlist_="e,this.xhrOptions_=t,this.mimeType_&&"INIT"===this.state&&!this.paused()?this.init_():void" 0}},{key:"pause",value:function(){this.checkbuffertimeout_&&(x["default"].cleartimeout(this.checkbuffertimeout_),this.checkbuffertimeout_="null)}},{key:"paused",value:function(){return" 0,o="void" 0,a="void" 0,s="void" 0;if(t.segments.length){if(0="==i.length)s=(0,c.getMediaIndexForTime_)(t,n+this.timeCorrection_,this.expired_);else{if(o=i.end(0),r=Math.max(0,o-n),!this.hasPlayed_()&&r">=1)return null;if(this.hasPlayed_()&&r>=b["default"].GOAL_BUFFER_LENGTH)return null;s=(0,c.getMediaIndexForTime_)(t,o+this.timeCorrection_,this.expired_)}return s<0||s===t.segments.length?null:(a=t.segments[s],{uri:a.resolveduri,mediaindex:s,playlist:t,bytes:null,encryptedbytes:null,buffered:null,timestampoffset:nan,timeline:a.timeline,duration:a.duration})}}},{key:"abort_",value:function(){this.xhr_&&this.xhr_.abort(),this.pendingsegment_=null}},{key:"init_",value:function(){return this.state="READY" ,this.sourceupdater_="new" m["default"](this.mediasource_,this.mimetype_),this.clearbuffer(),this.fillbuffer_()}},{key:"fillbuffer_",value:function(){if(!this.sourceupdater_.updating()){var="" e="this.checkBuffer_(this.sourceUpdater_.buffered(),this.playlist_,this.currentTime_());if(e&&(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())){var" t="this.playlist_.segments[e.mediaIndex],n=(0,c.duration)(this.playlist_,this.playlist_.mediaSequence+e.mediaIndex,this.expired_);e.timestampOffset=this.sourceUpdater_.timestampOffset(),(t.timeline!==this.currentTimeline_||n<this.sourceUpdater_.timestampOffset())&&(e.timestampOffset=n);var" i="d["default"].getSegmentBufferedPercent(n,t.duration,this.currentTime_(),this.sourceUpdater_.buffered());if(i">=90){var r=this.incrementTimeCorrection_(this.playlist_.targetDuration/2,1);return void(r&&!this.paused()&&this.fillBuffer_())}this.loadSegment_(e)}}}},{key:"trimBuffer_",value:function(e){var t=this.seekable_(),n=this.currentTime_(),i=0;i=t.length&&t.start(0)>0&&t.start(0)<n?t.start(0):n-60;for(var r="0;r<=e.playlist.segments.length;r++){var" o="(0,c.duration)(e.playlist,e.playlist.mediaSequence+r,this.expired_),a=(0,c.duration)(e.playlist,e.playlist.mediaSequence+(r-1),this.expired_);if(o">=i){i=a;break}}return i}},{key:"loadSegment_",value:function(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=0;if(o=this.trimBuffer_(e),o>0&&this.sourceUpdater_.remove(0,o),t=e.playlist.segments[e.mediaIndex],t.key){var a=(0,O.getStoredKey)(t.key.uri);if(a)t.key.bytes=a;else{var s=p["default"].mergeOptions(this.xhrOptions_,{uri:t.key.resolvedUri,responseType:"arraybuffer"});n=this.hls_.xhr(s,this.handleResponse_.bind(this))}}if(t.map&&!this.initSegments_[A(t.map)]){var u=p["default"].mergeOptions(this.xhrOptions_,{uri:t.map.resolvedUri,responseType:"arraybuffer",headers:P(t.map)});i=this.hls_.xhr(u,this.handleResponse_.bind(this))}this.pendingSegment_=e;var l=p["default"].mergeOptions(this.xhrOptions_,{uri:e.uri,responseType:"arraybuffer",headers:P(t)});r=this.hls_.xhr(l,this.handleResponse_.bind(this)),this.xhr_={keyXhr:n,initSegmentXhr:i,segmentXhr:r,abort:function(){this.segmentXhr&&(this.segmentXhr.onreadystatechange=null,this.segmentXhr.abort(),this.segmentXhr=null),this.initSegmentXhr&&(this.initSegmentXhr.onreadystatechange=null,this.initSegmentXhr.abort(),this.initSegmentXhr=null),this.keyXhr}},this.state="WAITING"}},{key:"handleResponse_",value:function(e,t){var n=void 0,i=void 0,r=void 0;if(this.xhr_&&(t===this.xhr_.segmentXhr||t===this.xhr_.keyXhr||t===this.xhr_.initSegmentXhr)){if(n=this.pendingSegment_,i=n.playlist.segments[n.mediaIndex],t.timedout)return this.abort_(),this.bandwidth=1,this.roundTrip=NaN,this.state="READY",this.trigger("progress");if(!t.aborted&&e)return r=this.xhr_.keyXhr,this.abort_(),this.error({status:t.status,message:t===r?"HLS key request error at URL: "+i.key.uri:"HLS segment request error at URL: "+n.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error");if(!t.response)return void this.abort_();if(t===this.xhr_.segmentXhr&&(this.xhr_.segmentXhr=null,this.roundTrip=t.roundTripTime,this.bandwidth=t.bandwidth,this.mediaBytesTransferred+=t.bytesReceived||0,this.mediaRequests+=1,this.mediaTransferDuration+=t.roundTripTime||0,i.key?n.encryptedBytes=new Uint8Array(t.response):n.bytes=new Uint8Array(t.response)),t===this.xhr_.keyXhr){if(r=this.xhr_.segmentXhr,this.xhr_.keyXhr=null,16!==t.response.byteLength&&17!==t.response.byteLength&&20!==t.response.byteLength)return this.abort_(),this.error({status:t.status,message:"Invalid HLS key at URL: "+i.key.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error");var o=(0,k["default"])(t.response);i.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),(0,O.setStoredKey)(i.key.uri,i.key.bytes),i.key.iv=i.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence])}t===this.xhr_.initSegmentXhr&&(this.xhr_.initSegmentXhr=null,i.map.bytes=new Uint8Array(t.response),this.initSegments_[A(i.map)]=i.map),this.xhr_.segmentXhr||this.xhr_.keyXhr||this.xhr_.initSegmentXhr||(this.xhr_=null,this.processResponse_())}}},{key:"clearBuffer",value:function(){this.sourceUpdater_&&this.sourceUpdater_.buffered().length&&this.sourceUpdater_.remove(0,1/0)}},{key:"processResponse_",value:function(){var e=void 0,t=void 0;if(this.state="DECRYPTING",e=this.pendingSegment_,t=e.playlist.segments[e.mediaIndex],t.map&&isNaN(this.zeroOffset_)){var n=g["default"].timescale(t.map.bytes),i=g["default"].startTime(n,e.bytes);this.zeroOffset_=i,e.timestampOffset-=i}t.key?new y.Decrypter(e.encryptedBytes,t.key.bytes,t.key.iv,function(t,n){e.bytes=n,this.handleSegment_()}.bind(this)):this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this,t=void 0,n=void 0;this.state="APPENDING",t=this.pendingSegment_;var i={bandwidth:this.bandwidth,loadingTime:this.mediaTransferDuration,size:t.bytes.byteLength,url:t.uri};this.mediaSource_.player_.tech_.hls.trigger("networkspeed",i),t.buffered=this.sourceUpdater_.buffered(),n=t.playlist.segments[t.mediaIndex],this.currentTimeline_=t.timeline,t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&this.sourceUpdater_.timestampOffset(t.timestampOffset),n.map&&!function(){var t=A(n.map);if(!e.activeInitSegmentId_||e.activeInitSegmentId_!==t){var i=e.initSegments_[t];e.sourceUpdater_.appendBuffer(i.bytes,function(){e.activeInitSegmentId_=t})}}(),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){var e=this.pendingSegment_,t=this.currentTime_();this.pendingSegment_=null;var n=this.updateTimeline_(e);this.trigger("progress");var i=e.mediaIndex;i+=e.playlist.mediaSequence-this.playlist_.mediaSequence;var r=d["default"].findRange(this.sourceUpdater_.buffered(),t),o=C(e.playlist,this.mediaSource_,i,r);o&&this.mediaSource_.endOfStream();var a=this.seekable_(),s=d["default"].findNextRange(this.sourceUpdater_.buffered(),t);if(this.seeking_()&&0===r.length&&a.length&&t<a.start(0)&&s.length&&(p["default"].log("tried seeking="" to",t,"but="" that="" was="" too="" early,="" retrying="" at",s.start(0)),this.setcurrenttime_(s.start(0)+d["default"].time_fudge_factor)),this.state="READY" ,n)return="" this.timecorrection_="0,void(this.paused()||this.fillBuffer_());var" u="this.incrementTimeCorrection_(e.duration,4);u&&!this.paused()&&this.fillBuffer_()}},{key:"updateTimeline_",value:function(e){var" t="void" 0,n="void" 0,i="!1,r=e.playlist,o=e.mediaIndex;return" o+="r.mediaSequence-this.playlist_.mediaSequence,t=r.segments[o],t&&e&&e.playlist.uri===this.playlist_.uri&&(n=d["default"].findSoleUncommonTimeRangesEnd(e.buffered,this.sourceUpdater_.buffered()),i=j(r,o,n)),i}},{key:"incrementTimeCorrection_",value:function(e,t){return">=this.playlist_.targetDuration*t?(this.timeCorrection_=0,!1):(this.timeCorrection_+=e,!0)}}]),t}(p["default"].EventTarget);n["default"]=M,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":3,"./decrypt-key":4,"./key":6,"./playlist":9,"./ranges":10,"./source-updater":14,"aes-decrypter":20,"global/window":24,"mux.js/lib/mp4/probe":79}],14:[function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),a="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,s="i(a),u=function(){function" e(t,n){var="" o="function(){i.sourceBuffer_=t.addSourceBuffer(n),i.onUpdateendCallback_=function(){var" e="i.pendingCallback_;i.pendingCallback_=null,e&&e(),i.runCallback_()},i.sourceBuffer_.addEventListener("updateend",i.onUpdateendCallback_),i.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,"closed"===t.readyState?t.addEventListener("sourceopen",o):o()}return" o(e,[{key:"abort",value:function(e){var="" t="this;this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var" n="this;this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return" this.sourcebuffer_?this.sourcebuffer_.buffered:s["default"].createtimeranges()}},{key:"duration",value:function(e){var="" e&&(this.queuecallback_(function(){t.sourcebuffer_.timestampoffset="e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var" 0;this.sourcebuffer_&&!this.sourcebuffer_.updating&&this.callbacks_.length&&(e="this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}();n["default"]=u,t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],15:[function(e,t,n){"use="" strict";function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" r="function(){function" e(e,t){for(var="" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="function(){function" e(){i(this,e),this.listeners="{}}return" r(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]="[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var" 0;return!!this.listeners[e]&&(n="this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),n">-1)}},{key:"trigger",value:function(e){var t=void 0,n=void 0,i=void 0,r=void 0;if(t=this.listeners[e])if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(r="Array.prototype.slice.call(arguments,1),i=t.length,n=0;n<i;++n)t[n].apply(this,r)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),e}();n["default"]=o,t.exports=n["default"]},{}],16:[function(e,t,n){(function(e){"use" strict";object.defineproperty(n,"__esmodule",{value:!0});var="" i="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,r="function(){var" e="function" t(e,n){if(e="(0,i.mergeOptions)({timeout:45e3},e),t.beforeRequest&&"function"==typeof" t.beforerequest){var="" r="t.beforeRequest(e);r&&(e=r)}var" o="(0,i.xhr)(e,function(e,t){!e&&o.response&&(o.responseTime=(new" date).gettime(),o.roundtriptime="o.responseTime-o.requestTime,o.bytesReceived=o.response.byteLength||o.response.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),e||o.timedout?o.timedout=o.timedout||"ETIMEDOUT"===e.code:o.timedout=!1,e||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new" error("xhr="" failed="" with="" a="" response="" of:="" "+(o&&(o.response||o.responsetext)))),n(e,o)});return="" o.requesttime="(new" date).gettime(),o};return="" e};n["default"]="r,t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],17:[function(e,t,n){"use="" strict";function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" class="" as="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" e(e,t){for(var="" n="0;n<t.length;n++){var" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="function(){var" 0,a="void" 0,s="void" 0,u="[],l=[],d=void" 0,c="void" 0,f="void" 0,p="void" 0,h="void" 0,m="void" 0;for(o="0;o<256;o++)l[(u[o]=o<<1^283*(o">>7))^o]=o;for(a=s=0;!i[a];a^=d||1,s=l[s]||1)for(p=s^s<<1^s<<2^s<<3^s<<4,p=p>>8^255&p^99,i[a]=p,r[p]=a,f=u[c=u[d=u[a]]],m=16843009*f^65537*c^257*d^16843008*a,h=257*u[p]^16843008*p,o=0;o<4;o++)t[o][a]=h=h<<24^h>>>8,n[o][p]=m=m<<24^m>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e},a="null,s=function(){function" e(t){i(this,e),a||(a="o()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var" n="void" 0,r="void" 0,s="void" 0,u="void" 0,l="void" 0,d="this._tables[0][4],c=this._tables[1],f=t.length,p=1;if(4!==f&&6!==f&&8!==f)throw" new="" error("invalid="" aes="" key="" size");for(u="t.slice(0),l=[],this._key=[u,l],n=f;n<4*f+28;n++)s=u[n-1],(n%f===0||8===f&&n%f===4)&&(s=d[s">>>24]<<24^d[s>>16&255]<<16^d[s>>8&255]<<8^d[255&s],n%f===0&&(s=s<<8^s>>>24^p<<24,p=p<<1^283*(p>>7))),u[n]=u[n-f]^s;for(r=0;n;r++,n--)s=u[3&r?n:n-4],n<=4||r<4?l[r]=s:l[r]=c[0][d[s>>>24]]^c[1][d[s>>16&255]]^c[2][d[s>>8&255]]^c[3][d[255&s]]}return r(e,[{key:"decrypt",value:function(e,t,n,i,r,o){var a=this._key[1],s=e^a[0],u=i^a[1],l=n^a[2],d=t^a[3],c=void 0,f=void 0,p=void 0,h=a.length/4-2,m=void 0,y=4,v=this._tables[1],g=v[0],_=v[1],b=v[2],w=v[3],x=v[4];for(m=0;m<h;m++)c=g[s>>>24]^_[u>>16&255]^b[l>>8&255]^w[255&d]^a[y],f=g[u>>>24]^_[l>>16&255]^b[d>>8&255]^w[255&s]^a[y+1],p=g[l>>>24]^_[d>>16&255]^b[s>>8&255]^w[255&u]^a[y+2],d=g[d>>>24]^_[s>>16&255]^b[u>>8&255]^w[255&l]^a[y+3],y+=4,s=c,u=f,l=p;for(m=0;m<4;m++)r[(3&-m)+o]=x[s>>>24]<<24^x[u>>16&255]<<16^x[l>>8&255]<<8^x[255&d]^a[y++],c=s,s=u,u=l,l=d,d=c}}]),e}();n["default"]=s,t.exports=n["default"]},{}],18:[function(e,t,n){"use 0="==u)return;return" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},u="e("./stream"),l=i(u),d=function(e){function" t(){r(this,t),s(object.getprototypeof(t.prototype),"constructor",this).call(this,l["default"]),this.jobs="[],this.delay=1,this.timeout_=null}return" o(t,e),a(t,[{key:"processjob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_="setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),t}(l["default"]);n["default"]=d,t.exports=n["default"]},{"./stream":21}],19:[function(e,t,n){"use" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" o="function(){function" n&&e(t.prototype,n),i&&e(t,i),t}}(),a="e("./aes"),s=i(a),u=e("./async-stream"),l=i(u),d=e("pkcs7"),c=function(e){return" e<<24|(65280&e)<<8|(16711680&e)="">>8|e>>>24},f=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new s["default"](Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),a=new Int32Array(o.buffer),u=void 0,l=void 0,d=void 0,f=void 0,p=void 0,h=void 0,m=void 0,y=void 0,v=void 0;for(u=n[0],l=n[1],d=n[2],f=n[3],v=0;v<i.length;v+=4)p=c(i[v]),h=c(i[v+1]),m=c(i[v+2]),y=c(i[v+3]),r.decrypt(p,h,m,y,a,v),a[v]=c(a[v]^u),a[v+1]=c(a[v+1]^l),a[v+2]=c(a[v+2]^d),a[v+3]=c(a[v+3]^f),u=p,l=h,d=m,f=y;return 0="==t?e.length-1:+t||0,0),function(){for(var" o};n.decrypt="f;var" p="function(){function" e(t,n,i,o){r(this,e);var="" a="e.STEP,s=new" int32array(t.buffer),u="new" uint8array(t.bytelength),f="0;for(this.asyncStream_=new" l["default"],this.asyncstream_.push(this.decryptchunk_(s.subarray(f,f+a),n,i,u)),f="a;f<s.length;f+=a)i=new" uint32array([c(s[f-4]),c(s[f-3]),c(s[f-2]),c(s[f-1])]),this.asyncstream_.push(this.decryptchunk_(s.subarray(f,f+a),n,i,u));this.asyncstream_.push(function(){o(null,(0,d.unpad)(u))})}return="" o(e,[{key:"decryptchunk_",value:function(e,t,n,i){return="" function(){var="" r="f(e,t,n);i.set(r,e.byteOffset)}}}],[{key:"STEP",get:function(){return" 32e3}}]),e}();n.decrypter="p,n["default"]={Decrypter:p,decrypt:f}},{"./aes":17,"./async-stream":18,pkcs7:84}],20:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" i="undefined" !="typeof" n?n:"undefined"!="typeof" window?window:{},r="e("min-document");if("undefined"!=typeof" document)t.exports="document;else{var" o="i["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=o}}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{"min-document":22}],24:[function(e,t,n){(function(e){"undefined"!="typeof" window?t.exports="window:"undefined"!=typeof" e?t.exports="e:"undefined"!=typeof" self?t.exports="self:t.exports={}}).call(this,"undefined"!=typeof" window?window:{})},{}],25:[function(e,t,n){function="" i(e,t){if("function"!="typeof" e)throw="" new="" typeerror(r);return="" t="o(void" n="arguments,i=-1,r=o(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];switch(t){case" 0:return="" e.call(this,a);case="" 1:return="" e.call(this,n[0],a);case="" 2:return="" e.call(this,n[0],n[1],a)}var="" s="Array(t+1);for(i=-1;++i<t;)s[i]=n[i];return" s[t]="a,e.apply(this,s)}}var" ,o="Math.max;t.exports=i},{}],26:[function(e,t,n){function" i(e,t){var="" t}t.exports="i},{}],27:[function(e,t,n){function" i(e,t){for(var="" e}t.exports="i},{}],28:[function(e,t,n){function" i(e,t,n){n||(n="{});for(var" n}t.exports="i},{}],29:[function(e,t,n){var" i(e,t){return="" r(e,t,o)}var="" i(e,t,n,f,p){if(!u(e))return="" e;var="" h="s(t)&&(a(t)||d(t)),m=h?void" 0:c(t);return="" r(m||t,function(r,a){if(m&&(a="r,r=t[a]),l(r))f||(f=[]),p||(p=[]),o(e,t,a,i,n,f,p);else{var" 0,d="void" in="" e)||!d&&(u="==u?u===s:s!==s)||(e[a]=u)}}),e}var" i(e,t,n,i,c,f,p){for(var="" void(e[n]="p[h]);var" y="e[n],v=c?c(y,m,n,e,t):void" 0,g="void" function(t){return="" null="=t?void" 0:r(t)[e]}}var="" i(e,t,n){if("function"!="typeof" e)return="" r;if(void="" e;switch(n){case="" function(n){return="" e.call(t,n)};case="" 3:return="" function(n,i,r){return="" e.call(t,n,i,r)};case="" 4:return="" function(n,i,r,o){return="" e.call(t,n,i,r,o)};case="" 5:return="" function(n,i,r,o,a){return="" e.call(t,n,i,r,o,a)}}return="" function(){return="" e.apply(t,arguments)}}var="" a(function(t,n){var="">2?n[a-2]:void 0,u=a>2?n[2]:void 0,l=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,l,5),
a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&o(n[0],n[1],u)&&(s=a<3?void 0:s,a="1);++i<a;){var" d="n[i];d&&e(t,d,s)}return" t})}var="" r="e("./bindCallback"),o=e("./isIterateeCall"),a=e("../function/restParam");t.exports=i},{"../function/restParam":25,"./bindCallback":34,"./isIterateeCall":42}],36:[function(e,t,n){function" i(e){return="" function(t,n,i){for(var="" o="r(t),a=i(t),s=a.length,u=e?s:-1;e?u--:++u<s;){var" l="a[u];if(n(o[l],l,o)===!1)break}return" t}}var="" i="e("./baseProperty"),r=i("length");t.exports=r},{"./baseProperty":33}],38:[function(e,t,n){function" i(e,t){var="" n="null==e?void" 0:e[t];return="" r(n)?n:void="" 0}var="" null!="e&&o(r(e))}var" function(){return!1}}return="" function(e){return"function"!="typeof" e.tostring&&"string"="=typeof(e+"")}}();t.exports=i},{}],41:[function(e,t,n){function" i(e,t){return="" e="number" =="typeof" e||r.test(e)?+e:-1,t="null==t?o:t,e">-1&&e%1==0&&e<t}var r="/^\d+$/,o=9007199254740991;t.exports=i},{}],42:[function(e,t,n){function" i(e,t,n){if(!a(n))return!1;var="" i="typeof" t;if("number"="=i?r(n)&&o(t,n.length):"string"==i&&t" in="" n){var="" s="n[t];return" e="==e?e===s:s!==s}return!1}var" i(e){return"number"="=typeof" e&&e="">-1&&e%1==0&&e<=r}var 0="==n||c.call(e,n))}var" r="9007199254740991;t.exports=i},{}],44:[function(e,t,n){function" i(e){return!!e&&"object"="=typeof" e}t.exports="i},{}],45:[function(e,t,n){function" i(e){for(var="" t="l(e),n=t.length,i=n&&e.length,d=!!i&&s(i)&&(o(e)||r(e)||u(e)),f=-1,p=[];++f<n;){var" h="t[f];(d&&a(h,i)||c.call(e,h))&&p.push(h)}return" p}var="" i(e){if(a.unindexedchars&&o(e)){for(var="" i}return="" r(e)?e:object(e)}var="" i(e){return="" o(e)&&r(e)&&s.call(e,"callee")&&!u.call(e,"callee")}var="" i="e("../internal/getNative"),r=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object" array]",s="Object.prototype,u=s.toString,l=i(Array,"isArray"),d=l||function(e){return" o(e)&&r(e.length)&&u.call(e)="=a};t.exports=d},{"../internal/getNative":38,"../internal/isLength":43,"../internal/isObjectLike":44}],49:[function(e,t,n){function" r(e)&&s.call(e)="=o}var" function]",a="Object.prototype,s=a.toString;t.exports=i},{"./isObject":51}],50:[function(e,t,n){function" null!="e&&(r(e)?c.test(l.call(e)):a(e)&&(o(e)?c:s).test(e))}var" .+?constructor\]$="" ,u="Object.prototype,l=Function.prototype.toString,d=u.hasOwnProperty,c=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()|" for="" .+?(?="\\\])/g,"$1.*?")+"$");t.exports=i},{"../internal/isHostObject":40,"../internal/isObjectLike":44,"./isFunction":49}],51:[function(e,t,n){function" i(e){var="" e;return!!e&&("object"="=t||"function"==t)}t.exports=i},{}],52:[function(e,t,n){function" t;if(!s(e)||f.call(e)!="l||a(e)||o(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof" t&&!(t="" instanceof="" t)))return!1;var="" n;return="" u.ownlast?(r(e,function(e,t,i){return="" n="c.call(i,t),!1}),n!==!1):(r(e,function(e,t){n=t}),void" object]",d="Object.prototype,c=d.hasOwnProperty,f=d.toString;t.exports=i},{"../internal/baseForIn":30,"../internal/isHostObject":40,"../internal/isObjectLike":44,"../support":59,"./isArguments":47}],53:[function(e,t,n){function" i(e){return"string"="=typeof" e||r(e)&&s.call(e)="=o}var" string]",a="Object.prototype,s=a.toString;t.exports=i},{"../internal/isObjectLike":44}],54:[function(e,t,n){function" o(e)&&r(e.length)&&!!e[a.call(e)]}var="" arguments]",s="[object Array]" ,l="[object Date]" ,d="[object Error]" ,c="[object Function]" ,f="[object Map]" ,p="[object Number]" ,h="[object Object]" ,m="[object RegExp]" ,y="[object Set]" ,v="[object String]" ,g="[object WeakMap]" ,_="[object ArrayBuffer]" ,b="[object Float32Array]" ,w="[object Float64Array]" ,x="[object Int8Array]" ,o="[object Int16Array]" ,t="[object Int32Array]" ,k="[object Uint8Array]" ,s="[object Uint8ClampedArray]" ,j="[object Uint16Array]" ,e="{};E[b]=E[w]=E[x]=E[O]=E[T]=E[k]=E[S]=E[j]=E[C]=!0,E[a]=E[s]=E[_]=E[u]=E[l]=E[d]=E[c]=E[f]=E[p]=E[h]=E[m]=E[y]=E[v]=E[g]=!1;var" p="Object.prototype,A=P.toString;t.exports=i},{"../internal/isLength":43,"../internal/isObjectLike":44}],55:[function(e,t,n){function" r(e,o(e))}var="" 0:e.constructor;return"function"="=typeof" t&&t.prototype="==e||("function"==typeof" e?s.enumprototypes:r(e))?a(e):o(e)?u(e):[]}:a;t.exports="l},{"../internal/getNative":38,"../internal/isArrayLike":39,"../internal/shimKeys":45,"../lang/isObject":51,"../support":59}],57:[function(e,t,n){function" i(e){if(null="=e)return[];d(e)||(e=Object(e));var">0,v=f.enumErrorProps&&(e===O||e instanceof Error),g=f.enumPrototypes&&s(e);++i<t;)h[i]=i+"";for(var 0="==u)return;return" b="" in="" e)g&&"prototype"="=b||v&&("message"==b||"name"==b)||m&&u(b,t)||"constructor"==b&&(p||!S.call(e,b))||h.push(b);if(f.nonEnumShadows&&e!==T){var" e="e===k?w:e===O?y:j.call(e),P=C[E]||C[_];for(E==_&&(r=T),t=x.length;t--;){b=x[t];var" a="P[b];p&&A||(A?!S.call(e,b):e[b]===r[b])||h.push(b)}}return" h}var="" r="e("../internal/arrayEach"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("../lang/isFunction"),u=e("../internal/isIndex"),l=e("../internal/isLength"),d=e("../lang/isObject"),c=e("../lang/isString"),f=e("../support"),p="[object" array]",h="[object Boolean]" ,m="[object Date]" ,y="[object Error]" ,v="[object Function]" ,g="[object Number]" ,_="[object Object]" ,b="[object RegExp]" ,w="[object String]" ,x="["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],O=Error.prototype,T=Object.prototype,k=String.prototype,S=T.hasOwnProperty,j=T.toString,C={};C[p]=C[m]=C[g]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},C[h]=C[w]={constructor:!0,toString:!0,valueOf:!0},C[y]=C[v]=C[b]={constructor:!0,toString:!0},C[_]={constructor:!0},r(x,function(e){for(var" t="" c)if(s.call(c,t)){var="" n="C[t];n[e]=S.call(n,e)}}),t.exports=i},{"../internal/arrayEach":27,"../internal/isIndex":41,"../internal/isLength":43,"../lang/isArguments":47,"../lang/isArray":48,"../lang/isFunction":49,"../lang/isObject":51,"../lang/isString":53,"../support":59}],58:[function(e,t,n){var" i="e("../internal/baseMerge"),r=e("../internal/createAssigner"),o=r(i);t.exports=o},{"../internal/baseMerge":31,"../internal/createAssigner":35}],59:[function(e,t,n){var" o="" new="" t)i.push(o);u.enumerrorprops="a.call(r,"message")||a.call(r,"name"),u.enumPrototypes=a.call(t,"prototype"),u.nonEnumShadows=!/valueOf/.test(i),u.ownLast="x"!=i[0],u.spliceObjects=(s.call(n,0,1),!n[0]),u.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),t.exports=u},{}],60:[function(e,t,n){function" i(e){return="" e}t.exports="i},{}],61:[function(e,t,n){"use" strict";function="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" typeerror("cannot="" call="" class="" as="" function")}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(e,t,n){for(var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},u="e("./stream"),l=i(u),d=function(e){function" t(){r(this,t),s(object.getprototypeof(t.prototype),"constructor",this).call(this),this.buffer="" }return="" o(t,e),a(t,[{key:"push",value:function(e){var="" 0;for(this.buffer+="e,t=this.buffer.indexOf("\n");t">-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),t}(l["default"]);n["default"]=d,t.exports=n["default"]},{"./stream":65}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==u)return;return" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},l="e("./stream"),d=i(l),c=function(){var" e="[^=]*" ,t=""[^"]*"|[^,]*" ,n="(?:" +e+")="(?:"+t+")";return" new="" regexp("(?:^|,)("+n+")")},f="function(e){for(var" t="e.split(c()),n=t.length,i={},r=void" 0;n--;)""!="=t[n]&&(r=/([^=]*)=(.*)/.exec(t[n]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),i[r[0]]=r[1]);return" i},p="function(e){function" t(){r(this,t),u(object.getprototypeof(t.prototype),"constructor",this).call(this)}return="" o(t,e),s(t,[{key:"push",value:function(e){var="" 0,n="void" 0;if(e="e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return" void="" this.trigger("data",{type:"uri",uri:e});if(0!="=e.indexOf("#EXT"))return" this.trigger("data",{type:"comment",text:e.slice(1)});if(e="e.replace("\r",""),t=/^#EXTM3U/.exec(e))return" this.trigger("data",{type:"tag",tagtype:"m3u"});if(t="/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return" n="{type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void" this.trigger("data",n);if(t="/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return" this.trigger("data",n)}if(t="/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=f(t[1]),n.attributes.RESOLUTION){var" this.trigger("data",n)}return(t="/^#EXT-X-MEDIA:?(.*)$/.exec(e))?(n={type:"tag",tagType:"media"},t[1]&&(n.attributes=f(t[1])),void" this.trigger("data",n)):(t="/^#EXT-X-ENDLIST/.exec(e))?void" this.trigger("data",{type:"tag",tagtype:"endlist"}):(t="/^#EXT-X-DISCONTINUITY/.exec(e))?void" this.trigger("data",{type:"tag",tagtype:"discontinuity"}):(t="/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new" date(t[1])),void="" uint32array(n.attributes.iv))),void="" this.trigger("data",n)):void="" this.trigger("data",{type:"tag",data:e.slice(4)})}}}]),t}(d["default"]);n["default"]="p,t.exports=n["default"]},{"./stream":65}],64:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(e,t,n){for(var" 0}},u="e("./stream"),l=i(u),d=e("./line-stream"),c=i(d),f=e("./parse-stream"),p=i(f),h=e("lodash-compat/object/merge"),m=i(h),y=function(e){function" t(){r(this,t),s(object.getprototypeof(t.prototype),"constructor",this).call(this),this.linestream="new" c["default"],this.parsestream="new" p["default"],this.linestream.pipe(this.parsestream);var="" 0,a="void" 0,u="function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(t){var" 0,s="void" 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowcache="t.allowed,"allowed"in" t||(this.trigger("info",{message:"defaulting="" allowcache="" to="" yes"}),this.manifest.allowcache="!0)},byterange:function" c(){var="" c="{};"length"in" t&&(i.byterange="c,c.length=t.length,"offset"in" offset="" zero"}),t.offset="0)),"offset"in" this.manifest||(this.manifest.mediasequence="0,this.trigger("info",{message:"defaulting" media="" sequence="" zero"})),"discontinuitysequence"in="" this.manifest||(this.manifest.discontinuitysequence="0,this.trigger("info",{message:"defaulting" discontinuity="" zero"})),t.duration="">0&&(i.duration=t.duration),0===t.duration&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){return t.attributes?"NONE"===t.attributes.METHOD?void(a=null):t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void("undefined"!=typeof t.attributes.IV&&(a.iv=t.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(t.number)?void(this.manifest.mediaSequence=t.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){return isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,void(d=t.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){return/VOD|EVENT/.test(t.playlistType)?void(this.manifest.playlistType=t.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){o={},t.uri&&(o.uri=t.uri),t.byterange&&(o.byterange=t.byterange)},"stream-inf":function(){return this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(i.attributes||(i.attributes={}),void(i.attributes=(0,m["default"])(i.attributes,t.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},r=e[t.attributes["GROUP-ID"]],s={"default":/yes/i.test(t.attributes.DEFAULT)},s["default"]?s.autoselect=!0:s.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(s.language=t.attributes.LANGUAGE),t.attributes.URI&&(s.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(s.instreamId=t.attributes["INSTREAM-ID"]),r[t.attributes.NAME]=s},discontinuity:function(){d+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject},targetduration:function(){return!isFinite(t.duration)||t.duration<0?void this.trigger("warn",{message:"ignoring="" invalid="" target="" duration:="" "+t.duration}):void(this.manifest.targetduration="t.duration)},totalduration:function(){return!isFinite(t.duration)||t.duration<0?void" total="" "+t.duration}):void(this.manifest.totalduration="t.duration)},"cue-out":function(){i.cueOut=t.data},"cue-out-cont":function(){i.cueOutCont=t.data},"cue-in":function(){i.cueIn=t.data}})[t.tagType]||u).call(e)},uri:function(){i.uri=t.uri,n.push(i),!this.manifest.targetDuration||"duration"in" i||(this.trigger("warn",{message:"defaulting="" segment="" duration="" to="" the="" duration"}),i.duration="this.manifest.targetDuration),a&&(i.key=a),i.timeline=d,o&&(i.map=o),i={}},comment:function(){}})[t.type].call(e)})}return" o(t,e),a(t,[{key:"push",value:function(e){this.linestream.push(e)}},{key:"end",value:function(){this.linestream.push("\n")}}]),t}(l["default"]);n["default"]="y,t.exports=n["default"]},{"./line-stream":62,"./parse-stream":63,"./stream":65,"lodash-compat/object/merge":58}],65:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],66:[function(e,t,n){"use" strict";var="" i,r="e("../utils/stream.js");i=function(){var" e="new" uint8array,t="0;i.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var" n="e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)">>4;return r?n+20:n+10},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},this.push="function(n){var" i,r,o,a,s="0,u=0;for(e.length?(a=e.length,e=new" uint8array(n.bytelength+a),e.set(e.subarray(0,a)),e.set(n,a)):e="n;e.length-u">=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(e[u]&!0&&240===(240&e[u+1])){if(e.length-u<7)break;if(s=this.parseadtssize(e,u),s>e.length)break;o={type:"audio",data:e.subarray(u,u+s),pts:t,dts:t},this.trigger("data",o),u+=s}else u++;else{if(e.length-u<10)break;if(s=this.parseid3tagsize(e,u),s>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+s)},this.trigger("data",r),u+=s}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array}},i.prototype=new r,t.exports=i},{"../utils/stream.js":82}],67:[function(e,t,n){"use strict";var i,r=e("../utils/stream.js"),o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=function(){var e;i.prototype.init.call(this),this.push=function(t){var n,i,r,a,s,u,l=0,d=0;if("audio"===t.type)for(e?(a=e,e=new Uint8Array(a.byteLength+t.data.byteLength),e.set(a),e.set(t.data,a.byteLength)):e=t.data;l+5<e.length;)if(255===e[l]&&240===(246&e[l+1])){if(i=2*(1&~e[l+1]),n=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,s=1024*((3&e[l+6])+1),u=9e4*s/o[(60&e[l+2])>>>2],r=l+n,e.byteLength<r)return;if(this.trigger("data",{pts:t.pts+d*u,dts:t.dts+d*u,samplecount:s,audioobjecttype:(e[l+2]>>>6&3)+1,channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:o[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+i,r)}),e.byteLength===r)return void(e=void 0);d++,e=e.subarray(r)}else l++},this.flush=function(){this.trigger("done")}},i.prototype=new r,t.exports=i},{"../utils/stream.js":82}],68:[function(e,t,n){"use strict";var i,r,o,a=e("../utils/stream.js"),s=e("../utils/exp-golomb.js");r=function(){var e,t,n=0;r.prototype.init.call(this),this.push=function(i){var r;for(t?(r=new Uint8Array(t.byteLength+i.data.byteLength),r.set(t),r.set(i.data,t.byteLength),t=r):t=i.data;n<t.bytelength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.bytelength;)switch(t[e]){case 0:if(0!="=t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do" e++;while(1!="=t[e]&&e<t.length);n=e-2,e+=3;break;case" 1:if(0!="=t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength">3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}},r.prototype=new a,o={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},i=function(){var e,t,n,a,u,l,d,c=new r;i.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,a=e.dts,c.push(e))},c.on("data",function(i){var r={trackId:t,pts:n,dts:a,data:i};switch(31&i[0]){case 5:r.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:r.nalUnitType="sei_rbsp",r.escapedRBSP=u(i.subarray(1));break;case 7:r.nalUnitType="seq_parameter_set_rbsp",r.escapedRBSP=u(i.subarray(1)),r.config=l(r.escapedRBSP);break;case 8:r.nalUnitType="pic_parameter_set_rbsp";break;case 9:r.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",r)}),c.on("done",function(){e.trigger("done")}),this.flush=function(){c.flush()},d=function(e,t){var n,i,r=8,o=8;for(n=0;n<e;n++)0!==o&&(i=t.readexpgolomb(),o=(r+i+256)%256),r=0===o?r:o},u=function(e){for(var 0="==r?0:this.length-(r+4)},this.startNalUnit=function(){if(r" t,n,i="e.byteLength,r=[],o=1;o<i-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return" e;t="i-r.length,n=new" uint8array(t);var="" a="0;for(o=0;o<t;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=e[a];return" n},l="function(e){var" t,n,i,r,a,u,l,c,f,p,h,m,y,v,g="0,_=0,b=0,w=0,x=1;if(t=new" s(e),n="t.readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),o[n]&&(a=t.readUnsignedExpGolomb(),3===a&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,v=0;v<h;v++)t.readBoolean()&&(v<6?d(16,t):d(64,t));if(t.skipUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===u)t.readUnsignedExpGolomb();else" if(1="==u)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),v=0;v<l;v++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),p=t.readBits(1),0===p&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb(),w=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(y=t.readUnsignedByte()){case" 1:m="[1,1];break;case" 2:m="[12,11];break;case" 3:m="[10,11];break;case" 4:m="[16,11];break;case" 5:m="[40,33];break;case" 6:m="[24,11];break;case" 7:m="[20,11];break;case" 8:m="[32,11];break;case" 9:m="[80,33];break;case" 10:m="[18,11];break;case" 11:m="[15,11];break;case" 12:m="[64,33];break;case" 13:m="[160,99];break;case" 14:m="[4,3];break;case" 15:m="[3,2];break;case" 16:m="[2,1];break;case" 255:m="[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}m&&(x=m[0]/m[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(c+1)-2*g-2*_)*x),height:(2-p)*(f+1)*16-2*b-2*w}}},i.prototype=new" a,t.exports="{H264Stream:i,NalByteStream:r}},{"../utils/exp-golomb.js":81,"../utils/stream.js":82}],69:[function(e,t,n){"use" strict";var="" i;i="function(e,t){var" n,r="0,o=16384,a=function(e,t){var" n,i="e.position+t;i<e.bytes.byteLength||(n=new" uint8array(2*i),n.set(e.bytes.subarray(0,e.position),0),e.bytes="n,e.view=new" dataview(e.bytes.buffer))},s="i.widthBytes||new" uint8array("width".length),u="i.heightBytes||new" uint8array("height".length),l="i.videocodecidBytes||new" uint8array("videocodecid".length);if(!i.widthbytes){for(n="0;n<"width".length;n++)s[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)u[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)l[n]="videocodecid".charCodeAt(n);i.widthBytes=s,i.heightBytes=u,i.videocodecidBytes=l}switch(this.keyFrame=!1,e){case" i.video_tag:this.length="16,o*=6;break;case" i.audio_tag:this.length="13,this.keyFrame=!0;break;case" i.metadata_tag:this.length="29,this.keyFrame=!0;break;default:throw" new="" error("unknown="" flv="" tag="" type")}this.bytes="new" uint8array(o),this.view="new" dataview(this.bytes.buffer),this.bytes[0]="e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var" i,r="t||0;n=n||e.byteLength,i=r+n,a(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return" this.bytes[this.length-e]},this.nalunitsize="function(){return">0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(s,this.position),this.position+=5;else if("height"===e)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charcodeat(n),this.position++;this.position++,this.view.setfloat64(this.position,t),this.position+=8,this.length=math.max(this.length,this.position),++r},this.writemetadataboolean=function(e,t){var n;for(a(this,2),this.view.setuint16(this.position,e.length),this.position+="2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var" e,n;switch(this.bytes[0]){case="" i.video_tag:this.bytes[11]="7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)">>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case i.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;
break;case i.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=i.frameTime(this.bytes),this}},i.AUDIO_TAG=8,i.VIDEO_TAG=9,i.METADATA_TAG=18,i.isAudioFrame=function(e){return i.AUDIO_TAG===e[0]},i.isVideoFrame=function(e){return i.VIDEO_TAG===e[0]},i.isMetaData=function(e){return i.METADATA_TAG===e[0]},i.isKeyFrame=function(e){return i.isVideoFrame(e)?23===e[11]:!!i.isAudioFrame(e)||!!i.isMetaData(e)},i.frameTime=function(e){var t=e[4]<<16;return 0="==e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof" t|="e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=i},{}],70:[function(e,t,n){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer")}},{"./flv-tag":69,"./transmuxer":71}],71:[function(e,t,n){"use" strict";var="" i,r,o,a,s,u,l,d="e("../utils/stream.js"),c=e("./flv-tag.js"),f=e("../m2ts/m2ts.js"),p=e("../codecs/adts.js"),h=e("../codecs/h264").H264Stream;s=function(e,t){"number"==typeof" t.pts&&(void="" t.dts&&(void="" n="new" c(c.metadata_tag);return="" n.dts="t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},l=function(e,t){var" n,i="new" c(c.video_tag,(!0));for(i.dts="t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return" i},o="function(e){var" t,n="[];o.prototype.init.call(this),this.push=function(t){s(e,t),e&&void" i,r,o,a="[];if(0===n.length)return" void="" this.trigger("done");for(o="-(1/0);n.length;)i=n.shift(),(e.extraData!==t||i.pts-o">=1e3)&&(r=new c(c.METADATA_TAG),r.pts=i.pts,r.dts=i.dts,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===e.channelcount),r.writeMetaDataDouble("audiosamplerate",e.samplerate),r.writeMetaDataDouble("audiosamplesize",16),a.push(r),t=e.extraData,r=new c(c.AUDIO_TAG,(!0)),r.pts=i.pts,r.dts=i.dts,r.view.setUint16(r.position,e.extraData),r.position+=2,r.length=Math.max(r.length,r.position),a.push(r),o=i.pts),r=new c(c.AUDIO_TAG),r.pts=i.pts,r.dts=i.dts,r.writeBytes(i.data),a.push(r);t=null,this.trigger("data",{track:e,tags:a}),this.trigger("done")}},o.prototype=new d,r=function(e){var t,n,i=[];r.prototype.init.call(this),this.finishFrame=function(n,i){i&&(t&&e&&e.newMetadata&&(i.keyFrame||0===n.length)&&(n.push(u(t,i.pts)),n.push(l(e,i.pts)),e.newMetadata=!1),i.endNalUnit(),n.push(i))},this.push=function(t){s(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),i.push(t)},this.flush=function(){for(var r,o=[];i.length&&"access_unit_delimiter_rbsp"!==i[0].nalUnitType;)i.shift();if(0===i.length)return void this.trigger("done");for(;i.length;)r=i.shift(),"seq_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,t=r.config,e.width=t.width,e.height=t.height,e.sps=[r.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,e.pps=[r.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===r.nalUnitType?(n&&this.finishFrame(o,n),n=new c(c.VIDEO_TAG),n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(r.data);n&&this.finishFrame(o,n),this.trigger("data",{track:e,tags:o}),this.trigger("done")}},r.prototype=new d,a=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,a.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}},a.prototype=new d,a.prototype.flush=function(){var e,t,n,i,r={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberoftracks)){for(this.videotrack?i=this.videotrack.timelinestartinfo.pts:this.audiotrack&&(i=this.audiotrack.timelinestartinfo.pts),r.tags.videotags=this.videotags,r.tags.audiotags=this.audiotags,n=0;n<this.pendingcaptions.length;n++)t=this.pendingcaptions[n],t.starttime=t.startpts-i,t.starttime 0="==t||t,n=void" =9e4,t.endtime="t.endPts-i,t.endTime/=9e4,r.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)e=this.pendingMetadata[n],e.cueTime=e.pts-i,e.cueTime/=9e4,r.metadata.push(e);r.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",r),this.trigger("done")}},i=function(e){var" t,n,s,u,l,d,m,y,v,g,_,b,w="this;i.prototype.init.call(this),e=e||{},this.metadataStream=new" f.metadatastream,e.metadatastream="this.metadataStream,t=new" f.transportpacketstream,n="new" f.transportparsestream,s="new" f.elementarystream,u="new" f.timestamprolloverstream("video"),l="new" f.timestamprolloverstream("audio"),d="new" f.timestamprolloverstream("timed-metadata"),m="new" p,y="new" h,b="new" a(e),t.pipe(n).pipe(s),s.pipe(u).pipe(y),s.pipe(l).pipe(m),s.pipe(d).pipe(this.metadatastream).pipe(b),_="new" f.captionstream,y.pipe(_).pipe(b),s.on("data",function(e){var="" t,n,i;if("metadata"="==e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!v&&(b.numberOfTracks++,v=new" r(n),y.pipe(v).pipe(b)),i&&!g&&(b.numberoftracks++,g="new" o(i),m.pipe(g).pipe(b))}}),this.push="function(e){t.push(e)},this.flush=function(){t.flush()},b.on("data",function(e){w.trigger("data",e)}),b.on("done",function(){w.trigger("done")}),this.getFlvHeader=function(e,t,n){var" i,r,o,a="new" uint8array(9),s="new" dataview(a.buffer);return="" e="e||0,t=void" uint8array(a.bytelength+4),r.set(a),r.set([0,0,0,0],a.bytelength),r):(i="new" c(c.metadata_tag),i.pts="i.dts=0,i.writeMetaDataDouble("duration",e),o=i.finalize().length,r=new" uint8array(a.bytelength+o),r.set(a),r.set(s.bytelength,o),r)}},i.prototype="new" d,t.exports="i},{"../codecs/adts.js":67,"../codecs/h264":68,"../m2ts/m2ts.js":73,"../utils/stream.js":82,"./flv-tag.js":69}],72:[function(e,t,n){"use" strict";var="" i="4,r=128,o=e("../utils/stream"),a=function(e){for(var" t="0,n={payloadType:-1,payloadSize:0},o=0,a=0;t<e.byteLength&&e[t]!==r;){for(;255===e[t];)o+=255,t++;for(o+=e[t++];255===e[t];)a+=255,t++;if(a+=e[t++],!n.payload&&o===i){n.payloadType=o,n.payloadSize=a,n.payload=e.subarray(t,t+a);break}t+=a,o=0,a=0}return" n},s="function(e){return" 181!="=e.payload[0]?null:49!==(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},u=function(e,t){var" n,i,r,o,a="[];if(!(64&t[0]))return" a;for(i="31&t[0],n=0;n<i;n++)r=3*n,o={type:3&t[r+2],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],a.push(o));return" a},l="function(){l.prototype.init.call(this),this.captionPackets_=[],this.field1_=new" t,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};l.prototype="new" o,l.prototype.push="function(e){var" t,n;"sei_rbsp"="==e.nalUnitType&&(t=a(e.escapedRBSP),t.payloadType===i&&(n=s(t),n&&(this.captionPackets_=this.captionPackets_.concat(u(e.pts,n)))))},l.prototype.flush=function(){return" this.captionpackets_.length?(this.captionpackets_.foreach(function(e,t){e.presortindex="t}),this.captionPackets_.sort(function(e,t){return" e.pts="==t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void" this.field1_.flush()):void="" this.field1_.flush()};var="" d="{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},c=function(e){return" null="==e?"":(e=d[e]||e,String.fromCharCode(e))},f=0,p=5152,h=5167,m=5157,y=5158,v=5159,g=5165,_=5153,b=5164,w=5166,x=14,O=function(){for(var" e},t="function(){T.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=O(),this.nonDisplayed_=O(),this.lastControlCode_=null,this.push=function(e){if(0===e.type){var" t,n,i,r;if(t="32639&e.ccData,t===this.lastControlCode_)return" void(this.lastcontrolcode_="null);switch(4096===(61440&t)?this.lastControlCode_=t:this.lastControlCode_=null,t){case" f:break;case="" p:this.mode_="popOn" ;break;case="" h:this.flushdisplayed(e.pts),n="this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;break;case" m:this.toprow_="x-1,this.mode_="rollUp";break;case" y:this.toprow_="x-2,this.mode_="rollUp";break;case" v:this.toprow_="x-3,this.mode_="rollUp";break;case" g:this.flushdisplayed(e.pts),this.shiftrowsup_(),this.startpts_="e.pts;break;case" _:"popon"="==this.mode_?this.nonDisplayed_[x]=this.nonDisplayed_[x].slice(0,-1):this.displayed_[x]=this.displayed_[x].slice(0,-1);break;case" b:this.flushdisplayed(e.pts),this.displayed_="O();break;case" w:this.nondisplayed_="O();break;default:if(i=t">>>8,r=255&t,i>=16&&i<=23&&r>=64&&r<=127&&(16!==i||r<96)&&(i=32,r=null),(17===i||25===i)&&r>=48&&r<=63&&(i=9834,r=""),16===(240&i))return;this[this.mode_](e.pts,i,r)}}}};t.prototype=new o,t.prototype.flushdisplayed="function(e){var" t="this.displayed_.map(function(e){return" e.trim()}).filter(function(e){return="" e.length}).join("\n");t.length&&this.trigger("data",{startpts:this.startpts_,endpts:e,text:t})},t.prototype.popon="function(e,t,n){var" i="this.nonDisplayed_[x];i+=c(t),i+=c(n),this.nonDisplayed_[x]=i},T.prototype.rollUp=function(e,t,n){var" e;for(e="0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<x;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[x]=""},t.exports={CaptionStream:l,Cea608Stream:T}},{"../utils/stream":82}],73:[function(e,t,n){"use" strict";var="" i,r,o,a="e("../utils/stream.js"),s=e("./caption-stream"),u=e("./stream-types"),l=e("./timestamp-rollover-stream").TimestampRolloverStream,d=e("./stream-types.js"),c=188,f=71;i=function(){var" e="new" uint8array(c),t="0;i.prototype.init.call(this),this.push=function(n){var" i,r="0,o=c;for(t?(i=new" uint8array(n.bytelength+t),i.set(e.subarray(0,t)),i.set(n,t),t="0):i=n;o<i.byteLength;)i[r]!==f||i[o]!==f?(r++,o++):(this.trigger("data",i.subarray(r,o)),r+=c,o+=c);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===c&&e[0]===f&&(this.trigger("data",e),t=0),this.trigger("done")}},i.prototype=new" a,r="function(){var" e,t,n,i;r.prototype.init.call(this),i="this,this.packetsWaitingForPmt=[],this.programMapTable=void" 0,e="function(e,i){var" r="0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var" n,r,o,a;if(1&e[5]){for(i.programmaptable="{},n=(15&e[1])<<8|e[2],r=3+n-4,o=(15&e[10])<<8|e[11],a=12+o;a<r;)i.programMapTable[(31&e[a+1])<<8|e[a+2]]=e[a],a+=((15&e[a+3])<<8|e[a+4])+5;for(t.programMapTable=i.programMapTable;i.packetsWaitingForPmt.length;)i.processPes_.apply(i,i.packetsWaitingForPmt.shift())}},this.push=function(t){var" n="{},i=4;n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])">>>4>1&&(i+=t[i]+1),0===n.pid?(n.type="pat",e(t.subarray(i),n),this.trigger("data",n)):n.pid===this.pmtPid?(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.streamType=this.programMapTable[n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},r.prototype=new a,r.STREAM_TYPES={h264:27,adts:15},o=function(){var e=this,t={data:[],size:0},n={data:[],size:0},i={data:[],size:0},r=function(e,t){var n;t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},a=function(t,n){var i,o=new Uint8Array(t.size),a={type:n},s=0;if(t.data.length){for(a.trackId=t.data[0].pid;t.data.length;)i=t.data.shift(),o.set(i.data,s),s+=i.data.byteLength;r(o,a),t.size=0,e.trigger("data",a)}};o.prototype.init.call(this),this.push=function(r){({pat:function(){},pes:function(){var e,o;switch(r.streamType){case u.H264_STREAM_TYPE:case d.H264_STREAM_TYPE:e=t,o="video";break;case u.ADTS_STREAM_TYPE:e=n,o="audio";break;case u.METADATA_STREAM_TYPE:e=i,o="timed-metadata";break;default:return}r.payloadUnitStartIndicator&&a(e,o),e.data.push(r),e.size+=r.data.byteLength},pmt:function(){var t,n,i={type:"metadata",tracks:[]},o=r.programMapTable;for(t in o)o.hasOwnProperty(t)&&(n={timelineStartInfo:{baseMediaDecodeTime:0}},n.id=+t,o[t]===d.H264_STREAM_TYPE?(n.codec="avc",n.type="video"):o[t]===d.ADTS_STREAM_TYPE&&(n.codec="adts",n.type="audio"),i.tracks.push(n));e.trigger("data",i)}})[r.type]()},this.flush=function(){a(t,"video"),a(n,"audio"),a(i,"timed-metadata"),this.trigger("done")}},o.prototype=new a;var p={PAT_PID:0,MP2T_PACKET_LENGTH:c,TransportPacketStream:i,TransportParseStream:r,ElementaryStream:o,TimestampRolloverStream:l,CaptionStream:s.CaptionStream,Cea608Stream:s.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var h in u)u.hasOwnProperty(h)&&(p[h]=u[h]);t.exports=p},{"../utils/stream.js":82,"./caption-stream":72,"./metadata-stream":74,"./stream-types":75,"./stream-types.js":75,"./timestamp-rollover-stream":76}],74:[function(e,t,n){"use strict";var i,r=e("../utils/stream"),o=e("./stream-types"),a=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].tostring(16)).slice(-2);return r},s="function(e,t,n){return" decodeuricomponent(a(e,t,n))},u="function(e,t,n){return" unescape(a(e,t,n))},l="function(e){return" e[0]<<21|e[1]<<14|e[2]<<7|e[3]},d="{TXXX:function(e){var" t;if(3="==e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.value=s(e.data,t+1,e.data.length-1);break}e.data=e.value}},WXXX:function(e){var" t;for(t="0;t<e.data.length;t++)if(0===e.data[t]){e.owner=u(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};i=function(e){var" t,n="{debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,a=[],s=0;if(i.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var" t,i,o,u,c,f;if("timed-metadata"="==e.type){if(e.dataAlignmentIndicator&&(s=0,a.length=0),0===a.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return" void="" n.debug;if(a.push(e),s+="e.data.byteLength,1===a.length&&(r=l(e.data.subarray(6,10)),r+=10),!(s<r)){for(t={data:new" uint8array(r),frames:[],pts:a[0].pts,dts:a[0].dts},c="0;c<r;)t.data.set(a[0].data.subarray(0,r-c),c),c+=a[0].data.byteLength,s-=a[0].data.byteLength,a.shift();i=10,64&t.data[5]&&(i+=4,i+=l(t.data.subarray(10,14)),r-=l(t.data.subarray(16,20)));do{if(o=l(t.data.subarray(i+4,i+8)),o<1)return;if(f=String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),u={id:f,data:t.data.subarray(i+10,i+o+10)},u.key=u.id,d[u.id]&&(d[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var" p="u.data,h=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]">>>2;h*=4,h+=3&p[7],u.timeStamp=h,void 0===t.pts&&void 0===t.dts&&(t.pts=u.timeStamp,t.dts=u.timeStamp),this.trigger("timestamp",u)}t.frames.push(u),i+=10,i+=o}while(i<r);this.trigger("data",t)}}}},i.prototype=new r,t.exports="i},{"../utils/stream":82,"./stream-types":75}],75:[function(e,t,n){"use" strict";t.exports="{H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],76:[function(e,t,n){"use" strict";var="" i="e("../utils/stream"),r=8589934592,o=4294967296,a=function(e,t){var" n="1;for(e">t&&(n=-1);Math.abs(t-e)>o;)e+=n*r;return e},s=function(e){var t,n;s.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=a(e.dts,n),e.pts=a(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")}};s.prototype=new i,t.exports={TimestampRolloverStream:s,handleRollover:a}},{"../utils/stream":82}],77:[function(e,t,n){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":78,"./transmuxer":80}],78:[function(e,t,n){"use strict";var i,r,o,a,s,u,l,d,c,f,p,h,m,y,v,g,_,b,w,x,O,T,k,S,j,C,E,P,A,M,L,I,D,B,U,R,N=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),j=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:E,audio:P},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),B=D,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=D,M=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(e){var t,n,i,r=[],o=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)o+=r[t].bytelength;for(n=new uint8array(o+8),i="new" dataview(n.buffer,n.byteoffset,n.bytelength),i.setuint32(0,n.bytelength),n.set(e,4),t="0,o=8;t<r.length;t++)n.set(r[t],o),o+=r[t].byteLength;return" n},r="function(){return" i(k.dinf,i(k.dref,i))},o="function(e){return" i(k.esds,new="" uint8array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex="">>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return i(k.ftyp,s,j,s,c)},g="function(e){return" i(k.hdlr,a[e])},s="function(e){return" i(k.mdat,e)},v="function(e){var" t="new" uint8array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration="">>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(k.mdhd,t)},y=function(e){return i(k.mdia,v(e),g(e.type),l(e))},u=function(e){return i(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return i(k.minf,"video"===e.type?i(k.vmhd,M):i(k.smhd,L),r(),b(e))},d=function(e,t){for(var n=[],r=t.length;r--;)n[r]=x(t[r]);return i.apply(null,[k.moof,u(e)].concat(n))},c=function(e){for(var t=e.length,n=[];t--;)n[t]=h(e[t]);return i.apply(null,[k.moov,p(4294967295)].concat(n).concat(f(e)))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=O(e[t]);return i.apply(null,[k.mvex].concat(n))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(k.mvhd,t)},_=function(e){var t,n,r=e.samples||[],o=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,o[n+4]=t.dependson<<4|t.isdependedon<<2|t.hasredundancy;return i(k.sdtp,o)},b="function(e){return" i(k.stbl,w(e),i(k.stts,r),i(k.stsc,b),i(k.stsz,u),i(k.stco,d))},function(){var="" e,t;w="function(n){return" i(k.stsd,new="" uint8array([0,0,0,0,0,0,0,1]),"video"="==n.type?e(n):t(n))},e=function(e){var" t,n="e.sps||[],r=e.pps||[],o=[],a=[];for(t=0;t<n.length;t++)o.push((65280&n[t].byteLength)">>>8),o.push(255&n[t].byteLength),o=o.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)a.push((65280&r[t].bytelength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));return i(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(o).concat([r.length]).concat(a))),i(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return i(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),o(e))}}(),m=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(k.tkhd,t)},x=function(e){var t,n,r,o,a,s,u;return t=i(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(N+1)),u=Math.floor(e.baseMediaDecodeTime%(N+1)),n=i(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),a=92,"audio"===e.type?(r=T(e,a),i(k.traf,t,n,r)):(o=_(e),r=T(e,o.length+a),i(k.traf,t,n,r,o))},h=function(e){return e.duration=e.duration||4294967295,i(k.trak,m(e),y(e))},O=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(k.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,o,a,s;for(o=e.samples||[],t+=20+16*o.length,r=n(o,t),s=0;s<o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependson,a.flags.isdependedon<<6|a.flags.hasredundancy<<4|a.flags.paddingvalue<<1|a.flags.isnonsyncsample,61440&a.flags.degradationpriority,15&a.flags.degradationpriority,(4278190080&a.compositiontimeoffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return i(k.trun,new Uint8Array(r))},e=function(e,t){var r,o,a,s;for(o=e.samples||[],t+=20+8*o.length,r=n(o,t),s=0;s<o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return i(k.trun,new Uint8Array(r))},T=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}(),t.exports={ftyp:a,mdat:s,moof:d,moov:c,initSegment:function(e){var t,n=a(),i=c(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}}},{}],79:[function(e,t,n){"use strict";var i,r,o,a;i=function(e,t){var n,o,a,s,u,l=[];if(!t.length)return null;for(n=0;n<e.bytelength;)o=e[n]<<24,o|=e[n+1]<<16,o|=e[n+2]<<8,o|=e[n+3],a=r(e.subarray(n+4,n+8)),s=o>1?n+o:e.byteLength,a===t[0]&&(1===t.length?l.push(e.subarray(n+8,s)):(u=i(e.subarray(n+8,s),t.slice(1)),u.length&&(l=l.concat(u)))),n=s;return l},r=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},o=function(e){var t={},n=i(e,["moov","trak"]);return n.reduce(function(e,t){var n,r,o,a,s;return(n=i(t,["tkhd"])[0])?(r=n[0],o=0===r?12:20,a=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3],(s=i(t,["mdia","mdhd"])[0])?(r=s[0],o=0===r?12:20,e[a]=s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3],e):null):null},t)},a=function(e,t){var 0="==t.length?void" n,r,o;return="" n="i(t,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return" i(t,["tfhd"]).map(function(n){var="" r,o,a;return="" r="n[4]<<24|n[5]<<16|n[6]<<8|n[7],o=e[r]||9e4,a=i(t,["tfdt"]).map(function(e){var" t,n;return="" t="e[0],n=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(n*=Math.pow(2,32),n+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),n})[0],a=a||1/0,a/o})})),o=Math.min.apply(null,r),isFinite(o)?o:0},t.exports={parseType:r,timescale:o,startTime:a}},{}],80:[function(e,t,n){"use" strict";var="" i,r,o,a,s,u,l,d,c,f,p,h="e("../utils/stream.js"),m=e("./mp4-generator.js"),y=e("../m2ts/m2ts.js"),v=e("../codecs/adts.js"),g=e("../codecs/h264").H264Stream,_=e("../aac"),b=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"];s=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},u=function(e){return" e[0]="=="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},f=function(e,t){var" n;if(e.length!="=t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},p=function(e){var" t,n,i="0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return" i},r="function(e){var" i,r,o,a;return="" this.trigger("done","audiosegmentstream"):(i="this.trimAdtsFramesByEarliestDts_(t),e.samples=this.generateSampleTable_(i),o=m.mdat(this.concatenateFrameData_(i)),t=[],c(e),r=m.moof(n,[e]),a=new" uint8array(r.bytelength+o.bytelength),n++,a.set(r),a.set(o,r.bytelength),d(e),this.trigger("data",{track:e,boxes:a}),void="" this.trigger("done","audiosegmentstream"))},this.trimadtsframesbyearliestdts_="function(t){return" e.minsegmentdts="">=i?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.bytelength,duration:1024});return 0="==o.length?(this.resetStream_(),void" i},this.concatenateframedata_="function(e){var" t,n,i="0,r=new" uint8array(p(e));for(t="0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return" r}},r.prototype="new" h,i="function(e){var" t,n,r="0,o=[];i.prototype.init.call(this),delete" e.minpts,this.gopcache_="[],this.push=function(i){l(e,i),"seq_parameter_set_rbsp"!==i.nalUnitType||t||(t=i.config,e.sps=[i.data],w.forEach(function(n){e[n]=t[n]},this)),"pic_parameter_set_rbsp"!==i.nalUnitType||n||(n=i.data,e.pps=[i.data]),o.push(i)},this.flush=function(){for(var" t,n,i,a,s,u;o.length&&"access_unit_delimiter_rbsp"!="=o[0].nalUnitType;)o.shift();return" this.trigger("done","videosegmentstream")):(t="this.groupNalsIntoFrames_(o),i=this.groupFramesIntoGops_(t),i[0][0].keyFrame||(n=this.getGopForFusion_(o[0],e),n?(i.unshift(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.pts=n.pts,i.dts=n.dts,i.duration+=n.duration):i=this.extendFirstKeyFrame_(i)),l(e,i),e.samples=this.generateSampleTable_(i),s=m.mdat(this.concatenateNalData_(i)),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],c(e),this.trigger("timelineStartInfo",e.timelineStartInfo),a=m.moof(r,[e]),u=new" uint8array(a.bytelength+s.bytelength),r++,u.set(a),u.set(s,a.bytelength),this.trigger("data",{track:e,boxes:u}),this.resetstream_(),void="" this.trigger("done","videosegmentstream"))},this.resetstream_="function(){d(e),t=void" 0,n="void" 0},this.getgopforfusion_="function(t){var" n,i,r,o,a,s="45e3,u=1e4,l=1/0;for(a=0;a<this.gopCache_.length;a++)o=this.gopCache_[a],r=o.gop,e.pps&&f(e.pps[0],o.pps[0])&&e.sps&&f(e.sps[0],o.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration,n">=-u&&n<=s&&(!i||l>n)&&(i=o,l=n)));return i?i.gop:null},this.extendFirstKeyFrame_=function(e){var t;return e[0][0].keyFrame||(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,i=[],r=[];for(i.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalunittype?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),i=[n],i.bytelength=n.data.bytelength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalunittype&&(i.keyframe=!0),i.duration=n.dts-i.dts,i.bytelength+=n.data.bytelength,i.push(n));return 0="==e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void" r.length&&(!i.duration||i.duration<="0)&&(i.duration=r[r.length-1].duration),r.push(i),r},this.groupFramesIntoGops_=function(e){var" t,n,i="[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),i=[n],i.nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return" r.length&&i.duration<="0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength," r.nalcount+="i.nalCount,r.duration+=i.duration,r.push(i),r},this.generateSampleTable_=function(e,t){var" n,i,r,o,a,u="t||0,l=[];for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i++)a=o[i],r=s(),r.dataOffset=u,r.compositionTimeOffset=a.pts-a.dts,r.duration=a.duration,r.size=4*a.length,r.size+=a.byteLength,a.keyFrame&&(r.flags.dependsOn=2),u+=r.size,l.push(r);return" l},this.concatenatenaldata_="function(e){var" t,n,i,r,o,a,s="0,u=e.byteLength,l=e.nalCount,d=u+4*l,c=new" uint8array(d),f="new" dataview(c.buffer);for(t="0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(o=r[n],i=0;i<o.length;i++)a=o[i],f.setUint32(s,a.data.byteLength),s+=4,c.set(a.data,s),s+=a.data.byteLength;return" c}},i.prototype="new" h,l="function(e,t){"number"==typeof" t.pts&&(void="" t.dts&&(void="" e.minsegmentdts,delete="" e.maxsegmentdts,delete="" e.minsegmentpts,delete="" e.maxsegmentpts},c="function(e){var" t,n="9e4,i=e.minSegmentDts-e.timelineStartInfo.dts,r=e.minSegmentPts-e.minSegmentDts;e.baseMediaDecodeTime=e.timelineStartInfo.baseMediaDecodeTime,e.baseMediaDecodeTime+=i,e.baseMediaDecodeTime-=r,e.baseMediaDecodeTime=Math.max(0,e.baseMediaDecodeTime),"audio"===e.type&&(t=e.samplerate/n,e.baseMediaDecodeTime*=t,e.baseMediaDecodeTime=Math.floor(e.baseMediaDecodeTime))},a=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof" e.remux?this.remuxtracks="!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,a.prototype.init.call(this),this.push=function(e){return" e.text?this.pendingcaptions.push(e):e.frames?this.pendingmetadata.push(e):(this.pendingtracks.push(e.track),this.pendingboxes.push(e.boxes),this.pendingbytes+="e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},a.prototype=new" h,a.prototype.flush="function(e){var" t,n,i,r,o="0,a={captions:[],metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return" this.emittedtracks++,void(this.emittedtracks="">=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,w.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,b.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,i=m.initSegment(this.pendingTracks),a.data=new Uint8Array(i.byteLength+this.pendingBytes),a.data.set(i),o+=i.byteLength,r=0;r<this.pendingboxes.length;r++)a.data.set(this.pendingboxes[r],o),o+=this.pendingboxes[r].bytelength;for(r=0;r<this.pendingcaptions.length;r++)t=this.pendingcaptions[r],t.starttime=t.startpts-s,t.starttime =9e4,t.endtime="t.endPts-s,t.endTime/=9e4,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)n=this.pendingMetadata[r],n.cueTime=n.pts-s,n.cueTime/=9e4,a.metadata.push(n);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks">=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},o=function(e){var t,n,s=this,l=!0;o.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new y.MetadataStream,t.aacStream=new _,t.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),t.adtsStream=new v,t.coalesceStream=new a(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new r(n),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var o={};this.transmuxPipeline_=o,o.type="ts",o.metadataStream=new y.MetadataStream,o.packetStream=new y.TransportPacketStream,o.parseStream=new y.TransportParseStream,o.elementaryStream=new y.ElementaryStream,o.videoTimestampRolloverStream=new y.TimestampRolloverStream("video"),o.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),o.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),o.adtsStream=new v,o.h264Stream=new g,o.captionStream=new y.CaptionStream,o.coalesceStream=new a(e,o.metadataStream),o.headOfPipeline=o.packetStream,o.packetStream.pipe(o.parseStream).pipe(o.elementaryStream),o.elementaryStream.pipe(o.videoTimestampRolloverStream).pipe(o.h264Stream),o.elementaryStream.pipe(o.audioTimestampRolloverStream).pipe(o.adtsStream),o.elementaryStream.pipe(o.timedMetadataTimestampRolloverStream).pipe(o.metadataStream).pipe(o.coalesceStream),o.h264Stream.pipe(o.captionStream).pipe(o.coalesceStream),o.elementaryStream.on("data",function(e){var a;if("metadata"===e.type){for(a=e.tracks.length;a--;)t||"video"!==e.tracks[a].type?n||"audio"!==e.tracks[a].type||(n=e.tracks[a],n.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(t=e.tracks[a],t.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime);t&&!o.videoSegmentStream&&(o.coalesceStream.numberOfTracks++,o.videoSegmentStream=new i(t),o.videoSegmentStream.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,o.audioSegmentStream.setEarliestDts(e.dts))}),o.h264Stream.pipe(o.videoSegmentStream).pipe(o.coalesceStream)),n&&!o.audioSegmentStream&&(o.coalesceStream.numberOfTracks++,o.audioSegmentStream=new r(n),o.adtsStream.pipe(o.audioSegmentStream).pipe(o.coalesceStream))}}),o.coalesceStream.on("data",this.trigger.bind(this,"data")),o.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var i=this.transmuxPipeline_;this.baseMediaDecodeTime=e,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,d(n),n.timelineStartInfo.baseMediaDecodeTime=e),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,d(t),t.timelineStartInfo.baseMediaDecodeTime=e)},this.push=function(e){if(l){var t=u(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),l=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){l=!0,this.transmuxPipeline_.headOfPipeline.flush()}},o.prototype=new h,t.exports={Transmuxer:o,VideoSegmentStream:i,AudioSegmentStream:r,AUDIO_PROPERTIES:b,VIDEO_PROPERTIES:w}},{"../aac":66,"../codecs/adts.js":67,"../codecs/h264":68,"../m2ts/m2ts.js":73,"../utils/stream.js":82,"./mp4-generator.js":78}],81:[function(e,t,n){"use strict";var i;i=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(r,r+a)),n=new DataView(o.buffer).getUint32(0),i=8*a,t-=a},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=math.floor(e 8),e-="8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var" r="Math.min(i,e),o=n">>>32-r;return i-=r,i>0?n<<=r:t>0&&this.loadWord(),r=e-r,r>0?o<<r|this.readbits(r):o},this.skipleadingzeros=function(){var e;for(e="0;e<i;++e)if(0!==(n&2147483648">>>e))return n<<=e,i-=e,e;return this.loadword(),e+this.skipleadingzeros()},this.skipunsignedexpgolomb="function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var" e="this.skipLeadingZeros();return" this.readbits(e+1)-1},this.readexpgolomb="function(){var" 1&e?1+e="">>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=i},{}],82:[function(e,t,n){"use strict";var i=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,o;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};i.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},i.prototype.push="function(e){this.trigger("data",e)},i.prototype.flush=function(e){this.trigger("done",e)},t.exports=i},{}],83:[function(e,t,n){"use" strict";var="" i;t.exports="function(e){var" t="i[e.byteLength%16||0],n=new" uint8array(e.bytelength+t.length);return="" n.set(e),n.set(t,e.bytelength),n},i="[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],84:[function(e,t,n){"use" strict";n.pad="e("./pad.js"),n.unpad=e("./unpad.js")},{"./pad.js":83,"./unpad.js":85}],85:[function(e,t,n){"use" strict";t.exports="function(e){return" e.subarray(0,e.bytelength-e[e.bytelength-1])}},{}],86:[function(e,t,n){(function(i){"use="" strict";function="" r(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" o="e("global/window"),a=r(o),s="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,u="r(s),l=function(e){Object.defineProperties(e.frame,{id:{get:function(){return" u["default"].log.warn("cue.frame.id="" is="" deprecated.="" use="" cue.value.key="" instead."),e.value.key}},value:{get:function(){return="" u["default"].log.warn("cue.frame.value="" cue.value.data="" instead."),e.value.data}},privatedata:{get:function(){return="" u["default"].log.warn("cue.frame.privatedata="" instead."),e.value.data}}})},d="function(e){var" 0;return="" i="a["default"].WebKitDataCue||a["default"].VTTCue;if(t&&t.forEach(function(e){this.inbandTextTrack_.addCue(new" i(e.starttime+this.timestampoffset,e.endtime+this.timestampoffset,e.text))},e),n){var="" r="d(e.mediaSource_.duration);if(n.forEach(function(e){var" n="new" i(t,t,e.value||e.url||e.data||"");n.frame="e,n.value=e,l(n),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues){for(var" e.starttime-t.starttime});for(var="" c="0;c<s.length-1;c++)s[c].endTime!==s[c+1].startTime&&(s[c].endTime=s[c+1].startTime);s[s.length-1].endTime=r}}};n["default"]={addTextTrackData:c,durationOfVideo:d},t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{"global="" window":24}],87:[function(e,t,n){"use="" strict";object.defineproperty(n,"__esmodule",{value:!0});var="" t.type="n.shift().trim(),n.forEach(function(e){var">1){var i=n[0].replace(/"/g,"").trim(),r=n[1].replace(/"/g,"").trim();t.parameters[i]=r}}),t};n["default"]={isAudioCodec:i,parseContentType:o,isVideoCodec:r},t.exports=n["default"]},{}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){n.captions&&n.captions.length&&!e.inbandTextTrack_&&(e.inbandTextTrack_=t.player_.addTextTrack("captions","cc1")),n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=t.player_.addTextTrack("metadata","Timed Metadata"),e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)};n["default"]=i,t.exports=n["default"]},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={TIME_BETWEEN_TICKS:Math.floor(2),TIME_PER_TICK:Math.floor(10),BYTES_PER_CHUNK:4096,MIN_CHUNK:4096,MAX_CHUNK:4194304};n["default"]=i,t.exports=n["default"]},{}],90:[function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==u)return;return" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},l="e("global/document"),d=r(l),c="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,f="r(c),p=e("./flash-source-buffer"),h=r(p),m=e("./flash-constants"),y=r(m),v=e("./codec-utils"),g=function(e){function" t(){var="" e="this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=d["default"].getElementById(t.swfId),e.player_=(0,f["default"])(e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var" t="e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.swfObj&&e.swfObj.vjs_load()})}return" a(t,e),s(t,[{key:"addseekablerange_",value:function(){}},{key:"addsourcebuffer",value:function(e){var="" 0;if("video="" mp2t"!="=t.type)throw" new="" error("notsupportederror="" (video.js)");return="" n="new" h["default"](this),this.sourcebuffers.push(n),n}},{key:"endofstream",value:function(e){"network"="==e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),t}(f["default"].EventTarget);n["default"]=g;try{Object.defineProperty(g.prototype,"duration",{get:function(){return" this.swfobj?this.swfobj.vjs_getproperty("duration"):nan},set:function(e){var="" 0,n="this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),e<n)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return" e}})}catch(_){g.prototype.duration="NaN}for(var" b="" in="" y["default"])g[b]="y["default"][b];t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" codec-utils":87,".="" flash-constants":89,".="" flash-source-buffer":91,"global="" document":23}],91:[function(e,t,n){(function(i){"use="" strict";function="" r(e){return="" e&&e.__esmodule?e:{"default":e}}function="" o(e,t){if(!(e="" instanceof="" t))throw="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" t||t<0)&&(t="0);var" math.round(e*n)="" n},t="function(e){function" t(e){var="" 0;this.chunksize_="w["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=e,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new" h["default"].transmuxer,this.segmentparser_.on("data",this.receivebuffer_.bind(this)),i="d["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource_.swfObj.vjs_appendBuffer(i),this.one("updateend",function(){n.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return" this.timestampoffset_},set:function(e){"number"="=typeof" e&&e="">=0&&(this.timestampOffset_=e,this.segmentParser_=new h["default"].Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return f["default"].createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=O(e[0][0],3),e[0][1]=O(e[0][1],3)),f["default"].createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){(0,y["default"])(0,1/0,n.metadataTrack_),(0,y["default"])(0,1/0,n.inbandTextTrack_)})}return a(t,e),s(t,[{key:"appendBuffer",value:function(e){var t=this,n=void 0,i=524288,r=0;if(this.updating)throw n=new Error("SourceBuffer.append() cannot be called while an update is in progress"),n.name="InvalidStateError",n.code=11,n;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"});var o=function a(){t.segmentParser_.push(e.subarray(r,r+i)),r+=i,x(r<e.bytelength?a:t.segmentparser_.flush.bind(t.segmentparser_))};o()}},{key:"abort",value:function(){this.buffer_=[],this.buffersize_=0,this.mediasource_.swfobj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){(0,y["default"])(e,t,this.metadatatrack_),(0,y["default"])(e,t,this.inbandtexttrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receivebuffer_",value:function(e){var t="this;(0,g["default"])(this,this.mediaSource_,e),(0,_.addTextTrackData)(this,e.captions,e.metadata),x(function(){var" n="t.convertTagsToData_(e);0===t.buffer_.length&&x(t.processBuffer_.bind(t)),n&&(t.buffer_.push(n),t.bufferSize_+=n.byteLength)})}},{key:"processBuffer_",value:function(){var" e="void" 0,t="void" 0,n="void" 0,i="void" 0,r="void" 0,o="0,a=0,s=+new" date,u="void" 0;if(!this.buffer_.length)return="" void(this.updating!="=!1&&(this.updating=!1,this.trigger({type:"updateend"})));do{for(a++,e=this.buffer_[0].subarray(o,o+this.chunkSize_),e.byteLength<this.chunkSize_||this.buffer_[0].byteLength===o+this.chunkSize_?(o=0,this.buffer_.shift()):o+=this.chunkSize_,this.bufferSize_-=e.byteLength,i="",n=e.byteLength,t=0;t<n;t++)i+=String.fromCharCode(e[t]);r=d["default"].btoa(i),this.mediaSource_.swfObj.CallFunction('<invoke" name="vjs_appendBuffer" returntype="javascript"><arguments><string>'+r+"</string></arguments>"),u=new Date-s}while(this.buffer_.length&&u<w["default"].time_per_tick);this.buffer_.length&&o&&(this.buffer_[0]=this.buffer_[0].subarray(o)),u>=w["default"].TIME_PER_TICK&&(this.chunkSize_=Math.floor(this.chunkSize_*(a/4))),this.chunkSize_=Math.max(w["default"].MIN_CHUNK,Math.min(this.chunkSize_,w["default"].MAX_CHUNK)),0!==this.bufferSize_?x(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource_.tech_,i=0,r=void 0,o=void 0,a=void 0,s=[],u=this.getOrderedTags_(e);for(isNaN(this.basePtsOffset_)&&u.length&&(this.basePtsOffset_=u[0].pts),n.buffered().length&&(i=n.buffered().end(0)-this.timestampOffset),i=Math.max(i,n.currentTime()-this.timestampOffset),i*=1e3,i+=this.basePtsOffset_,r=0;r<u.length;r++)u[r].pts>=i&&s.push(u[r]);if(0!==s.length){for(r=0;r<s.length;r++)t+=s[r].bytes.bytelength;for(a=new 0="==u)return;return" uint8array(t),r="0,o=0;r<s.length;r++)a.set(s[r].bytes,o),o+=s[r].bytes.byteLength;return" a}}},{key:"getorderedtags_",value:function(e){for(var="" t="e.tags.videoTags,n=e.tags.audioTags,i=void" 0,r="[];t.length||n.length;)i=t.length?n.length&&n[0].dts<t[0].dts?n.shift():t.shift():n.shift(),r.push(i.finalize());return" r}}]),t}(f["default"].eventtarget);n["default"]="T,t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" add-text-track-data":86,".="" create-text-tracks-if-necessary":88,".="" flash-constants":89,".="" remove-cues-from-track":93,"global="" window":24,"mux.js="" lib="" flv":70}],92:[function(e,t,n){(function(i){"use="" strict";function="" r(e){return="" e&&e.__esmodule?e:{"default":e}}function="" o(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},l="e("global/window"),d=r(l),c=e("global/document"),f=r(c),p="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" i?i.videojs:null,h="r(p),m=e("./virtual-source-buffer"),y=r(m),v=e("./add-text-track-data"),g=e("./codec-utils"),_=function(e){return" e.map(function(e){return="" e.replace(="" avc1\.(\d+)\.(\d+)="" i,function(e,t,n){var="" t(){var="" e="this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var" 0;this.nativemediasource_="new" d["default"].mediasource;for(n="" in="" this.nativemediasource_)n="" t.prototype||"function"!="typeof" this.nativemediasource_[n]||(this[n]="this.nativeMediaSource_[n].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return" this.duration_="==1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){if(this.duration_=e,e!==1/0)return" void(this.nativemediasource_.duration="e)}}),Object.defineProperty(this,"seekable",{get:function(){return" this.nativemediasource_.readystate}}),object.defineproperty(this,"activesourcebuffers",{get:function(){return="" this.activesourcebuffers_}}),this.sourcebuffers="[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;for(var" if(i.videocodec_&&!i.audiocodec_)i.audiodisabled_="!0,n=!1;else" if(!i.videocodec_&&i.audiocodec_&&(i.audiodisabled_="n,n))return;e.activeSourceBuffers_.push(i)})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var" a(t,e),s(t,[{key:"addseekablerange_",value:function(e,t){var="" 0;if(this.duration!="=1/0)throw" error("mediasource.addseekablerange()="" can="" only="" invoked="" when="" the="" duration="" is="" infinity"),n.name="InvalidStateError" ,n.code="11,n;(t">this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=(0,g.parseContentType)(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=_(i),i=i.filter(function(e){return(0,g.isAudioCodec)(e)||(0,g.isVideoCodec)(e)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new y["default"](this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(h["default"].EventTarget);n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":86,"./codec-utils":87,"./virtual-source-buffer":96,"global/document":23,"global/window":24}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){var i=void 0,r=void 0;if(n)for(i=n.cues.length;i--;)r=n.cues[i],r.startTime<=t&&r.endtime>=e&&n.removeCue(r)};n["default"]=i,t.exports=n["default"]},{}],94:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==u)return;return" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),a="e("global/window"),s=i(a),u=e("mux.js/lib/mp4"),l=i(u),d=function(e){e.on("data",function(e){var" t="e.data;e.data=t.buffer,s["default"].postMessage({action:"data",segment:e,byteOffset:t.byteOffset,byteLength:t.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){s["default"].postMessage({action:"caption",data:e})}),e.on("done",function(e){s["default"].postMessage({action:"done"})})},c=function(){function" e(t){r(this,e),this.options="t||{},this.init()}return" o(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer="new" l["default"].transmuxer(this.options),d(this.transmuxer)}},{key:"push",value:function(e){var="" uint8array(e.data,e.byteoffset,e.bytelength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"settimestampoffset",value:function(e){var="" c(e.data.options)):(this.messagehandlers||(this.messagehandlers="new" c),void(e.data&&e.data.action&&"init"!="=e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data)))}};n["default"]=function(e){return" new="" f(e)},t.exports="n["default"]},{"global/window":24,"mux.js/lib/mp4":77}],95:[function(e,t,n){(function(t){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" r="e("global/window"),o=i(r),a=e("./flash-media-source"),s=i(a),u=e("./html-media-source"),l=i(u),d="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" t?t.videojs:null,c="i(d),f=0,p={mode:"auto"};c["default"].mediaSources={};var" h="function(e,t){var" n="c["default"].mediaSources[e];if(!n)throw" error("media="" source="" not="" found="" (video.js)");n.trigger({type:"sourceopen",swfid:t})},m="function(){return!!o["default"].MediaSource&&!!o["default"].MediaSource.isTypeSupported&&o["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},y=function(e){var" this.mediasource="{open:h,supportsNativeMediaSources:m},"html5"===t.mode||"auto"===t.mode&&m()?new" l["default"]:new="" s["default"]};n.mediasource="y,y.open=h,y.supportsNativeMediaSources=m;var" v="{createObjectURL:function(e){var" ,n="void" 0;return="" e="" instanceof="" l["default"]?(n="o["default"].URL.createObjectURL(e.nativeMediaSource_),e.url_=n,n):e" s["default"]?(n="t+f,f++,c["default"].mediaSources[n]=e,n):(n=o["default"].URL.createObjectURL(e)," e.url_="n,n)}};n.URL=v,c["default"].MediaSource=y,c["default"].URL=v}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" flash-media-source":90,".="" html-media-source":92,"global="" window":24}],96:[function(e,t,n){(function(i){"use="" r(e){return="" e&&e.__esmodule?e:{"default":e}}function="" o(e,t){if(!(e="" t))throw="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function(e,t,n){for(var" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" l="Object.getPrototypeOf(r);if(null===l)return;e=l,t=o,n=a,i=!0,s=l=void" 0}},l="undefined" !="typeof" i?i.videojs:null,d="r(l),c=e("./create-text-tracks-if-necessary"),f=r(c),p=e("./remove-cues-from-track"),h=r(p),m=e("./add-text-track-data"),y=e("webworkify"),v=r(y),g=e("./transmuxer-worker"),_=r(g),b=e("./codec-utils"),w=function(e){function" t(e,n){var="" 0},object.defineproperty(this,"timestampoffset",{get:function(){return="" this.timestampoffset_},set:function(e){"number"="=typeof" e&&e="">=0&&(this.timestampOffset_=e,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,i=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return d["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return d["default"].createTimeRange();for(var o=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,s=o.length;s--;)i.push({time:o.start(s),type:"start"}),i.push({time:o.end(s),type:"end"});for(s=a.length;s--;)i.push({time:a.start(s),type:"start"}),i.push({time:a.end(s),type:"end"});for(i.sort(function(e,t){return e.time-t.time}),s=0;s<i.length;s++)"start"===i[s].type?(n++,2===n&&(e=i[s].time)):"end"===i[s].type&&(n--,1===n&&(t=i[s].time)),null!==e&&null!==t&&(r.push([e,t]),e=null,t=null);return 0="==u)return;return" d["default"].createtimeranges(r)}})}return="" a(t,e),s(t,[{key:"data_",value:function(e){var="" t="e.data.segment;t.data=new" uint8array(t.data,e.data.byteoffset,e.data.bytelength),(0,f["default"])(this,this.mediasource_,t),this.pendingbuffers_.push(t)}},{key:"done_",value:function(e){this.processpendingsegments_()}},{key:"createrealsourcebuffers_",value:function(){var="" e="this,t=["audio","video"];t.forEach(function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var" i="null;e.mediaSource_[n+"Buffer_"]?i=e.mediaSource_[n+"Buffer_"]:(i=e.mediaSource_.nativeMediaSource_.addSourceBuffer(n+'/mp4;codecs="'+e[n+"Codec_"]+'"'),e.mediaSource_[n+"Buffer_"]=i),e[n+"Buffer_"]=i,["update","updatestart","updateend"].forEach(function(r){i.addEventListener(r,function(){if("audio"!==n||!e.audioDisabled_){var" i?e.trigger(r):void="" 0}})})}})}},{key:"appendbuffer",value:function(e){this.bufferupdating_="!0,this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(e,t){this.videoBuffer_&&this.videoBuffer_.remove(e,t),this.audioBuffer_&&this.audioBuffer_.remove(e,t),(0,h["default"])(e,t,this.metadataTrack_),(0,h["default"])(e,t,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var" n="t.type,i=t.data;return" e[n].segments.push(i),e[n].bytes+="i.byteLength,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.videoBuffer_&&(this.concatAndAppendSegments_(e.video,this.videoBuffer_),(0,m.addTextTrackData)(this,e.captions,e.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var" 0;e.bytes&&(i="new" uint8array(e.bytes),e.segments.foreach(function(e){i.set(e,n),n+="e.byteLength}),t.appendBuffer(i))}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(d["default"].EventTarget);n["default"]=w,t.exports=n["default"]}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" add-text-track-data":86,".="" codec-utils":87,".="" create-text-tracks-if-necessary":88,".="" remove-cues-from-track":93,".="" transmuxer-worker":94,webworkify:97}],97:[function(e,t,n){var="" t,n="Object.keys(o),s=0,u=n.length;s<u;s++){var" l="n[s];if(o[l].exports===e){t=l;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var" d="{},s=0,u=n.length;s<u;s++){var" c="Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[t]=t,r[c]=[Function(["require"],"require("+a(t)+")(self)"),f];var" p="(" +i+")({"+object.keys(r).map(function(e){return="" a(e)+":["+r[e][0]+","+a(r[e][1])+"]"}).join(",")+"},{},["+a(c)+"])",h="window.URL||window.webkitURL||window.mozURL||window.msURL;return" new="" worker(h.createobjecturl(new="" blob([p],{type:"text="" javascript"})))}},{}],98:[function(e,t,n){(function(n){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(e,t,n){for(var" r="e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var" s="Object.getOwnPropertyDescriptor(r,o);if(void" 0!="=s){if("value"in" s)return="" s.value;var="" u="s.get;if(void" u.call(a)}var="" 0}},u="e("global/document"),l=i(u),d=e("./playlist-loader"),c=i(d),f=e("./playlist"),p=i(f),h=e("./xhr"),m=i(h),y=e("aes-decrypter"),v=e("./bin-utils"),g=i(v),_=e("videojs-contrib-media-sources"),b=e("m3u8-parser"),w=i(b),x="undefined"!=typeof" window?window.videojs:"undefined"!="typeof" n?n.videojs:null,o="i(x),T=e("./master-playlist-controller"),k=e("./config"),S=i(k),j=e("./rendition-mixin"),C=i(j),E=e("./gap-skipper"),P=i(E),A=e("global/window"),M=i(A),L={PlaylistLoader:c["default"],Playlist:p["default"],Decrypter:y.Decrypter,AsyncStream:y.AsyncStream,decrypt:y.decrypt,utils:g["default"],xhr:(0,m["default"])()};Object.defineProperty(L,"GOAL_BUFFER_LENGTH",{get:function(){return" o["default"].log.warn("using="" hls.goal_buffer_length="" is="" unsafe="" sure="" you="" know="" what="" are="" doing"),s["default"].goal_buffer_length},set:function(e){return="" doing"),"number"!="typeof" e||e<="0?void" o["default"].log.warn("value="" passed="" to="" number="" and="" greater="" than="" 0"):void(s["default"].goal_buffer_length="e)}});L.STANDARD_PLAYLIST_SELECTOR=function(){return" this.playlists.media()},l.canplaysource="function(){return" o["default"].log.warn("hls="" no="" longer="" tech.="" please="" remove="" it="" from="" your="" player's="" techorder.")},l.supportsnativehls="function(){var" t.some(function(t){return="" maybe|probably="" i.test(e.canplaytype(t))})}(),l.issupported="function(){return" techorder.")};var="" t(e,n,i){var="" o="this;if(r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),n.options_&&n.options_.playerId){var" o["default"].log.warn("player.hls="" deprecated.="" use="" player.tech.hls="" instead."),o}})}this.tech_="n,this.source_=e,this.stats={},this.options_=O["default"].mergeOptions(O["default"].options.hls||{},i.hls),this.setOptions_(),this.on(l["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var" o(t,e),a(t,[{key:"setoptions_",value:function(){var="" e.source_[t]&&(e.options_[t]="e.source_[t])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e){var" t.masterplaylistcontroller(this.options_),this.gapskipper_="new" p["default"](this.options_),this.masterplaylistcontroller_.selectplaylist="this.selectPlaylist?this.selectPlaylist.bind(this):L.STANDARD_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return" this.masterplaylistcontroller_.selectplaylist},set:function(e){this.masterplaylistcontroller_.selectplaylist="e.bind(this)}},bandwidth:{get:function(){return" this.masterplaylistcontroller_.mainsegmentloader_.bandwidth},set:function(e){this.masterplaylistcontroller_.mainsegmentloader_.bandwidth="e}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return" t.bandwidth||0},enumerable:!0},mediarequests:{get:function(){return="" t.masterplaylistcontroller_.mediarequests_()||0},enumerable:!0},mediatransferduration:{get:function(){return="" t.masterplaylistcontroller_.mediatransferduration_()||0},enumerable:!0},mediabytestransferred:{get:function(){return="" t.masterplaylistcontroller_.mediabytestransferred_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterplaylistcontroller_.setupfirstplay.bind(this.masterplaylistcontroller_)),this.masterplaylistcontroller_.on("sourceopen",function(){t.tech_.audiotracks().addeventlistener("change",t.audiotrackchange_)}),this.masterplaylistcontroller_.on("selectedinitialmedia",function(){(0,c["default"])(t)}),this.masterplaylistcontroller_.on("audioupdate",function(){t.tech_.cleartracks("audio"),t.masterplaylistcontroller_.activeaudiogroup().foreach(function(e){t.tech_.audiotracks().addtrack(e)})}),this.on(this.masterplaylistcontroller_,"progress",function(){this.bandwidth="this.masterPlaylistController_.mainSegmentLoader_.bandwidth,this.tech_.trigger("progress")}),this.tech_.el()&&this.tech_.src(O["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"activeAudioGroup_",value:function(){return" this.masterplaylistcontroller_.activeaudiogroup()}},{key:"play",value:function(){this.masterplaylistcontroller_.play()}},{key:"setcurrenttime",value:function(e){this.masterplaylistcontroller_.setcurrenttime(e)}},{key:"duration",value:function(){return="" this.masterplaylistcontroller_.duration()}},{key:"seekable",value:function(){return="" this.masterplaylistcontroller_.seekable()}},{key:"dispose",value:function(){this.masterplaylistcontroller_&&this.masterplaylistcontroller_.dispose(),this.gapskipper_.dispose(),this.tech_.audiotracks().removeeventlistener("change",this.audiotrackchange_),s(object.getprototypeof(t.prototype),"dispose",this).call(this)}}]),t}(i),b="function" u(e){return{canhandlesource:function(t){return(!o["default"].options.hls||!o["default"].options.hls.mode||o["default"].options.hls.mode="==e)&&U.canPlayType(t.type)},handleSource:function(t,n,i){"flash"===e&&n.setTimeout(function(){n.trigger("loadstart")},1);var" n.hls="new" d(t,n,r),n.hls.xhr="(0,m["default"])(),O["default"].Hls.xhr.beforeRequest&&(n.hls.xhr.beforeRequest=O["default"].Hls.xhr.beforeRequest),n.hls.src(t.src),n.hls},canPlayType:function(e){return" u.canplaytype(e)?"maybe":""}}};l.compareplaylistbandwidth="function(e,t){var" 0,i="void" 0;return="" e.attributes&&e.attributes.bandwidth&&(n="e.attributes.BANDWIDTH),n=n||M["default"].Number.MAX_VALUE,t.attributes&&t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||M["default"].Number.MAX_VALUE,n-i},L.comparePlaylistResolution=function(e,t){var" e.attributes&&e.attributes.resolution&&e.attributes.resolution.width&&(n="e.attributes.RESOLUTION.width),n=n||M["default"].Number.MAX_VALUE,t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||M["default"].Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},B.canPlayType=function(e){var" o["default"].mediasource&&"undefined"!="typeof" o["default"].url||(o["default"].mediasource="_.MediaSource,O["default"].URL=_.URL),_.MediaSource.supportsNativeMediaSources()&&O["default"].getComponent("Html5").registerSourceHandler(B("html5")),M["default"].Uint8Array&&O["default"].getComponent("Flash").registerSourceHandler(B("flash")),O["default"].HlsHandler=D,O["default"].HlsSourceHandler=B,O["default"].Hls=L,O["default"].m3u8=w["default"],O["default"].registerComponent("Hls",L),O["default"].options.hls=O["default"].options.hls||{},t.exports={Hls:L,HlsHandler:D,HlsSourceHandler:B}}).call(this,"undefined"!=typeof" bin-utils":2,".="" config":3,".="" gap-skipper":5,".="" master-playlist-controller":7,".="" playlist":9,".="" playlist-loader":8,".="" rendition-mixin":11,".="" xhr":16,"aes-decrypter":20,"global="" document":23,"global="" window":24,"m3u8-parser":61,"videojs-contrib-media-sources":95}]},{},[98]),!function(e){if("object"="=typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" !="typeof" window?window:"undefined"!="typeof" self?self:this,t.videojscustomui="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" require&&require,a="0;a<i.length;a++)r(i[a]);return" r}({1:[function(e,t,n){"use="" i(e,t){if(!(e="" r(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" d(e,t,n){null="==e&&(e=Function.prototype);var" 0:d(r,t,n)}if("value"in="" i)return="" i.value;var="" void="" 0},u="videojs.getComponent("ModalDialog"),l=function(e){function" t(e,n){return="" i(this,t),r(this,(t.__proto__||object.getprototypeof(t)).call(this,e,n))}return="" o(t,e),a(t,[{key:"buildcssclass",value:function(){return"plugin-prompt="" "+s(t.prototype.__proto__||object.getprototypeof(t.prototype),"buildcssclass",this).call(this)}},{key:"open",value:function(){return="" this.opened_||(this.player(),this.trigger("beforemodalopen"),this.opened_="!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",videojs.bind(this,this.handleKeyPress)),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0),this}},{key:"close",value:function(){if(this.opened_){var" this}}]),t}(u);videojs.registercomponent("promptmodaldialog",l),n["default"]="l},{}],2:[function(e,t,n){(function(t){"use" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" t?t.videojs:null,o="i(r),a=e("./PromptModalDialog.js"),s=i(a),u=e("./tip.js"),l=(i(u),{}),d=function(e,t){for(var" s["default"](e),a="e.addChild(r);e.options_.plugin_prompt=a.id()},c=function(e){var" promptmodaldialog.js":1,".="" tip.js":3}],3:[function(e,t,n){"use="" f(e,t,n){null="==e&&(e=Function.prototype);var" 0:f(r,t,n)}if("value"in="" t(e,n){i(this,t);var="" o.buildshowstatus(),o.on("mounted",function(){o.handlemounted()}),o.on("mouseenter",function(){o.handlemouseenter()}),o.on("mouseleave",function(){o.handlemouseleave()}),videojs.on(o.clickableel,"click",function(){o.trigger("tip.click")}),o}return="" o(t,e),a(t,[{key:"createel",value:function(){var="" hidden;",innerhtml:this.options_.innerhtml});return="" e.appendchild(this.clickableel()),e}},{key:"clickableel",value:function(){return="" this.clickableel="s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"span",{className:l+"-click_content",innerHTML:this.options_.clickableText||""}),this.clickableEl}},{key:"buildCSSClass",value:function(){return" this.options_.classname?l+"="" "+this.options_.classname:l}},{key:"buildshowstatus",value:function(){var="" d?void="" settimeout(function(){e.open()},500):(d++,this.style(this.showstatus),this.opened="!0,this.trigger("tip:open"),void(this.options_.autoClose&&(this.timer=setTimeout(function(){e.close()},1e3*this.options_.autoClose))))}},{key:"close",value:function(){this.timer&&clearTimeout(this.timer),this.opened&&(d--,this.style(this.initState),this.opened=!1,this.trigger("tip:close"),this.options_.temporary&&(this.trigger("tip:dispose"),this.dispose()))}},{key:"handleMounted",value:function(){this.initState=[{key:"left",value:-this.width()+"px"},{key:"bottom",value:"54px"},{key:"visibility",value:"visible"}],this.style(this.initState)}},{key:"handleMouseenter",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"handleMouseleave",value:function(){var" self?self:this,t.videojsrememberpos="e()}}(function(){var" e;return="" t(e,n,i){function="" r(a,s){if(!n[a]){if(!e[a]){var="" r(n?n:t)},d,d.exports,t,e,n,i)}return="" r}({1:[function(e,t,n){var="" i.bin.stringtobytes(unescape(encodeuricomponent(e)))},bytestostring:function(e){return="" decodeuricomponent(escape(i.bin.bytestostring(e)))}},bin:{stringtobytes:function(e){for(var="" t},bytestostring:function(e){for(var="" t.join("")}}};t.exports="i},{}],2:[function(e,t,n){!function(){var" ,n="{rotl:function(e,t){return" e<<t|e="">>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randombytes:function(e){for(var="" t="[];e">0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordstobytes:function(e){for(var="" t="[],n=0;n<32*e.length;n+=8)t.push(e[n">>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseint(e.substr(n,2),16));return t},bytestobase64:function(t){for(var="" n="[],i=0;i<t.length;i+=3)for(var" r="t[i]<<16|t[i+1]<<8|t[i+2],o=0;o<4;o++)8*i+6*o<=8*t.length?n.push(e.charAt(r">>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<t.length;r=++i%4)0!=r&&n.push((e.indexof(t.charat(i-1))&math.pow(2,-2*r+8)-1)<<2*r|e.indexof(t.charat(i))>>>6-2*r);return n}};t.exports=n}()},{}],3:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}t.exports=function(e){return null!=e&&(i(e)||r(e)||!!e._isBuffer)}},{}],4:[function(e,t,n){!function(){var n=e("crypt"),i=e("charenc").utf8,r=e("is-buffer"),o=e("charenc").bin,a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=n.bytesToWords(e),u=8*e.length,l=1732584193,d=-271733879,c=-1732584194,f=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[u>>>5]|=128<<u%32,s[(u+64>>>9<<4)+14]=u;for(var h="a._ff,m=a._gg,y=a._hh,v=a._ii,p=0;p<s.length;p+=16){var" g="l,_=d,b=c,w=f;l=h(l,d,c,f,s[p+0],7,-680876936),f=h(f,l,d,c,s[p+1],12,-389564586),c=h(c,f,l,d,s[p+2],17,606105819),d=h(d,c,f,l,s[p+3],22,-1044525330),l=h(l,d,c,f,s[p+4],7,-176418897),f=h(f,l,d,c,s[p+5],12,1200080426),c=h(c,f,l,d,s[p+6],17,-1473231341),d=h(d,c,f,l,s[p+7],22,-45705983),l=h(l,d,c,f,s[p+8],7,1770035416),f=h(f,l,d,c,s[p+9],12,-1958414417),c=h(c,f,l,d,s[p+10],17,-42063),d=h(d,c,f,l,s[p+11],22,-1990404162),l=h(l,d,c,f,s[p+12],7,1804603682),f=h(f,l,d,c,s[p+13],12,-40341101),c=h(c,f,l,d,s[p+14],17,-1502002290),d=h(d,c,f,l,s[p+15],22,1236535329),l=m(l,d,c,f,s[p+1],5,-165796510),f=m(f,l,d,c,s[p+6],9,-1069501632),c=m(c,f,l,d,s[p+11],14,643717713),d=m(d,c,f,l,s[p+0],20,-373897302),l=m(l,d,c,f,s[p+5],5,-701558691),f=m(f,l,d,c,s[p+10],9,38016083),c=m(c,f,l,d,s[p+15],14,-660478335),d=m(d,c,f,l,s[p+4],20,-405537848),l=m(l,d,c,f,s[p+9],5,568446438),f=m(f,l,d,c,s[p+14],9,-1019803690),c=m(c,f,l,d,s[p+3],14,-187363961),d=m(d,c,f,l,s[p+8],20,1163531501),l=m(l,d,c,f,s[p+13],5,-1444681467),f=m(f,l,d,c,s[p+2],9,-51403784),c=m(c,f,l,d,s[p+7],14,1735328473),d=m(d,c,f,l,s[p+12],20,-1926607734),l=y(l,d,c,f,s[p+5],4,-378558),f=y(f,l,d,c,s[p+8],11,-2022574463),c=y(c,f,l,d,s[p+11],16,1839030562),d=y(d,c,f,l,s[p+14],23,-35309556),l=y(l,d,c,f,s[p+1],4,-1530992060),f=y(f,l,d,c,s[p+4],11,1272893353),c=y(c,f,l,d,s[p+7],16,-155497632),d=y(d,c,f,l,s[p+10],23,-1094730640),l=y(l,d,c,f,s[p+13],4,681279174),f=y(f,l,d,c,s[p+0],11,-358537222),c=y(c,f,l,d,s[p+3],16,-722521979),d=y(d,c,f,l,s[p+6],23,76029189),l=y(l,d,c,f,s[p+9],4,-640364487),f=y(f,l,d,c,s[p+12],11,-421815835),c=y(c,f,l,d,s[p+15],16,530742520),d=y(d,c,f,l,s[p+2],23,-995338651),l=v(l,d,c,f,s[p+0],6,-198630844),f=v(f,l,d,c,s[p+7],10,1126891415),c=v(c,f,l,d,s[p+14],15,-1416354905),d=v(d,c,f,l,s[p+5],21,-57434055),l=v(l,d,c,f,s[p+12],6,1700485571),f=v(f,l,d,c,s[p+3],10,-1894986606),c=v(c,f,l,d,s[p+10],15,-1051523),d=v(d,c,f,l,s[p+1],21,-2054922799),l=v(l,d,c,f,s[p+8],6,1873313359),f=v(f,l,d,c,s[p+15],10,-30611744),c=v(c,f,l,d,s[p+6],15,-1560198380),d=v(d,c,f,l,s[p+13],21,1309151649),l=v(l,d,c,f,s[p+4],6,-145523070),f=v(f,l,d,c,s[p+11],10,-1120210379),c=v(c,f,l,d,s[p+2],15,718787259),d=v(d,c,f,l,s[p+9],21,-343485551),l=l+g">>>0,d=d+_>>>0,c=c+b>>>0,f=f+w>>>0}return n.endian([l,d,c,f])};a._ff=function(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,i,r,o,a){var s=e+(t^n^i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,t.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=n.wordsToBytes(a(e,t));return t&&t.asBytes?i:t&&t.asString?o.bytesToString(i):n.bytesToHex(i)}}()},{charenc:1,crypt:2,"is-buffer":3}],5:[function(t,n,i){(function(t){"use strict";!function(t,r){"function"==typeof e&&e.amd?e([],r):"object"==typeof i?n.exports=r():t.store=r()}(this,function(){function e(){try{return a in r&&r[a]}catch(e){return!1}}var n,i={},r="undefined"!=typeof window?window:t,o=r.document,a="localStorage",s="script";if(i.disabled=!1,i.version="1.3.20",i.set=function(e,t){},i.get=function(e,t){},i.has=function(e){return void 0!==i.get(e)},i.remove=function(e){},i.clear=function(){},i.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var r=i.get(e,t);n(r),i.set(e,r)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(e){return JSON.stringify(e)},i.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},e())n=r[a],i.set=function(e,t){return void 0===t?i.remove(e):(n.setItem(e,i.serialize(t)),
t)},i.get=function(e,t){var r=i.deserialize(n.getItem(e));return void 0===r?t:r},i.remove=function(e){n.removeItem(e)},i.clear=function(){n.clear()},i.getAll=function(){var e={};return i.forEach(function(t,n){e[t]=n}),e},i.forEach=function(e){for(var t=0;t<n.length;t++){var r="n.key(t);e(r,i.get(r))}};else" if(o&&o.documentelement.addbehavior){var="" u,l;try{l="new" activexobject("htmlfile"),l.open(),l.write("<"+s+"="">document.w=window<iframe src="/favicon.ico"></iframe>'),l.close(),u=l.w.frames[0].document,n=u.createElement("div")}catch(d){n=o.createElement("div"),u=o.body}var c=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),u.appendChild(n),n.addBehavior("#default#userData"),n.load(a);var r=e.apply(i,t);return u.removeChild(n),r}},f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),p=function(e){return e.replace(/^d/,"___$&").replace(f,"___")};i.set=c(function(e,t,n){return t=p(t),void 0===n?i.remove(t):(e.setAttribute(t,i.serialize(n)),e.save(a),n)}),i.get=c(function(e,t,n){t=p(t);var r=i.deserialize(e.getAttribute(t));return void 0===r?n:r}),i.remove=c(function(e,t){t=p(t),e.removeAttribute(t),e.save(a)}),i.clear=c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(a)}),i.getAll=function(e){var t={};return i.forEach(function(e,n){t[e]=n}),t},i.forEach=c(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,o=0;n=r[o];++o)t(n.name,i.deserialize(e.getAttribute(n.name)))})}try{var h="__storejs__";i.set(h,h),i.get(h)!=h&&(i.disabled=!0),i.remove(h)}catch(d){i.disabled=!0}return i.enabled=!i.disabled,i})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=i(r),a=e("md5"),s=i(a),u=e("store"),l=i(u),d=e("./util.js"),c={},f=/(\/\w+\.m3u8$)/g,p=o["default"].getComponent("Tip"),h=function(e,t){var n=e.currentSrc(),i=(0,s["default"])(n.replace(f,"")),r=void 0;e.on("ended",function(){r&&(clearInterval(r),l["default"].remove(i))}),e.one("canplay",function(t,n){r=setInterval(function(){var t=parseInt(e.currentTime());l["default"].set(i,t)},1e3);var o=parseInt(l["default"].get(i));if(o){e.currentTime(o);var a=new p(null,{id:"rememberPosTip",className:"remember-pos-tip",position:"left.bottom",innerHTML:'<span class="color-warning">'+(0,d.toHHMMSS)(o)+"</span>",autoClose:3,temporary:!0,clickableText:""});e.addChild(a,null,10),setTimeout(function(){a.open()},0),a.on("tip.click",function(){e.currentTime(0),a.close()})}})},m=function(e){var t=this;this.ready(function(){h(t,o["default"].mergeOptions(c,e))})};o["default"].plugin("prompt",m),m.VERSION="__VERSION__",n["default"]=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util.js":7,md5:4,store:5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),r=t-3600*n-60*i;n<10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r);var e="n+":"+i+":"+r;return" e};n.tohhmmss="i},{}]},{},[6])(6)}),!function(e){if("object"==typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" !="typeof" window?window:"undefined"!="typeof" global?global:"undefined"!="typeof" self?self:this,t.videojsresswitcher="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" u="function" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" l="new" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" d="n[a]={exports:{}};t[a][0].call(d.exports,function(e){var" n="t[a][1][e];return" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" o="function" require&&require,a="0;a<i.length;a++)r(i[a]);return" r}({1:[function(e,t,n){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./LevelHandler"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.listenevents(),i}return="" a(t,e),s(t,[{key:"listenevents",value:function(){var="" this.levels;var="" t="0;t<e.length;t++){var" this.levels.sort(this.compareresolutions),this.initorigiallevelmap(),this.levels}},{key:"getcurrentlevelindex",value:function(){var="" this.origiallevelmap[e]}},{key:"initorigiallevelmap",value:function(){this.origiallevelmap="{};for(var" this.levels?this.levels:(this.initlevels(),this.levels)}},{key:"getcurrentlevelindex",value:function(){return="" this.player.tech_.hls.playlists.media_.levelindex}},{key:"initlevels",value:function(){var="" e.attributes.bandwidth&&t.attributes.bandwidth?+t.attributes.bandwidth-+e.attributes.bandwidth:0}),this.levels="[];for(var" t}}]),t}(l["default"]);n["default"]="d},{"./LevelHandler":3}],3:[function(e,t,n){"use" i(e,t){if(!(e="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" r="function(){function" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="function(){function" e(t,n){i(this,e),this.player="t,this.currentLevelIndex=0,this.levels=void" 0,this.bestlevel="{index:0}}return" r(e,[{key:"getlevels",value:function(){return="" this.levels}},{key:"getcurrentlevelindex",value:function(){return="" this.currentlevelindex}},{key:"chosebestlevel",value:function(e){this.getlevels();for(var="">=this.levels[n].bitrate&&(t=this.levels[n]);this.bestLevel=t}},{key:"compareResolutions",value:function(e,t){return e.res&&t.res?+t.res-+e.res:0}}]),e}();n["default"]=o},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./LevelHandler"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" a="i;return" i.player.on("loadedmetadata",function(e){a.player.trigger("resloadedplaylist")}),i}return="" a(t,e),s(t,[{key:"switchlevel",value:function(e){var="" t="this.player.currentTime();this.player.src(this.levels[e].src),this.player.currentTime(t),this.currentLevelIndex=e}},{key:"init",value:function(e){if(this.levels=[],e.srcs){for(var" n="{src:e.srcs[t].src,label:e.srcs[t].label,type:"video/mp4",res:777+t};this.levels.push(n)}this.levels.sort(this.compareResolutions),this.levels.length">0&&(this.currentLevelIndex=0,this.player.src(this.levels[0].src))}}}]),t}(l["default"]);n["default"]=d},{"./LevelHandler":3}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==i){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function" d(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" null="==r?void" 0:d(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},u="videojs.getComponent("ModalDialog"),l=function(e){function" t(e,n){return="" i(this,t),r(this,(t.__proto__||object.getprototypeof(t)).call(this,e,n))}return="" o(t,e),a(t,[{key:"open",value:function(){return="" this.opened_||(this.player(),this.trigger("beforemodalopen"),this.opened_="!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",videojs.bind(this,this.handleKeyPress)),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0),this}},{key:"close",value:function(){if(this.opened_){var" e="this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",videojs.bind(this,this.handleKeyPress)),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return" this}},{key:"buildcssclass",value:function(){return"plugin-prompt="" "+s(t.prototype.__proto__||object.getprototypeof(t.prototype),"buildcssclass",this).call(this)}}]),t}(u);n["default"]="l},{}],6:[function(e,t,n){(function(t){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" m(e,t,n){null="==e&&(e=Function.prototype);var" 0:m(r,t,n)}if("value"in="" 0},l="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" t?t.videojs:null,d="i(l),c=e("./ResolutionMenuItem"),f=i(c),p=d["default"].getComponent("MenuButton"),h=function(e){function" t(e,n){r(this,t);var="" d["default"].appendcontent(i.el(),i.label),i.listenevents(),i}return="" a(t,e),s(t,[{key:"buildcssclass",value:function(){return"vjs-resolution-button="" "+u(t.prototype.__proto__||object.getprototypeof(t.prototype),"buildcssclass",this).call(this)}},{key:"listenevents",value:function(){var="" t="this.menuItems[e];t.addClass("vjs-selected"),t.label.innerHTML=t.options_.labelName}},{key:"unsetAllItems",value:function(){for(var" f["default"](this.player_,{label:"<a=""><span>"+e[i].label+"</span>",labelName:e[i].label,levelIndex:i,isSelect:r},function(e){n.switchLevel(this.player_,e)},this.label))}return 1!==e.length&&this.menuItems.push(new f["default"](this.player_,{label:"<a><span></span></a>",labelName:"",levelIndex:n.bestLevel.index,isSelect:!1},function(e){n.switchLevel(this.player_,n.bestLevel.index)},this.label)),this.menuItems}}]),t}(p);n["default"]=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ResolutionMenuItem":7}],7:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,u="t(s),l=u["default"].getComponent("MenuItem"),d=function(e){function" t(e,n,o,a){i(this,t);var="" s="r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return" s.onclicklistener="o,s.label=a,s.on("click",s.onClick),s.on("touchstart",s.onClick),n.isSelect&&s.addClass("vjs-selected"),s}return" o(t,e),a(t,[{key:"onclick",value:function(){this.onclicklistener(this.options_.levelindex)}}]),t}(l);n["default"]="d}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],8:[function(e,t,n){(function(t){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" r="undefined" t?t.videojs:null,o="i(r),a=e("./ResolutionMenuButton"),s=i(a),u=e("./Mp4LevelHandler"),l=i(u),d=e("./H5HlsLevelHandler"),c=i(d),f=e("./FlashHlsLevelHandler"),p=i(f),h=e("./PromptModalDialog.js"),m=i(h),y={},v=4e3,g=null,_=!0,b=!1,w=void" 0,x="void" 0,o="0,T=0,k="",S=!1,j={totalSize:0,url:"",count:0},C=6,E=function(e,t){S=e.options_.statsInfo,k=e.currentSrc(),e.addClass("vjs-resolution-switcher");var" n="D(e,t),i=void" 0;e.on("resloadedplaylist",function(){i="L(e,n)}),e.on("waiting",function(){g=setTimeout(function(){P(e,i)},v)}),e.on("playing",function(){g&&clearTimeout(g)}),e.on("reslevelswitch",function(t,n){if(!_||!I(e)){b=!0;var" a="{levelName:i.menuItems[n.levelIndex].options_.labelName};e.trigger("levelswitch",a)}}),e.on("reslevelswitched",function(t,n){if(_&&I(e))return" void(_="!1);if(b){var" class="plugin-prompt-highlight">'+r.options_.labelName+""});w=M(w,a,e,5e3),b=!1;var s={levelName:r.options_.labelName};e.trigger("levelswitched",s)}}),e.on("resnetworkspeed",function(t,n){if(U(n))j.count++,j.totalSize+=n.size,j.url=n.url,j.count%10===0&&R();else{if(O<5){var r="{speed:n.speed,size:n.size,url:n.url};B("",r),O++}n.speed<150&&P(e,i)}k=n.url,e.trigger("networkspeed",n)}),e.on("ended",function(e){R()})},P=function(e,t){if(T<5){var" n="parseInt(e.currentTime()),i={url:k,blockTime:n};B("blockStats",i),T++}var" a="e.bufferedEnd()-e.currentTime();if(a">C)return;var s=t.menuItems[r].options_.labelName,u=o["default"].createEl("span",{className:"plugin-prompt-content",innerHTML:'<span class="plugin-prompt-highlight">'+s+"</span>"}),l=o["default"].createEl("a",{className:"plugin-prompt-link",innerHTML:""});o["default"].on(l,"click",function(n){t.switchLevel(e,r),x.close()}),o["default"].appendContent(u,l),x=M(x,u,e,5e3)}},A=function(e){return void 0!==e&&e.opened_},M=function(e,t,n,i){var r=n.options_.plugin_prompt,o=n.getChildById(r);return void 0!==o&&o.close(),void 0!==e&&e.close(),e=new m["default"](n),n.addChild(e),e.content(t),e.open(),i!=-1&&n.setTimeout(function(){e.close()},i),e},L=function(e,t){e.controlBar.resolutionSwitcher&&(e.controlBar.resolutionSwitcher.dispose(),delete e.controlBar.resolutionSwitcher);var n=new s["default"](e,{levelHandler:t});return e.controlBar.addChild(n,{},8),e.options_.disableResolutionSwitcher&&o["default"].addClass(n,"vjs-hidden"),n},I=function(e){return e.tech_.el().vjs_getProperty},D=function(e,t){return I(e)?new p["default"](e,t):e.tech_.hls?new c["default"](e,t):new l["default"](e,t)},B=function(e,t){if(S){var n=e?e:"segStats";t.type=n;var i=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),r="//service-stats.qiqiuyun.net/video_player?"+i;o["default"].xhr({body:JSON.stringify(t),url:r},function(e,t,n){})}},U=function(e){return e.speed>1e4||e.loadingTime<50},r=function(){if(j.totalsize>0){var e={size:j.totalSize,url:j.url,source:"desktop"};B("cacheStats",e),j.totalSize=0,j.url=""}},N=function(e){var t=this;this.ready(function(){E(t,o["default"].mergeOptions(y,e))})};o["default"].plugin("resolutionSwitcher",N),N.VERSION="__VERSION__",n["default"]=N}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./FlashHlsLevelHandler":1,"./H5HlsLevelHandler":2,"./Mp4LevelHandler":4,"./PromptModalDialog.js":5,"./ResolutionMenuButton":6}]},{},[8])(8)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.VideojsBackward=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return 0="==i){var" r}({1:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" i="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,r="t(i),o={playbackSeconds:10},a=r["default"].getComponent("Button"),s=function(e,t){var" n="r["default"].extend(a,{handleClick:function(n){e.currentTime(e.currentTime()-t.playbackSeconds),e.clearPromptClass(),e.addClass("vjs-10s-backward")}}),i=new" n(e);r["default"].addclass(i.el(),"vjs-icon-replay"),i.controltext(""+t.playbackseconds+""),e.controlbar.el().insertbefore(i.el(),e.controlbar.getchild("currenttimedisplay").el())},u="function(e){var" t="this;this.ready(function(){s(t,r["default"].mergeOptions(o,e))})};r["default"].plugin("playback",u),u.VERSION="1.0.0",n["default"]=u}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}]},{},[1])(1)}),!function(e){if("object"="=typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" window?window:"undefined"!="typeof" self?self:this,t.videojsbulletscreen="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" u="function" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" l="new" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" d="n[a]={exports:{}};t[a][0].call(d.exports,function(e){var" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" o="function" require&&require,a="0;a<i.length;a++)r(i[a]);return" r}({1:[function(e,t,n){(function(t){"use="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" t(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" 0:t(r,t,n)}if("value"in="" i)return="" i.value;var="" void="" 0!="=o?o.call(n):void" 0},l="undefined" t?t.videojs:null,d="i(l),c=e("./bullet.js"),f=i(c),p=e("./slide-left-bullet.js"),h=i(p),m=e("./util/search-bullet.js"),y=(i(m),e("./util/bullet-engine.js")),v=(i(y),e("./bullet-pool.js")),g=i(v),_=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,b=window.cancelAnimationFrame||window.mozCancelAnimationFrame,w=d["default"].getComponent("Component"),x="vjs-plugin-bulletscreen",O=function(e){function" t(e,n){r(this,t);var="" i.bullets="n.bullets,i.opened=n.open,i.height=n.height-120,f["default"].calculateLevelsNum(i.height),i.bulletPool=new" g["default"](i),i.bulletengine="n.bulletEngine,i.contentEl_=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",i).call(i,"div",{className:x+"-content"},{role:"document",height:i.height}),i.el_.appendChild(i.contentEl_),i.on("bulletscreen.close",function(){i.close()}),i.on("bulletscreen.open",function(){i.open()}),i.on("click",function(){e.paused()?e.play():e.pause()}),i.on(e,"pause",function(){i.pause()}),i.on(e,"play",function(){i.play()}),i.on(e,"ended",function(){i.play()}),i.on(e,"seeked",function(){i.reset()}),i.on(e,"bullet.container.ready",function(){i.width=i.width()}),i.on(e,"timeupdate",function(){var" h["default"](e,t))},1e3*r)})}),i.opened&&i.update(),i}return="" a(t,e),s(t,[{key:"createel",value:function(){return="" u(t.prototype.__proto__||object.getprototypeof(t.prototype),"createel",this).call(this,"div",{classname:this.buildcssclass()},{role:"container"})}},{key:"buildcssclass",value:function(){return="" x}},{key:"addbullet",value:function(e,t){this.bulletpool.add(new="" h["default"](this.player_,{containerwidth:this.width,content:e,isself:!0,extra:{isteacher:t}}))}},{key:"open",value:function(){void="" this.reset()}},{key:"close",value:function(){void="" this.clear()}},{key:"pause",value:function(){b(this.reqid),this.reqid="null}},{key:"play",value:function(){this.reqId||this.update()}},{key:"clear",value:function(){this.contentEl_.innerHTML="",this.bulletPool.clear(),f["default"].resetLevels(),b(this.reqId),void(this.reqId=null)}},{key:"update",value:function(){var" e="this;this.bulletPool.update(),this.reqId=_(function(){e.update()})}},{key:"reset",value:function(){this.clear(),this.update()}}]),t}(w);n["default"]=O}).call(this,"undefined"!=typeof" window?window:{})},{".="" bullet-pool.js":2,".="" bullet.js":3,".="" slide-left-bullet.js":9,".="" util="" bullet-engine.js":10,".="" search-bullet.js":11}],2:[function(e,t,n){(function(e){"use="" i(e,t){if(!(e="" r(e,t){if(!e)throw="" o(e,t){if("function"!="typeof" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined" e?e.videojs:null,u="t(s),l=u["default"].getComponent("Component"),d=function(e){function" t(e){i(this,t);var="" n.container="e,n.pool={},n.prepool=[],n}return" o(t,e),a(t,[{key:"add",value:function(e){var="" delete="" t.pool[n.id]})}},{key:"clear",value:function(){this.pool="{}}},{key:"update",value:function(){for(var" in="" this.pool)this.pool[e].update()}}]),t}(l);n["default"]="d}).call(this,"undefined"!=typeof" window?window:{})},{}],3:[function(e,t,n){(function(e){"use="" }object.defineproperty(n,"__esmodule",{value:!0});var="" g(e,t,n){null="==e&&(e=Function.prototype);var" 0:g(r,t,n)}if("value"in="" 0},u="undefined" e?e.videojs:null,l="t(u),d=l["default"].getComponent("Component"),c="bullet-item",f=0,p=0,h=[],m=function(){var" h[t]++,t},y="function(e){h[e]--},v=function(e){function" t(e,n){i(this,t);var="" o.id="f++,o.levelNum=m(),o.style={display:"inline-block",visibility:"hidden",top:30*o.levelNum+"px","font-size":"20px","text-shadow":"-1px" -1px="" #000,1px="" #000,-1px="" 1px="" #000"},o.time="n.time,o.content=n.content,o.containerWidth=n.containerWidth,o.el_=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",o).call(o,"span",{className:o.buildCSSClass(),innerHTML:o.content,style:o.getStyle()}),o.on("mouseover",function(){o.handleMouseover()}),o.on("mouseout",function(){o.handleMouseout()}),o.on("click",function(e){o.handleClick(e)}),o.on("bullet.added",function(){o.css=window.getComputedStyle(o.el_),o.style.width=o.css.width,o.style.right=-parseInt(o.style.width)+"px",o.style.visibility="visible",o.el_.setAttribute("style",o.getStyle())}),o.on("bullet.show",function(e,t){y(o.levelNum)}),o}return" o(t,e),a(t,[{key:"buildcssclass",value:function(){var="" c+"="" "+e+"="" "+t}},{key:"getstyle",value:function(){var="" ;for(var="" this.style)e+="t+":" "+this.style[t]+";";return="" e}},{key:"update",value:function(){throw="" error("bullet:="" this.show()="" is="" virtual="" method,it="" extend="" by="" sub-class!")}},{key:"handlemouseover",value:function(){void(this.handup="!0)}},{key:"handleMouseout",value:function(){void(this.handup=!1)}},{key:"handleClick",value:function(e){void" e.stoppropagation()}},{key:"checktodispose",value:function(){}}],[{key:"resetlevels",value:function(){h="[];for(var">=0;e--)h.push(0)}},{key:"calculateLevelsNum",value:function(e){p=parseInt(e/30);for(var t=p;t>0;t--)h.push(0)}}]),t}(d);n["default"]=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==i){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function" f(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" null="==r?void" 0:f(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},u="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,l="t(u),d=l["default"].getComponent("Button"),c=function(e){function" t(e,n){i(this,t);var="" o.opened="n.open,o.on("mouseover",function(){o.handleMouseover()}),o.on("mouseout",function(){o.handleMouseout()}),o}return" o(t,e),a(t,[{key:"buildcssclass",value:function(){return"vjs-bulletscreen-toggle="" open "+s(t.prototype.__proto__||object.getprototypeof(t.prototype),"buildcssclass",this).call(this)}},{key:"handleclick",value:function(){void(this.opened?this.close():this.open())}},{key:"handlemouseover",value:function(){this.controltextel_.style.display="block" }},{key:"handlemouseout",value:function(){this.controltextel_.style.display="none" }},{key:"open",value:function(){this.removeclass("close"),this.addclass("open"),this.opened="!this.opened,this.player_.trigger("bullet.open")}},{key:"close",value:function(){this.removeClass("open"),this.addClass("close"),this.opened=!this.opened,this.player_.trigger("bullet.close")}}]),t}(d);c.prototype.controlText_="",l["default"].registerComponent("BulletscreenToggle",c),n["default"]=c}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],5:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" r(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" n="0;n<t.length;n++){var" p(e,t,n){null="==e&&(e=Function.prototype);var" 0:p(r,t,n)}if("value"in="" o.enabled="n.enable,o.on(o.disableContentEl,"click",o.handleClick),o.on(o.contentEl_,"input",o.handleValuechange),o}return" o(t,e),a(t,[{key:"buildcssclass",value:function(){var="" e="this.options_.enable?"enable":"disable";return"qqy-bullet-input-box" "+e}},{key:"createel",value:function(){return="" this.el_="s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()}),this.contentEl_=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"input",{className:""},{placeholder:c}),this.ruleEl=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"a",{className:"bullet-rule",innerHTML:""},{href:this.options_.bulletRuleLink,target:"_blank"}),this.disableContentEl=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"qqy-bullet-disable-content",innerHTML:this.options_.disableContent}),this.el_.appendChild(this.contentEl_),this.el_.appendChild(this.disableContentEl),this.el_.appendChild(this.ruleEl),this.el_}},{key:"handleClick",value:function(){this.player_.trigger("bullet.sendWindow.disableClick")}},{key:"handleValuechange",value:function(){this.contentEl_.value.length">72&&(this.contentEl_.value=this.contentEl_.value.substring(0,72)),this.contentEl_.value!==this.value&&(this.value=this.contentEl_.value,this.trigger("inputBox.valuechange",{value:this.value}))}},{key:"enable",value:function(){this.removeClass("disable"),this.addClass("enable"),this.enabled=!0,void this.trigger("inputBox.enable")}},{key:"disable",value:function(){this.enabled=!1,this.removeClass("enable"),this.addClass("disable"),void this.trigger("inputBox.disable")}},{key:"empty",value:function(){this.contentEl_.value="",this.value="",void this.contentEl_.focus()}}]),t}(d);l["default"].registerComponent("InputBox",f),n["default"]=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=i(r),a=e("./bullet-container.js"),s=i(a),u=e("./bulletscreen-toggle.js"),l=(i(u),e("./send-window.js")),d=i(l),c=e("./send-button.js"),f=(i(c),e("./input-box.js")),p=(i(f),e("./util/bullet-engine.js")),h=i(p),m={open:!0,enable:!1,disableContent:'<span style="color: red;"></span>',bulletRuleLink:"http://www.baidu.com"},y=function(e,t){var n=e.options(),i=e.bulletEngine=new h["default"](n),r=parseInt(window.getComputedStyle(document.body,null).getPropertyValue("height")),o=new s["default"](e,{id:"bullet",bulletEngine:i,height:r,open:t.open});e.addChild(o),e.trigger("bullet.container.ready"),e.controlBar.addChild("bulletscreenToggle",{open:t.open},-1);var a=new d["default"](e,{id:"sendWindow",open:t.open,enable:t.enable,children:{sendButton:{id:"sendButton",enable:t.enable},inputBox:{id:"inputBox",enable:t.enable,disableContent:t.disableContent,bulletRuleLink:t.bulletRuleLink}}}),u=a.getChild("sendButton");o.on(a,"sendWindow.submit",function(e,t){i.addData(t,function(e){u.count()}),o.addBullet(t.content,n.user.isTeacher)}),e.addChild(a,{id:"sendWindow"},-1),e.on("bullet.open",function(){o.open(),a.show()}),e.on("bullet.close",function(){o.close(),a.hide()})},v=function(e){var t=this;this.ready(function(){y(t,o["default"].mergeOptions(m,e))})};o["default"].plugin("bulletscreen",v),v.VERSION="1.0.0",n["default"]=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bullet-container.js":1,"./bulletscreen-toggle.js":4,"./input-box.js":5,"./send-button.js":7,"./send-window.js":8,"./util/bullet-engine.js":10}],7:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==i){var" 5="==t?(e.html(""),e.enable(),void" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function" p(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" null="==r?void" 0:p(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},u="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,l="t(u),d=l["default"].getComponent("Button"),c=5,f=function(e){function" t(e,n){i(this,t);var="" o.enabled="n.enable,o}return" o(t,e),a(t,[{key:"buildcssclass",value:function(){return="" this.options_.enable?"enable":"disable"}},{key:"createel",value:function(){return="" s(t.prototype.__proto__||object.getprototypeof(t.prototype),"createel",this).call(this,"button",{classname:"qqy-bullet-send-button="" "+this.buildcssclass(),innerhtml:""})}},{key:"enable",value:function(){this.enabled="!0,this.removeClass("disable"),this.addClass("enable"),this.off("click"),this.on("click",this.handleClick)}},{key:"disable",value:function(){this.enabled=!1,this.removeClass("enable"),this.addClass("disable"),this.off("click")}},{key:"handleClick",value:function(){this.enabled&&void" this.trigger("sendbutton.submit")}},{key:"count",value:function(){var="" e="this,t=0,n=setInterval(function(){return" clearinterval(n)):(e.html(c-t),void="" t++)},1e3)}},{key:"html",value:function(e){this.el().innerhtml="e}}]),t}(d);l["default"].registerComponent("SendButton",f),n["default"]=f}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}],8:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" r(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" n="0;n<t.length;n++){var" f(e,t,n){null="==e&&(e=Function.prototype);var" 0:f(r,t,n)}if("value"in="" o.opened="n.open,o.inputBox=o.getChildById("inputBox"),o.sendButton=o.getChildById("sendButton"),o.inputBox.on(o.sendButton,"sendButton.submit",function(){o.inputBox.empty()}),o.on(o.inputBox,"inputBox.valuechange",function(e,t){o.value=t.value}),o.on(o.sendButton,"sendButton.submit",function(){o.value&&(o.trigger("sendWindow.submit",{content:o.value,playTime:e.currentTime(),extra:{}}),o.sendButton.disable(),o.value="")}),o.on("mousemove",function(){window.clearTimeout(o.timer),o.el_.style.opacity="1"}),o.on("mouseleave",function(){o.delayHidden()}),o.delayHidden(),o}return" o(t,e),a(t,[{key:"createel",value:function(){return="" s(t.prototype.__proto__||object.getprototypeof(t.prototype),"createel",this).call(this,"div",{classname:"qqy-bullet-send-window="" "+this.buildcssclass()},{role:"group"})}},{key:"buildcssclass",value:function(){return="" this.options_.open?"":"vjs-hidden"}},{key:"enable",value:function(){this.inputbox.enable(),this.sendbutton.enable()}},{key:"disable",value:function(){this.inputbox.disable(),this.sendbutton.disable()}},{key:"show",value:function(){this.el_.style.opacity="1" ,s(t.prototype.__proto__||object.getprototypeof(t.prototype),"show",this).call(this),this.delayhidden()}},{key:"delayhidden",value:function(){var="" window?window:{})},{}],9:[function(e,t,n){"use="" i(e){return="" r(e,t){if(!(e="" o(e,t){if(!e)throw="" a(e,t){if("function"!="typeof" s="function(){function" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./bullet.js"),l=i(u),d=2,c=function(){var" d+e},f="function(e){function" t(e,n){r(this,t);var="" i.type="slide-left" ,i.speed="c(),i}return" a(t,e),s(t,[{key:"update",value:function(){if(!this.handup){var="">this.containerWidth)return this.trigger("remove",{id:this.id}),void this.dispose();e>0&&(this.trigger("bullet.show"),this.off("bullet.show")),this.style.right=e+"px",this.el_.style=this.getStyle()}}}]),t}(l["default"]);n["default"]=f},{"./bullet.js":3}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==r?{}:r;if(!this.options.user.id)throw" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="http://124.160.104.76:10021/videos/{resourceId}/barrages" ,a="function(){function" e(t){i(this,e),this.options="t,this.bulletsArray={},this.lastSec=-1,this.requestFileList()}return" r(e,[{key:"getbullets",value:function(e){var="" t="parseInt(e,10);if(this.lastSec!==t)return" this.lastsec="t,this.bulletsArray[this.lastSec]}},{key:"requestFileList",value:function(){var" e="this,t=videojs.xhr(this.apiUrl,{method:"GET"},function(){var" n="JSON.parse(t.response);e.handleFileListRecived(n)})}},{key:"handleFileListRecived",value:function(e){var" new="" error("user="" id="" can="" not="" be="" 0(int)!");var="" a="videojs.xhr(this.apiUrl,{method:"POST",data:JSON.stringify({mediaId:this.options.resourceId,clientId:this.options.user.id,content:n,playTime:i,extra:o})},function(){var" o.replace(="" {resourceid}="" ,this.options.resourceid)+("?token="+this.options.user.authToken)}}]),e}();n[" default"]="a},{}],11:[function(e,t,n){"use" strict";object.defineproperty(n,"__esmodule",{value:!0}),n["default"]="function(e,t){var" o="t.filter(r);return!!o.length&&{secNum:i,bullets:o}};var">=i&&parseInt(e.time)<i+1;return t}},{}]},{},[6])(6)}),!function(e){if("object"="=typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" !="typeof" window?window:"undefined"!="typeof" global?global:"undefined"!="typeof" self?self:this,t.videojsexam="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" u="function" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" l="new" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" d="n[a]={exports:{}};t[a][0].call(d.exports,function(e){var" n="t[a][1][e];return" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" o="function" require&&require,a="0;a<i.length;a++)r(i[a]);return" r}({1:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" r(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,u="t(s),l=u["default"].getComponent("ModalDialog"),d=function(e){function" t(e,n){return="" i(this,t),r(this,(t.__proto__||object.getprototypeof(t)).call(this,e,n))}return="" o(t,e),a(t,[{key:"open",value:function(){return="" this.opened_||(this.player(),this.trigger("beforemodalopen"),this.opened_="!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",u["default"].bind(this,this.handleKeyPress)),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0),this}},{key:"close",value:function(){if(this.opened_){var" e="this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",u["default"].bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return" this}},{key:"closeneedpaused",value:function(){if(this.opened_){var="" this}}]),t}(l);n["default"]="d}).call(this,"undefined"!=typeof" self?self:"undefined"!="typeof" window?window:{})},{}],2:[function(e,t,n){"use="" i(e){return="" r(e,t){if(!(e="" o(e,t){if(!e)throw="" a(e,t){if("function"!="typeof" s="function(){function" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseModalDialog"),l=i(u),d=function(e){function" t(e,n,i){r(this,t);var="" a.exam="n.exam,a.exam_index=n.currentIndex,a.exam_count=n.count,a.exam_hasNextExam=n.hasNextExam,a._initDialog(),a}return" a(t,e),s(t,[{key:"_initdialog",value:function(){this.exam_content="videojs.createEl("ul",{className:"popup-topic" topic-content"}),this.frame_body.appendchild(this.exam_content);var="" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: '+e+'%;"><div class="tootip"><div class="tootip-content">'+this.exam_index+"/"+this.exam_count+"</div></div>"}),this.frame_bottom.appendChild(this.bottom_progress),this.bottom_content=videojs.createEl("div",{className:"topic-bottom-info"})}},{key:"_initConent",value:function(){this._createExamContent(),this._createExamBottom()}},{key:"_createExamBottom",value:function(){this._createConfirmOrAnalysisBtn(),this._createAnwserPrompt(),this.bottom_content.appendChild(this.exam_confirmOrAnalysisButton),this.bottom_content.appendChild(this.exam_analysisButton),this.frame_bottom.appendChild(this.bottom_content)}},{key:"_createConfirmOrAnalysisBtn",value:function(){this.exam_confirmOrAnalysisButton=videojs.createEl("a",{className:"btn btn-primary"}),this.exam_analysisButton=videojs.createEl("a",{className:"btn btn-link",innerHTML:""}),videojs.addClass(this.exam_analysisButton,"vjs-hidden"),this.isExamFinished(this.exam)?(this._setAnalysisBtn(),this._setConfirmBtn()):(this.exam_confirmOrAnalysisButton.innerHTML="",this.exam_confirmOrAnalysisButton.setAttribute("disabled","disabled"))}},{key:"_createAnalysisContent",value:function(){videojs.emptyEl(this.exam_content),videojs.removeClass(this.exam_content,"topic-choosed"),videojs.addClass(this.exam_content,"topic-resolve");var e=""==this.exam.analysis.trim()?"":this.exam.analysis;this.exam_content.innerHTML='<li class="title"><span class="num">'+this.exam.innerId+'</span><div class="info">'+this.exam.question+'</div></li><li class="list "><div class="info">'+e+"</div></li>"}},{key:"_setAnalysisBtn",value:function(){var e=this;videojs.removeClass(this.exam_content,"topic-choose"),videojs.addClass(this.exam_content,"topic-choosed"),this.exam_analysisButton.innerHTML="",""!=this.exam.analysis.trim()&&videojs.removeClass(this.exam_analysisButton,"vjs-hidden"),videojs.one(this.exam_analysisButton,"click",function(){e._createAnalysisContent(),e._setBacktoExamBtn()})}},{key:"_setConfirmBtn",value:function(){var e=this;this.isExamFinished(this.exam)?!function(){var t=e;e.exam_confirmOrAnalysisButton.innerHTML=1!=e.exam_count&&e.exam_hasNextExam?"":"",videojs.one(e.exam_confirmOrAnalysisButton,"click",function(){t.trigger("nextExam")})}():this.exam_confirmOrAnalysisButton.innerHTML=""}},{key:"_setBacktoExamBtn",value:function(){var e=this;""!=this.exam.analysis.trim()&&videojs.removeClass(this.exam_analysisButton,"vjs-hidden"),this.exam_analysisButton.innerHTML="",videojs.one(this.exam_analysisButton,"click",function(){e._createExamContent(),e._setAnalysisBtn()})}},{key:"isExamFinished",value:function(e){var t=e.result;return void 0!==t&&void 0!==t.choosed&&void 0!==t.result}},{key:"_checkAnwserIsRight",value:function(){var e=this.exam_selected_anwser.join(","),t=this.exam.answer.join(",");return e==t}},{key:"_checkChoiceIsInExpectedAnwsers",value:function(e){return this.exam.answer.indexOf(e)!==-1}},{key:"_checkChoiceIsInActualAnwsers",value:function(e){return this.exam_selected_anwser.indexOf(e)!==-1}},{key:"_createAnwserPrompt",value:function(){if(!(this.exam_selected_anwser.length<=0)){for(var e="this.exam.answer,t=this._checkAnwserIsRight(),n=t?"success":"danger",i='<span" class="color-'+n+'">'+(t?"":"")+'<span class="color-success">'+this._formatAnswer(e.join(""))+"</span>",r=0;r<this.exam_selected_anwser.length;r++){var o="this._checkChoiceIsInExpectedAnwsers(this.exam_selected_anwser[r]);n=o?"success":"danger",i+='<span" class="color-'+n+'">'+this._formatAnswer(this.exam_selected_anwser[r])+""}this.bottom_content.innerHTML=i,this.bottom_content.appendChild(this.exam_confirmOrAnalysisButton),this.bottom_content.appendChild(this.exam_analysisButton)}}},{key:"_formatAnswer",value:function(e){return e}}]),t}(l["default"]);n["default"]=d},{"./BaseModalDialog":3}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var 0="==i){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" f(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" null="==r?void" 0:f(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},l="e("./BaseDialog"),d=i(l),c=function(e){function" t(e,n,i){r(this,t);var="" a="o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return" a._initframe(i),a}return="" a(t,e),s(t,[{key:"_initframe",value:function(e){this._initframeheader(e),this._initframebody(e),this._initframebottom(e),this.frame_="videojs.createEl("div",{className:"plugin-exampop-prompt-content"}),this.frame_.appendChild(this.frame_header),this.frame_.appendChild(this.frame_body),this.frame_.appendChild(this.frame_bottom),this.content(this.frame_)}},{key:"_initFrameHeader",value:function(e){this.frame_header=videojs.createEl("div",{className:"modal-header"}),this.frame_title=videojs.createEl("div",{className:"modal-title",innerHTML:e});var" t="this;if(!this.options_.disableCloseBtn){var" n="videojs.createEl("button",{className:"close",innerHTML:'<span" aria-hidden="true">&times;'},{type:"button","data-dismiss":"modal","aria-label":"Close"});videojs.on(n,"click",function(e){t.trigger("closeDialog")}),this.frame_header.appendChild(n)}this.frame_header.appendChild(this.frame_title)}},{key:"_initFrameBody",value:function(){this.frame_body=videojs.createEl("div",{className:"modal-body"})}},{key:"_initFrameBottom",value:function(){this.frame_bottom=videojs.createEl("div",{className:"topic-bottom"})}},{key:"buildCSSClass",value:function(){return"plugin-exampop-prompt "+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"open",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"open",this).call(this),this.player().trigger("examopen"),this.player().controls(!1),this.player().pause()}},{key:"close",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this),this.player().trigger("examclose"),this}},{key:"_close",value:function(){}}]),t}(d["default"]);n["default"]=c},{"./BaseDialog":1}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),a="e("./ExamContainer"),s=i(a),u=e("./ExamPromptModalDialog"),l=i(u),d=e("./ExamWarnModalDialog"),c=i(d),f=e("./ExamListModalDialog"),p=i(f),h=e("./ExamSingleChoiceModalDialog"),m=i(h),y=e("./ExamMultipleChoiceModalDialog"),v=i(y),g=e("./ExamUncertainChoiceModalDialog"),_=i(g),b=e("./ExamCompletionModalDialog"),w=i(b),x=e("./ExamJudgeModalDialog"),O=i(x),T=function(){function" e(t,n){r(this,e),this.player="t,this.examContainer=new" s["default"](n,{videoheaderlength:this.player.options_.videoheaderlength}),this.currentpromptdialog="void" 0,this.currentexamdialog="void" 0,this.warndialog="void" 0,this.examlistdialog="void" 0,this.examdialogbackto="player" ,this.lastexamdialog="[{key:"player"}]}return" o(e,[{key:"getexaminfo",value:function(){return="" this.examcontainer.popupexams}},{key:"showexampop",value:function(e){var="" t="this.examContainer.popupExams;t.questionTimeMap[e]&&(this.examContainer.currentExams=t.questionTimeMap[e].questions,this.examContainer.setExamsPopCount(e),this.initPromptDialog(),"strict"!=t.mode&&"middle"!=t.mode||t.questionTimeMap[e].isViewed||this.initExamDialog(),t.questionTimeMap[e].isViewed=!0)}},{key:"initPromptDialog",value:function(){void" 0!="=this.currentPromptDialog&&this.currentPromptDialog.close();var" e="this.examContainer.popupExams,t=this;this.currentPromptDialog=new" l["default"](this.player,{mode:e.mode,questioncurrentcount:this.examcontainer.examspopcount,questioncurrentexams:this.examcontainer.currentexams},function(){var="" 0,!0)}),this.player.addchild(this.currentpromptdialog),this.currentpromptdialog.open()}},{key:"initexamdialog",value:function(e,t){var="" n="this.examContainer.currentExams[this.examContainer.currentExamIndex],i=(n.innerId,this),r=this._getDisableCloseBtn(e,this.examContainer.popupExams.mode);void" m["default"](this.player,{exam:n,currentindex:this.examcontainer.currentexamindex+1,count:this.examcontainer.currentexams.length,disableclosebtn:r,hasnextexam:this._needshownextexam()})),"multichoice"="=n.type&&(this.currentExamDialog=new" v["default"](this.player,{exam:n,currentindex:this.examcontainer.currentexamindex+1,count:this.examcontainer.currentexams.length,disableclosebtn:r,hasnextexam:this._needshownextexam()})),"uncertainchoice"="=n.type&&(this.currentExamDialog=new" _["default"](this.player,{exam:n,currentindex:this.examcontainer.currentexamindex+1,count:this.examcontainer.currentexams.length,disableclosebtn:r,hasnextexam:this._needshownextexam()})),"judge"="=n.type&&(this.currentExamDialog=new" o["default"](this.player,{exam:n,currentindex:this.examcontainer.currentexamindex+1,count:this.examcontainer.currentexams.length,disableclosebtn:r,hasnextexam:this._needshownextexam()})),"completion"="=n.type&&(this.currentExamDialog=new" w["default"](this.player,{exam:n,currentindex:this.examcontainer.currentexamindex+1,count:this.examcontainer.currentexams.length,disableclosebtn:r,hasnextexam:this._needshownextexam()})),this.currentexamdialog.closeable(!1),this.currentexamdialog.on("closedialog",function(){i._closeexamdialog()}),this.currentexamdialog.on("answered",function(e,t){i.player.trigger("answered",t)}),this.currentexamdialog.on("nextexam",function(){i._needshownextexam()?(i.examcontainer.currentexamindex="(i.examContainer.currentExamIndex+1)%i.examContainer.currentExams.length,i.initExamDialog(void" 0,!0)):i._closeexamdialog()}),this.player.addchild(this.currentexamdialog),this.currentexamdialog.open()}},{key:"_needshownextexam",value:function(){var="" this.examcontainer.hasunfinishedexam()||!e}},{key:"_getdisableclosebtn",value:function(e,t){return="" e?!!e.disableclosebtn:"strict"="=t||"middle"==t}},{key:"_closeExamDialog",value:function(){this.examContainer.currentExamIndex=0,void" p["default"](this.player,{timeexamsmap:this.examcontainer.popupexams.questiontimemap});var="" c["default"](this.player),this.player.addchild(this.warndialog),this.warndialog.open())}}]),e}();n["default"]="T},{"./ExamCompletionModalDialog":5,"./ExamContainer":6,"./ExamJudgeModalDialog":7,"./ExamListModalDialog":8,"./ExamMultipleChoiceModalDialog":9,"./ExamPromptModalDialog":10,"./ExamSingleChoiceModalDialog":11,"./ExamUncertainChoiceModalDialog":12,"./ExamWarnModalDialog":13}],5:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseExamModalDialog"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.exam_options="[],i.exam_selected_anwser=[],i.isExamFinished(i.exam)&&(i.exam_selected_anwser=i.exam.result.choosed),i._initConent(),i}return" a(t,e),s(t,[{key:"_createexamcontent",value:function(){var="">('+t++ +")"});videojs.emptyEl(this.exam_content),this.exam_content.innerHTML='<li class="title"><span class="num">'+this.exam.innerId+'</span><div class="info">'+n+"</div></li>",videojs.addClass(this.exam_content,"topic-choose"),videojs.removeClass(this.exam_content,"topic-resolve"),this.anwserBoxs=[],this.anwserBoxLis=[];for(var i=0;i<this.exam.answer.length;i++){var r="i+1,o=videojs.createEl("li",{className:"fill",innerHTML:'<span" class="num">'+r+""}),a=videojs.createEl("input",{className:"form-control"},{type:"text","anwser-index":i,id:"anwserBox"+i});this.anwserBoxs.push(a),this.anwserBoxLis.push(o),o.appendChild(a),this.exam_content.appendChild(o)}if(!this.isExamFinished(this.exam))for(var s=0;s<this.anwserboxs.length;s++)videojs.on(this.anwserboxs[s],["propertychange","input"],function(){var t="e._getAttribute(this,"anwser-index");e.exam_selected_anwser[t]=this.value,e._handleSelectedAnwser(this)});if(this.isExamFinished(this.exam)){for(var" s="0;s<this.anwserBoxs.length;s++)this.anwserBoxs[s].value=this.exam_selected_anwser[s],videojs.setAttributes(this.anwserBoxs[s],{disabled:"disabled"});this._handleAnwserBoxStyle()}}},{key:"_handleSelectedAnwser",value:function(e){var" i="0;i<this.anwserBoxs.length;i++)videojs.setAttributes(this.anwserBoxs[i],{disabled:"disabled"});this._handleAnwserBoxStyle()}},{key:"_createAnwserPrompt",value:function(){if(!(this.exam_selected_anwser.length<=0)){var" e="(this.exam.answer,this._checkAnwserIsRight()),t=e?"success":"danger",n=this._getWrongItemIndexs(),i='<span" class="color-'+t+'">'+(e?"":"")+""+(n.length>0?'<span class="color-danger">'+n.join("")+"</span>":"");this.bottom_content.innerHTML=i,this.bottom_content.appendChild(this.exam_confirmOrAnalysisButton),this.bottom_content.appendChild(this.exam_analysisButton)}}},{key:"_getAttribute",value:function(e,t){return videojs.getAttributes(e)[t]}},{key:"_checkAnwserIsRight",value:function(){for(var e=!0,t=0;t<this.exam.answer.length;t++){for(var n="!1,i=0;i<this.exam.answer[t].length;i++)n=n||this.exam.answer[t][i]==this.exam_selected_anwser[t];e=e&&n}return" e}},{key:"_createanalysiscontent",value:function(){var="" e="1,t=this.exam.question.replace(/\[{2}(.+?)\]{2}/g,function(t){return'<span" class="fill-blank">('+e++ +")"});videojs.emptyEl(this.exam_content),videojs.removeClass(this.exam_content,"topic-choosed"),videojs.addClass(this.exam_content,"topic-resolve");var n=""==this.exam.analysis.trim()?"":this.exam.analysis;this.exam_content.innerHTML='<li class="title"><span class="num">'+this.exam.innerId+'</span><div class="info">'+t+'</div></li><li class="list "><div class="info">'+n+"</div></li>"}},{key:"_isAbleToSubmit",value:function(){if(this.exam_selected_anwser.length!=this.exam.answer.length)return!1;for(var e=0;e<this.exam_selected_anwser.length;e++)if(""==this.exam_selected_anwser[e].trim())return!1;return!0}},{key:"_handleanwserboxstyle",value:function(){for(var e="0;e<this.exam.answer.length;e++){for(var" t="!1,n=0;n<this.exam.answer[e].length;n++)t=t||this.exam.answer[e][n]==this.exam_selected_anwser[e];videojs.addClass(this.anwserBoxLis[e],t?"correct":"error")}}},{key:"_getWrongItemIndexs",value:function(){for(var" n="!1,i=0;i<this.exam.answer[t].length;i++)n=n||this.exam.answer[t][i]==this.exam_selected_anwser[t];n||e.push(t+1)}return" e}}]),t}(l["default"]);n["default"]="d},{"./BaseExamModalDialog":2}],6:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}object.defineproperty(n,"__esmodule",{value:!0});var="" o="function(){function" e(e,t){for(var="" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),a="e("./BaseModalDialog"),s=(i(a),function(){function" e(t,n){r(this,e),this.options="n,this.formatQuestions(t),this.examsPopCount=0,this.maxExamCount=this.popupExams.questions.length,this.currentExams=[],this.currentExamIndex=0}return" o(e,[{key:"setexamspopcount",value:function(e){this.popupexams.questiontimemap[e].isviewed||(this.examspopcount+="this.currentExams.length,this.examsPopCount">this.maxExamCount&&(this.examsPopCount=this.maxExamCount))}},{key:"formatQuestions",value:function(e){var t={},n={};e.questions.sort(function(e,t){var n=parseInt(e.time,10),i=parseInt(t.time,10);return n<i?-1:n>i?1:0});for(var i=0;i<e.questions.length;i++){var 0="=t.result)return!0}return!1}}]),e}());n["default"]=s},{"./BaseModalDialog":3}],7:[function(e,t,n){"use" r="e.questions[i];this.options.videoHeaderLength&&(r.time=parseInt(r.time,10)+parseInt(this.options.videoHeaderLength,10)),r.innerId=i+1,t[r.innerId]=r,n[r.time]||(n[r.time]={},n[r.time].questions=[]),n[r.time].questions.push(r),e.questions[i]}var" o="e.config.mode;switch(o){case"middle":e.mode="middle";break;case"loose":e.mode="loose";break;default:e.mode="strict"}e.questionIdMap=t,e.questionTimeMap=n,this.popupExams=e}},{key:"hasUnfinishedExam",value:function(){for(var" e="0;e<this.currentExams.length;e++){var" t="this.currentExams[e];if(this.currentExamIndex!=e&&void" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseExamModalDialog"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.exam_options="[],i.exam_selected_anwser=[],i.isExamFinished(i.exam)&&(i.exam_selected_anwser=i.exam.result.choosed),i._initConent(),i}return" a(t,e),s(t,[{key:"_createexamcontent",value:function(){var=""><span class="num">'+this.exam.innerId+'</span><div class="info">'+this.exam.question+"</div>",videojs.addClass(this.exam_content,"topic-choose"),videojs.removeClass(this.exam_content,"topic-resolve"),this.rightOptionLi=videojs.createEl("li",{className:"list",innerHTML:'<span class="num"><i class="iconfont icon-done"></i></span>'},{"data-value":"T"}),this.wrongOptionLi=videojs.createEl("li",{className:"list",innerHTML:'<span class="num"><i class="iconfont icon-close01"></i></span>'},{"data-value":"F"}),this.isExamFinished(this.exam)||(videojs.on(this.rightOptionLi,"click",function(){e.exam_selected_anwser=["T"],e._handleSelectedAnwser(this)}),videojs.on(this.wrongOptionLi,"click",function(){e.exam_selected_anwser=["F"],e._handleSelectedAnwser(this)})),this.exam_options.push(this.rightOptionLi),this.exam_options.push(this.wrongOptionLi),this.exam_content.appendChild(this.rightOptionLi),this.exam_content.appendChild(this.wrongOptionLi),this.isExamFinished(this.exam)){var t=this._getSelectedOption();this._handleAllOptionStyle(t,this.exam)}}},{key:"_handleSelectedAnwser",value:function(e){for(var t=0;t<this.exam_options.length;t++){var n="this.exam_options[t];videojs.toggleClass(n,"answer",!1)}videojs.toggleClass(e,"answer");var" i="this;this.exam_selected_anwser.length">0&&(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.removeAttribute("disabled"),videojs.one(this.exam_confirmOrAnalysisButton,"click",function(){i._submitAnwser(e)}))}},{key:"_submitAnwser",value:function(e){this._createAnwserPrompt(),this._handleAllOptionStyle(e,this.exam);for(var t=0;t<this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var n="{},i=this._checkAnwserIsRight();n.choosed=this.exam_selected_anwser,n.result=i?"right":"wrong",this.exam.result=n,this._setAnalysisBtn(),this._setConfirmBtn(),this.trigger("answered",this.exam)}},{key:"_handleAllOptionStyle",value:function(e,t){this._handleOptionStyle(e,t);for(var" o="this.exam_options[r],a=this._getAttribute(o,"data-value");n!=a&&i==a&&this._handleOptionStyle(o,t)}}},{key:"_handleOptionStyle",value:function(e,t){var" videojs.getattributes(e)[t]}},{key:"_formatanswer",value:function(e){return"t"="=e?"":""}}]),t}(l["default"]);n["default"]=d},{"./BaseExamModalDialog":2}],8:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function" =="typeof" symbol&&"symbol"="=typeof" symbol.iterator?function(e){return="" typeof="" e}:function(e){return="" e&&"function"="=typeof" symbol&&e.constructor="==Symbol&&e!==Symbol.prototype?"symbol":typeof" e},u="function(){function" e(e,t){for(var="" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),l="e("./BaseModalDialog"),d=i(l),c=function(e){function" t(e,n){r(this,t);var="" i.timeexamsmap="n.timeExamsMap,i._initConent(),i}return" a(t,e),u(t,[{key:"_initconent",value:function(){var="" e="this,t=videojs.createEl("ul",{className:"popup-topic" topic-list"}),n="this;for(var" in="" this.timeexamsmap){var="" r="this.timeExamsMap[i];if(r.isViewed)for(var">'+o.innerId+'<div class="info">'+s+'</div><div class="remask">'+e._toHHMMSS(o.time)+e._resultHtmlMap(o.result)+"</div>",t.appendChild(a)},a=0;a<r.questions.length;a++)o(a)}this.frame_body.appendchild(t)}},{key:"_close",value:function(){}},{key:"_resulthtmlmap",value:function(e){return e?"right"="=e.result||"partRight"==e.result?'<span" class="state"><i class="correct-icon"></i>':"wrong"==e.result?'<span class="state"><i class="error-icon"></i></span>':void 0:'<span class="state"></span>'}},{key:"_getQuestionStrByExam",value:function(e){if("completion"==e.type){var t=function(){var t=1;return{v:e.question.replace(/\[{2}(.+?)\]{2}/g,function(e){return'<span class="fill-blank">('+t++ +")</span>"})}}();if("object"===("undefined"==typeof t?"undefined":s(t)))return t.v}return e.question}},{key:"_toHHMMSS",value:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),r=t-3600*n-60*i;return n<10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r),n+":"+i+":"+r}}]),t}(d["default"]);n["default"]=c},{". basemodaldialog":3}],9:[function(e,t,n){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseExamModalDialog"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.exam_options="[],i.exam.answer.sort(),i.exam_selected_anwser=[],i.isExamFinished(i.exam)&&(i.exam_selected_anwser=i.exam.result.choosed),i._initConent(),i}return" a(t,e),s(t,[{key:"_createexamcontent",value:function(){var="" e="this;this.exam_options=[],videojs.emptyEl(this.exam_content),this.exam_content.innerHTML='<li"><span class="num">'+this.exam.innerId+'</span><div class="info">'+this.exam.question+"</div>",videojs.addClass(this.exam_content,"topic-choose"),videojs.removeClass(this.exam_content,"topic-resolve");for(var t=0;t<this.exam.options.length;t++){var n="this.exam.options[t],i='<span" class="num">'+n.option_key+""+n.option_val,r=videojs.createEl("li",{className:"list",innerHTML:i});this.isExamFinished(this.exam)||videojs.on(r,"click",function(){var t=this.children[0].innerHTML,n=e.exam_selected_anwser.indexOf(t);n==-1?e.exam_selected_anwser.push(t):e.exam_selected_anwser.splice(n,1),e.exam_selected_anwser.sort(),e._handleSelectedAnwser(this)}),this.exam_content.appendChild(r),this.exam_options.push(r)}if(this.isExamFinished(this.exam)){var o=this._getSelectedOptions();this._handleAllOptionStyle(o,this.exam)}}},{key:"_handleSelectedAnwser",value:function(e){videojs.toggleClass(e,"answer");var t=this;this.exam_selected_anwser.length>1?(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.removeAttribute("disabled"),videojs.one(this.exam_confirmOrAnalysisButton,"click",function(){t._submitAnwser()})):(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.setAttribute("disabled","disabled"))}},{key:"_submitAnwser",value:function(){this._createAnwserPrompt();var e=this._getSelectedOptions();this._handleAllOptionStyle(e,this.exam);for(var t=0;t<this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var 0="==i){var" n="{},i=this._checkAnwserIsRight();n.choosed=this.exam_selected_anwser,n.result=i?"right":"wrong",this.exam.result=n,this._setAnalysisBtn(),this._setConfirmBtn(),this.trigger("answered",this.exam)}},{key:"_handleAllOptionStyle",value:function(e,t){for(var" i="0;i<this.exam_options.length;i++){var" r="this.exam_options[i],o=r.children[0].innerHTML;!this._checkChoiceIsInActualAnwsers(o)&&this._checkChoiceIsInExpectedAnwsers(o)&&this._handleOptionStyle(r,t)}}},{key:"_handleOptionStyle",value:function(e,t){var" e="[],t=0;t<this.exam_options.length;t++){var" e}}]),t}(l["default"]);n["default"]="d},{"./BaseExamModalDialog":2}],10:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" f(e,t,n){null="==e&&(e=Function.prototype);var" 0:f(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},l="e("./BaseDialog"),d=i(l),c=function(e){function" t(e,n,i,a){r(this,t);var="" s._init(i,a),s}return="" a(t,e),s(t,[{key:"_init",value:function(e,t){var="">'});this.content(n),videojs.on(n,"click",e)}},{key:"buildCSSClass",value:function(){return"plugin-exam-prompt "+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}}]),t}(d["default"]);n["default"]=c},{"./BaseDialog":1}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseExamModalDialog"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.exam_options="[],i.exam_selected_anwser=[],i.isExamFinished(i.exam)&&(i.exam_selected_anwser=i.exam.result.choosed),i._initConent(),i}return" a(t,e),s(t,[{key:"_createexamcontent",value:function(){var="" e="this;this.exam_options=[],videojs.emptyEl(this.exam_content),this.exam_content.innerHTML='<li" class="title"><span class="num">'+this.exam.innerId+'</span><div class="info">'+this.exam.question+"</div>",videojs.addClass(this.exam_content,"topic-choose"),videojs.removeClass(this.exam_content,"topic-resolve");for(var t=0;t<this.exam.options.length;t++){var n="this.exam.options[t],i='<span" class="num">'+n.option_key+""+n.option_val,r=videojs.createEl("li",{className:"list",innerHTML:i});this.isExamFinished(this.exam)||videojs.on(r,"click",function(){var t=this.children[0].innerHTML;e.exam_selected_anwser=[t],e._handleSelectedAnwser(this)}),this.exam_content.appendChild(r),this.exam_options.push(r)}if(this.isExamFinished(this.exam)){var o=this._getSelectedOption();this._handleAllOptionStyle(o,this.exam)}}},{key:"_handleSelectedAnwser",value:function(e){for(var t=0;t<this.exam_options.length;t++){var n="this.exam_options[t];videojs.toggleClass(n,"answer",!1)}videojs.toggleClass(e,"answer");var" i="this;this.exam_selected_anwser.length">0&&(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.removeAttribute("disabled"),videojs.one(this.exam_confirmOrAnalysisButton,"click",function(){i._submitAnwser(e)}))}},{key:"_submitAnwser",value:function(e){this._createAnwserPrompt(),this._handleAllOptionStyle(e,this.exam);for(var t=0;t<this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var n="{},i=this._checkAnwserIsRight();n.choosed=this.exam_selected_anwser,n.result=i?"right":"wrong",this.exam.result=n,this._setAnalysisBtn(),this._setConfirmBtn(),this.trigger("answered",this.exam)}},{key:"_handleAllOptionStyle",value:function(e,t){this._handleOptionStyle(e,t);for(var" o="this.exam_options[r],a=o.children[0].innerHTML;n!=a&&i==a&&this._handleOptionStyle(o,t)}}},{key:"_handleOptionStyle",value:function(e,t){var" e="0;e<this.exam_options.length;e++){var" t="this.exam_options[e],n=t.children[0].innerHTML;if(this.exam_selected_anwser[0]==n)return" t}}}]),t}(l["default"]);n["default"]="d},{"./BaseExamModalDialog":2}],12:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="e("./BaseExamModalDialog"),l=i(u),d=function(e){function" t(e,n){r(this,t);var="" i.exam_options="[],i.exam.answer.sort(),i.exam_selected_anwser=[],i.isExamFinished(i.exam)&&(i.exam_selected_anwser=i.exam.result.choosed),i._initConent(),i}return" a(t,e),s(t,[{key:"_createexamcontent",value:function(){var=""><span class="num">'+this.exam.innerId+'</span><div class="info">'+this.exam.question+"</div>",videojs.addClass(this.exam_content,"topic-choose"),videojs.removeClass(this.exam_content,"topic-resolve");
for(var t=0;t<this.exam.options.length;t++){var n="this.exam.options[t],i='<span" class="num">'+n.option_key+""+n.option_val,r=videojs.createEl("li",{className:"list",innerHTML:i});this.isExamFinished(this.exam)||videojs.on(r,"click",function(){var t=this.children[0].innerHTML,n=e.exam_selected_anwser.indexOf(t);n==-1?e.exam_selected_anwser.push(t):e.exam_selected_anwser.splice(n,1),e.exam_selected_anwser.sort(),e._handleSelectedAnwser(this)}),this.exam_content.appendChild(r),this.exam_options.push(r)}if(this.isExamFinished(this.exam)){var o=this._getSelectedOptions();this._handleAllOptionStyle(o,this.exam)}}},{key:"_handleSelectedAnwser",value:function(e){videojs.toggleClass(e,"answer");var t=this;this.exam_selected_anwser.length>0?(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.removeAttribute("disabled"),videojs.one(this.exam_confirmOrAnalysisButton,"click",function(){t._submitAnwser()})):(videojs.off(this.exam_confirmOrAnalysisButton,"click"),this.exam_confirmOrAnalysisButton.setAttribute("disabled","disabled"))}},{key:"_submitAnwser",value:function(){this._createAnwserPrompt();var e=this._getSelectedOptions();this._handleAllOptionStyle(e,this.exam);for(var t=0;t<this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");this._setanalysisbtn();var n="{};this._checkAnwserIsRight(),n.choosed=this.exam_selected_anwser,n.result=this._getAnwserResult(),this.exam.result=n,this._setAnalysisBtn(),this._setConfirmBtn(),this.trigger("answered",this.exam)}},{key:"_handleAllOptionStyle",value:function(e,t){for(var" i="0;i<this.exam_options.length;i++){var" r="this.exam_options[i],o=r.children[0].innerHTML;!this._checkChoiceIsInActualAnwsers(o)&&this._checkChoiceIsInExpectedAnwsers(o)&&this._handleOptionStyle(r,t)}}},{key:"_handleOptionStyle",value:function(e,t){var" e="[],t=0;t<this.exam_options.length;t++){var" e}},{key:"_createanwserprompt",value:function(){if(!(this.exam_selected_anwser.length<="0)){for(var" class="color-'+n+'">'+(this._checkAnwserIsPartRight()?"":"")+(t?"":"")+'<span class="color-success">'+this._formatAnswer(e.join(""))+"</span>",r=0;r<this.exam_selected_anwser.length;r++){var o="this._checkChoiceIsInExpectedAnwsers(this.exam_selected_anwser[r]),a=o?"success":"danger";i+='<span" class="color-'+a+'">'+this._formatAnswer(this.exam_selected_anwser[r])+""}this.bottom_content.innerHTML=i,this.bottom_content.appendChild(this.exam_confirmOrAnalysisButton),this.bottom_content.appendChild(this.exam_analysisButton)}}},{key:"_checkAnwserIsRight",value:function(){var e=this.exam_selected_anwser.join(","),t=this.exam.answer.join(",");return t.indexOf(e)>-1}},{key:"_checkAnwserIsPartRight",value:function(){return this._checkAnwserIsRight()&&this.exam_selected_anwser.length<this.exam.answer.length}},{key:"_getanwserresult",value:function(){return 0="==i){var" this._checkanwserispartright()?"partright":this._checkanwserisright()?"right":"wrong"}}]),t}(l["default"]);n["default"]="d},{"./BaseExamModalDialog":2}],13:[function(e,t,n){"use" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}function="" r(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" o(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" f(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" 0:f(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},l="e("./BaseDialog"),d=i(l),c=function(e){function" t(e,n){r(this,t);var="" i.content(a),i}return="" a(t,e),s(t,[{key:"buildcssclass",value:function(){return"plugin-warn-prompt="" "+u(t.prototype.__proto__||object.getprototypeof(t.prototype),"buildcssclass",this).call(this)}},{key:"open",value:function(){u(t.prototype.__proto__||object.getprototypeof(t.prototype),"open",this).call(this);var="" e="this;this.player().setTimeout(function(){videojs.addClass(e.el(),"hide")},3e3),this.player().setTimeout(function(){e.close()},3300)}}]),t}(d["default"]);n["default"]=c},{"./BaseDialog":1}],14:[function(e,t,n){"use" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" e.setinterval(function(){var="" t="parseInt(e.currentTime(),10);r.showExamPop(t)},500)},i=function(){for(var" in="" a.questiontimemap)if(l<e&&d="">e&&!a.questionTimeMap[e].isViewed)return!1;return!0},r=new o["default"](e,t.popupExam),a=r.getExamInfo(),s=a.mode,u=0,l=0,d=0,c=void 0;void 0===c&&(c=n());var f=function(){"strict"==s&&!function(){var t=e.controlBar.progressControl.seekBar;t.off("mousedown"),t.on("mousedown",function(n){var i=t.calculateDistance(n),r=e.duration();i*r<u&&t.handlemousemove(n)})}(),"middle"==s&&!function(){var 0="==c&&(c=n())}),e.on("pause",function(){c&&(e.clearInterval(c),c=void" t="e.controlBar.progressControl.seekBar,n=t.bar.el_.ownerDocument;t.handleMouseMove=function(e){var" a="t.calculateDistance(o),s=e.duration();l=e.currentTime(),d=a*s,o.preventDefault(),t.addClass("vjs-sliding"),t.trigger("slideractive"),t.on(n,"mousemove",t.handleMouseMove),t.on(n,"mouseup",t.handleMouseUp),t.on(n,"touchmove",t.handleMouseMove),t.on(n,"touchend",t.handleMouseUp),i()?t.handleMouseMove(o):r.initWarnDialog(),t.player_.scrubbing(!0),t.videoWasPlaying=!t.player_.paused(),t.player_.pause()},t.off("mousedown"),t.off("mousemove"),t.on("mousedown",t.handleMouseDown)}()};t.loadImmediately&&f(),e.on("loadedmetadata",f),e.on("play",function(){void" 0)}),e.on("timeupdate",function(){e.currenttime()="">u&&(u=e.currentTime())}),e.on("ended",function(t){c&&(e.clearInterval(c),c=void 0)})},u=function(e){var t=this;this.ready(function(){s(t,videojs.mergeOptions(a,e))})};videojs.plugin("examPopup",u),u.VERSION="__VERSION__",n["default"]=u},{"./DialogController":4}]},{},[14])(14)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.VideojsSettingCenter=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return 0="==i){var" r}({1:[function(e,t,n){(function(t){"use="" strict";function="" i(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" r="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" t?t.videojs:null,o="i(r),a=e("./setting-center.js"),s=(i(a),{}),u=function(e,t){e.controlBar.addChild("settingCenter",t,7)},l=function(e){var" t="this;this.ready(function(){u(t,o["default"].mergeOptions(s,e))})};o["default"].plugin("settingCenter",l),l.VERSION="1.0.0",n["default"]=l}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" setting-center.js":3}],2:[function(e,t,n){(function(e){"use="" t(e){return="" e&&e.__esmodule?e:{"default":e}}function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}function="" r(e,t){if(!e)throw="" referenceerror("this="" hasn't="" been="" initialised="" -="" super()="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" o(e,t){if("function"!="typeof" t&&null!="=t)throw" typeerror("super="" expression="" must="" either="" be="" null="" or="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function" f(e,t,n){null="==e&&(e=Function.prototype);var" 0:f(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},u="undefined" e?e.videojs:null,l="t(u),d=l["default"].getComponent("Component"),c=function(e){function" t(e,n){i(this,t);var="" o.route="[],o.data=n.data,o.contentEl_.innerHTML=o.getTemplete(o.route),o.on("click",function(e){o.handleItemClick(e)}),o}return" o(t,e),a(t,[{key:"buildcssclass",value:function(){return"qqy-menu="" vjs-hidden"}},{key:"createel",value:function(){var="" e="s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()},{role:"document"});return" this.contentel_="s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"ul",{className:"menu-content"},{role:"menu"}),e.appendChild(this.contentEl_),e}},{key:"getList",value:function(e){for(var">0?t.children[i]:t[i]}return t=this.route.length?t.children:t,this.currentList=t.map(function(e,t){return{text:e.text,event:e.event,callback:e.callback,children:!!e.children}}),this.currentList}},{key:"getTemplete",value:function(e){var t=this.getList(e),n=this.route.length?'<li class="item back" index="-1"></li>':"";return t.map(function(e,t){var i=e.children?"has-children":"",r=e.children?1:0;return n+='\n        <li 0="==i){var" class="item '+i+'" index="'+t+'" has-child="+r+">"+e.text+"</li>\n      "}),n}},{key:"handleItemClick",value:function(e){var t=e.srcElement||e.target,n=t.getAttribute("index");"-1"!==n&&this.currentList[n].event&&(this.player_.trigger(this.currentList[n].event),this.currentList[n].callback&&this.currentList[n].callback());var i=parseInt(t.getAttribute("has-child"));(i||"-1"===n)&&(n>=0?this.route.push(n):this.route.pop(),this.contentEl_.innerHTML=this.getTemplete(this.route))}}]),t}(d);n["default"]=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn" t="" been="" initialised="" -="" super()="" hasn't="" called");return!t||"object"!="typeof" t&&"function"!="typeof" t?e:t}function="" a(e,t){if("function"!="typeof" t&&null!="=t)throw" new="" typeerror("super="" expression="" must="" either="" be="" null="" or="" a="" function,="" not="" "+typeof="" t);e.prototype="Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function" m(e,t,n){null="==e&&(e=Function.prototype);var" r="Object.getPrototypeOf(e);return" 0:m(r,t,n)}if("value"in="" i)return="" i.value;var="" o="i.get;return" void="" 0!="=o?o.call(n):void" 0},l="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" t?t.videojs:null,d="i(l),c=e("./menu.js"),f=i(c),p=d["default"].getComponent("Component"),h=function(e){function" t(e,n){r(this,t);var="" i.menu="new" f["default"](e,{data:n.data,id:"qqy-menu",name:"qqy-menu"}),i.addchild(i.menu),i.on("mouseenter",function(){i.handlemouseenter()}),i.on("mouseleave",function(){i.handlemouseleave()}),i}return="" a(t,e),s(t,[{key:"buildcssclass",value:function(){return"qqy-setting-center"}},{key:"createel",value:function(){return="" u(t.prototype.__proto__||object.getprototypeof(t.prototype),"createel",this).call(this,"div",{classname:this.buildcssclass(),innerhtml:this.options_.text},{role:"menu-button"})}},{key:"handlemouseenter",value:function(){this.menu.show()}},{key:"handlemouseleave",value:function(){this.menu.hide()}}]),t}(p);d["default"].registercomponent("settingcenter",h),n["default"]="h}).call(this,"undefined"!=typeof" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{".="" menu.js":2}]},{},[1])(1)}),!function(e){if("object"="=typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" window?window:"undefined"!="typeof" self?self:this,t.videojswatermark="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" u="function" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" l="new" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" d="n[a]={exports:{}};t[a][0].call(d.exports,function(e){var" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" require&&require,a="0;a<i.length;a++)r(i[a]);return" r}({1:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" e?e.videojs:null,r="t(i),o={file:"Owned_Stamp.png",pos:"top.left",xrepeat:0,opacity:100},a=function(e,t){var" window?window:{})},{}]},{},[1])(1)}),!function(e){if("object"="=typeof" self?self:this,t.videojsfingerprint="e()}}(function(){return">e.el().offsetWidth&&(n=e.el().offsetWidth-t.offsetWidth);var i=parseInt(e.el().offsetHeight*Math.random());i+t.offsetHeight>e.el().offsetHeight&&(i=e.el().offsetHeight-t.offsetHeight),t.style.left=n+"px",t.style.top=i+"px"};e.on("play",function(){i=!0}),e.on("pause",function(){i=!1}),e.on("ended",function(){i=!1}),e.on("fullscreenchange",function(){n.style.visibility="hidden"}),e.on("resize",function(){n.style.visibility="hidden"}),e.on("seeking",function(){i=!1}),e.on("seeked",function(){i=!0}),e.on("error",function(){i=!1}),e.on("dispose",function(){i=!1}),r()},s=function(e){var t=this;this.ready(function(){a(t,r["default"].mergeOptions(o,e))})};r["default"].plugin("fingerprint",s),s.VERSION="1.0.0",n["default"]=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.VideojsHotkeys=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(e){"use="" strict";function="" t(e){return="" e&&e.__esmodule?e:{"default":e}}object.defineproperty(n,"__esmodule",{value:!0});var="" i="undefined" !="typeof" window?window.videojs:"undefined"!="typeof" e?e.videojs:null,r="t(i),o="vjs-",a={volumeStep:.1,seekStep:5,fast_step:10,enableMute:!0,enableVolumeScroll:!0,enableFullscreen:!0},s=function(e,t){var" n="e.el(),i=document;e.constructor.prototype.promptClass=[o+"playing",o+"paused",o+"5s-forward",o+"5s-backward",o+"10s-forward",o+"10s-backward",o+"muted",o+"sound-up",o+"sound-down",o+"transition"],e.constructor.prototype.clearPromptClass=function(){e.promptClass.map(function(t){e.removeClass(t)}),e.el_.offsetTop};var" r="{32:function(n){n.preventDefault(),t.alwaysCaptureHotkeys&&n.stopPropagation(),e.paused()?e.play():e.pause(),e.paused()?e.addClass("vjs-paused"):e.addClass("vjs-playing")},75:function(t){t.preventDefault(),e.paused()?e.play():e.pause(),e.paused()?e.addClass("vjs-paused"):e.addClass("vjs-playing")},37:function(n){if(n.preventDefault(),e.currentTime<t.seekStep)e.currentTime(0);else{var" t="function(){clearTimeout(r)},r=setTimeout(function(){e.off("useractive",t),i.activeElement.parentElement==n.querySelector(".vjs-control-bar")&&n.focus()},10);e.one("useractive",t)}),e.on("play",function(){var" e="n.querySelector(".iframeblocker");e&&""===e.style.display&&(e.style.display="block",e.style.bottom="39px")});var" a="function(o){if(o.which,o.preventDefault,e.controls()){var" o="r.relatedTarget||r.toElement||i.activeElement;o!=n&&o!=n.querySelector(".vjs-tech")&&o!=n.querySelector(".iframeblocker")||t.enableFullscreen&&e.controlBar.fullscreenToggle.trigger("click")}},u=function(r){if(e.controls()){var" global?global:"undefined"!="typeof" self?self:"undefined"!="typeof" window?window:{})},{}]},{},[1])(1)}),!function(e){if("object"="=typeof" exports&&"undefined"!="typeof" module)module.exports="e();else" if("function"="=typeof" define&&define.amd)define([],e);else{var="" t;t="undefined" window?window:"undefined"!="typeof" self?self:this,t.videojspluck="e()}}(function(){return" function="" e(t,n,i){function="" r(a,s){if(!n[a]){if(!t[a]){var="" u="function" =="typeof" require&&require;if(!s&&u)return="" u(a,!0);if(o)return="" o(a,!0);var="" l="new" error("cannot="" find="" module="" '"+a+"'");throw="" l.code="MODULE_NOT_FOUND" ,l}var="" d="n[a]={exports:{}};t[a][0].call(d.exports,function(e){var" r(n?n:e)},d,d.exports,e,t,n,i)}return="" n[a].exports}for(var="" require&&require,a="0;a<i.length;a++)r(i[a]);return" i.innerhtml="t,i.className="vjs-pluck-text",n.appendChild(i),e.appendChild(n),n},s=function(e,t){var">0&&n</i.length;a++)r(i[a]);return></li></i.length;a++)r(i[a]);return></u&&t.handlemousemove(n)})}(),"middle"==s&&!function(){var></this.exam.answer.length}},{key:"_getanwserresult",value:function(){return></this.exam_selected_anwser.length;r++){var></this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");this._setanalysisbtn();var></this.exam.options.length;t++){var></this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var></this.exam_options.length;t++){var></this.exam.options.length;t++){var></t.length;n++){var></this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var></this.exam.options.length;t++){var></10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r),n+":"+i+":"+r}}]),t}(d["default"]);n["default"]=c},{".></r.questions.length;a++)o(a)}this.frame_body.appendchild(t)}},{key:"_close",value:function(){}},{key:"_resulthtmlmap",value:function(e){return></this.exam_options.length;t++)videojs.off(this.exam_options[t],"click");var></this.exam_options.length;t++){var></e.questions.length;i++){var></i?-1:n></this.exam_selected_anwser.length;e++)if(""==this.exam_selected_anwser[e].trim())return!1;return!0}},{key:"_handleanwserboxstyle",value:function(){for(var></this.exam.answer.length;t++){for(var></this.anwserboxs.length;s++)videojs.on(this.anwserboxs[s],["propertychange","input"],function(){var></this.exam.answer.length;i++){var></t.length;n++){var></t.length;n++){var></this.exam_selected_anwser.length;r++){var></=0)){for(var></i+1;return></t.length;n++){var></t.length;n++){var></t.length;n++){var></i.length;a++)r(i[a]);return></50},r=function(){if(j.totalsize></5){var></t.length;n++){var></t.length;n++){var></t.length;n++){var></10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r);var></=></n.length;t++){var></o|s></o|s></o|s></o|s></4)+14]=u;for(var></u%32,s[(u+64></24|s[p]></s.length;p++)s[p]=16711935&(s[p]<<8|s[p]></t.length;r=++i%4)0!=r&&n.push((e.indexof(t.charat(i-1))&math.pow(2,-2*r+8)-1)<<2*r|e.indexof(t.charat(i))></e.length;n+=2)t.push(parseint(e.substr(n,2),16));return></e.length;n++)t.push((e[n]></24-i%32;return></e.length;n++,i+=8)t[i></e.length;t++)e[t]=n.endian(e[t]);return></32-t|e></i.length;s++)"start"===i[s].type?(n++,2===n&&(e=i[s].time)):"end"===i[s].type&&(n--,1===n&&(t=i[s].time)),null!==e&&null!==t&&(r.push([e,t]),e=null,t=null);return></t.length;n++){var></=t&&r.endtime></s.length;r++)t+=s[r].bytes.bytelength;for(a=new></u.length;r++)u[r].pts></w["default"].time_per_tick);this.buffer_.length&&o&&(this.buffer_[0]=this.buffer_[0].subarray(o)),u></e.bytelength?a:t.segmentparser_.flush.bind(t.segmentparser_))};o()}},{key:"abort",value:function(){this.buffer_=[],this.buffersize_=0,this.mediasource_.swfobj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){(0,y["default"])(e,t,this.metadatatrack_),(0,y["default"])(e,t,this.inbandtexttrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receivebuffer_",value:function(e){var></t.length;n++){var></r;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};i.prototype.pipe=function(e){return></=e,i-=e,e;return></r|this.readbits(r):o},this.skipleadingzeros=function(){var></=r:t></=e,i-=e):(e-=i,r=math.floor(e></this.pendingboxes.length;r++)a.data.set(this.pendingboxes[r],o),o+=this.pendingboxes[r].bytelength;for(r=0;r<this.pendingcaptions.length;r++)t=this.pendingcaptions[r],t.starttime=t.startpts-s,t.starttime></e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalunittype?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),i=[n],i.bytelength=n.data.bytelength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalunittype&&(i.keyframe=!0),i.duration=n.dts-i.dts,i.bytelength+=n.data.bytelength,i.push(n));return></=s&&(!i||l></e.length;t++)n=e[t],i.push({size:n.data.bytelength,duration:1024});return></24|n[o+1]<<16|n[o+2]<<8|n[o+3],(s=i(t,["mdia","mdhd"])[0])?(r=s[0],o=0===r?12:20,e[a]=s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3],e):null):null},t)},a=function(e,t){var></e.bytelength;)o=e[n]<<24,o|=e[n+1]<<16,o|=e[n+2]<<8,o|=e[n+3],a=r(e.subarray(n+4,n+8)),s=o></o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)></2|a.flags.dependson,a.flags.isdependedon<<6|a.flags.hasredundancy<<4|a.flags.paddingvalue<<1|a.flags.isnonsyncsample,61440&a.flags.degradationpriority,15&a.flags.degradationpriority,(4278190080&a.compositiontimeoffset)></o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)></r.length;t++)a.push((65280&r[t].bytelength)></r.length;n++)t=r[n].flags,o[n+4]=t.dependson<<4|t.isdependedon<<2|t.hasredundancy;return></7|e.channelcount<<3,6,1,2]))},a=function(){return></arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)o+=r[t].bytelength;for(n=new></r);this.trigger("data",t)}}}},i.prototype=new></n;i++)r+="%"+("00"+e[i].tostring(16)).slice(-2);return></27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])></27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])></=63&&(i=9834,r=""),16===(240&i))return;this[this.mode_](e.pts,i,r)}}}};t.prototype=new></=127&&(16!==i||r<96)&&(i=32,r=null),(17===i||25===i)&&r></=23&&r></this.numberoftracks)){for(this.videotrack?i=this.videotrack.timelinestartinfo.pts:this.audiotrack&&(i=this.audiotrack.timelinestartinfo.pts),r.tags.videotags=this.videotags,r.tags.audiotags=this.audiotags,n=0;n<this.pendingcaptions.length;n++)t=this.pendingcaptions[n],t.starttime=t.startpts-i,t.starttime></16;return></e.length;n++)this.bytes[this.position]=e.charcodeat(n),this.position++;this.position++,this.view.setfloat64(this.position,t),this.position+=8,this.length=math.max(this.length,this.position),++r},this.writemetadataboolean=function(e,t){var></e;n++)0!==o&&(i=t.readexpgolomb(),o=(r+i+256)%256),r=0===o?r:o},u=function(e){for(var></t.bytelength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.bytelength;)switch(t[e]){case></2|(192&e[l+3])></r)return;if(this.trigger("data",{pts:t.pts+d*u,dts:t.dts+d*u,samplecount:s,audioobjecttype:(e[l+2]></e.length;)if(255===e[l]&&240===(246&e[l+1])){if(i=2*(1&~e[l+1]),n=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])></10)break;if(s=this.parseid3tagsize(e,u),s></7)break;if(s=this.parseadtssize(e,u),s></3,r=6144&e[t+3];return></0?void></t.length;n++){var></t;)h[i]=i+"";for(var></=r}var></t}var></3?void></i.length;v+=4)p=c(i[v]),h=c(i[v+1]),m=c(i[v+2]),y=c(i[v+3]),r.decrypt(p,h,m,y,a,v),a[v]=c(a[v]^u),a[v+1]=c(a[v+1]^l),a[v+2]=c(a[v+2]^d),a[v+3]=c(a[v+3]^f),u=p,l=h,d=m,f=y;return></8^x[255&d]^a[y++],c=s,s=u,u=l,l=d,d=c}}]),e}();n["default"]=s,t.exports=n["default"]},{}],18:[function(e,t,n){"use></16^x[l></24^x[u></4;m++)r[(3&-m)+o]=x[s></h;m++)c=g[s></=4||r<4?l[r]=s:l[r]=c[0][d[s></24,p=p<<1^283*(p></8^d[255&s],n%f===0&&(s=s<<8^s></16^d[s></24^d[s></5;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return></24^m></4;o++)t[o][a]=h=h<<24^h></1^s<<2^s<<3^s<<4,p=p></i;++n)t[n].call(this,arguments[1]);else></t.length;n++){var></a.start(0)&&s.length&&(p["default"].log("tried></n?t.start(0):n-60;for(var></0||s===t.segments.length?null:(a=t.segments[s],{uri:a.resolveduri,mediaindex:s,playlist:t,bytes:null,encryptedbytes:null,buffered:null,timestampoffset:nan,timeline:a.timeline,duration:a.duration})}}},{key:"abort_",value:function(){this.xhr_&&this.xhr_.abort(),this.pendingsegment_=null}},{key:"init_",value:function(){return></e.length;n++)i=e.start(n),r=e.end(n),a.push([i,r]);if(t)for(n=0;n<t.length;n++)i=t.start(n),r=t.end(n),a.some(s)||o.push(r);return></2)return></0)return></(l||a);i++)if(r=e.segments[i],t-=r.duration,t<0)return></e.segments.length;r++){if(i=e.segments[r],"undefined"!=typeof></0||m></=date.now()}).length},r.islowestenabledrendition_=function(){var></1)return></t.end(0)?n.end(0):t.end(0)]]):t):m["default"].createtimeranges()}},{key:"updateduration",value:function(){var></t.length;n++){var></n.length;i++){var></126?string.fromcharcode(e):"."},a={hexdump:function(e){for(var></=r.adendtime)return></i.length;a++)r(i[a]);return>